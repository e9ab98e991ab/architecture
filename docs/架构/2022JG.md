## 第1章 绪论

### 1.1 系统架构概述

>系统架构设计师是承担系统架构设计的核心角色，他不仅是连接用户需求和系统进一步设计与实现的桥梁，也是系统开发 早期阶段质量保证的关键角色。随着系统规模和复杂性的提升，系统架构设计师在整个项目研
制中的主导地位愈加重要。可以说，系统架构师就是项目的总设计师，他是一个既需要掌控整体又需要洞悉局部瓶颈，并依据具体的业务场景给出解决方案的总体设计人员：他要确认和评估系统需求，给出开发规范，搭建系统实现的核心构架，并澄清技术细节、扫清主要难点的技术人员：他要掌握技术团队的能力需要，给出项目管理方法，采用合适生命周期模型，具备以自身为核心形成团队的能力，并在项目进度计划和经费分配等方面开展评估，以预防项目风险。

系统架构(System Architecture)是系统的一种整体的高层次的结构表示， 是系统的骨架和根基，也决定了系统的健壮性和生命周期的长短。
### 1.1.1 系统架构的定义及发展历程

#### 1.系统架构的定义

**架构**是体现在组件中的一个系统的基本组织、它们彼此的关系与环境的关系及指导它的设 计和发展的原则。
**系统**是组织起来完成某一特定功能或一组功能的组件集。

> 系统这个术语包括了单独的应用程序、传统意义上的系统、子系统、系统之系统、产品线、整个企业及感兴趣的其他集合。系 统用于完成其环境中的一个或多个任务。

**环境**或者上下文决定了对这个系统的开发、运作、政策以及会对系统造成其他影响的环境和设置。  
**任务**是由一个或者多个利益相关者通过系统达到一些目标的系统的一个用途或操作。

架构设计的**作用**主要包括以下几点：
* 解决相对复杂的需求分析问题：
* 解决非功能属性在系统占据重要位置的设计问题：
* 解决生命周期长、扩展性需求高的系统整体结构问题：
* 解决系统基于组件需要的集成问题：
* 解决业务流程再造难的问题。

#### 2. 发展历程

软件架构运用而生的条件：

(1)软件复杂、易变，其行为特征难以预见，软件开发过程中需求和设计之间缺乏有效的转换，导致软件开发过程困难和不可控。  
(2)随着软件系统的规模越来越大、越来越复杂，整个系统的结构和规格说明就显得越来越重要。  
(3)对于大规模的复杂软件系统，相较于对计算算法和数据结构的选择，系统的整体结构设计和规格说明已经变得明显重要得多。  
(4)对软件系统结构的深入研究将会成为提高软件生产率和解决软件维护问题的最有希望的新途径。  

##### 软件架构的四个发展阶段：

1)基础研究阶段(1968一1994年)

**模块化开发方法**是指把一个待开发的软件分解成若干个小的而且简单的部分，采用对复杂事物分而治之的经典原则。

模块化开发方法涉及的主要问题是模块设计的规则，即系统如何分解成模块。

而每一模块都可独立开发与测试，最后再组装成一个完整软件。

对一个规约进行分解，以得到模块系统结构的方法有数据结构设计法、功能分解法、数据流设计和面向对象的设计等。

#####  将系统分解成模块时，应该遵循以下规则：
(1)最高模块内聚。也就是在一个模块内部的元素最大限度地关联，只实现一种功能的模块是高内聚的，具有三种以上功能的模块则是低内聚的。  
(2)最低耦合。也就是不同模块之间的关系尽可能弱，以利于软件的升级和扩展。  
(3)模块大小适度。颗粒过大会造成模块内部维护困难，而颗粒过小又会导致模块间的耦合增加。  
(4)模块调用链的深度（嵌套层次）不可过多。  
(5)接口简单、精炼（扇入扇出数不宜太大），具有信息隐蔽能力。  
(6)尽可能地复用已有模块。

#####  基于模块化思想，业界提出了面向对象服务架构(Service-Oriented Architecture,SOA)思想

它提供一组基于标准的方法和技术，通过有效整合和重用现有的应用系统和各种资源实现服务组件化，并基于服务组件实现各种新业务应用的快速组装，帮助企业更好地应对业务的灵活性要求。

这样，通过有效平衡业务的灵活性和IT的复杂度，为开发者提供了新的视角，有效拉近了IT和业务的距离。到20世纪90年代末期，计算机的发展推动了企业管理自动化的步伐，管理信息系统(Management Information System,MIS)在企业中得到了广泛使用。

与此同时，IT业为了降低开发成本，解决业务需求的易变性，实现软件模块的重用，考虑将企业业务与数据处理相分离的分层思想，这也是软件架构的初步雏形。
如下图：

![image-20230208下午22159836](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230208%E4%B8%8B%E5%8D%8822159836.png)

2)概念体系和核心技术形成阶段(1999一2000年)

组件具有可组装性和可插拔性。

每个组件的运行仅依赖于平台或者容器，组件与组件之间不存在直接的耦合关系。同时，组件和组件之间又并非绝对独立。

组件经过组装后可以与其他组件进行业务上的交互。组件化开发并不等同于模块化开发。模块化开发只是在逻辑上做了切分，物理上（代码）通常并没有真正意义上的隔离。

组件化也不等同于应用集成，应用集成是将一些基于不同平台或不同方案的应用软件有机地集成到一个无缝的、并列的、易于访问的单一系统中，以建立一个统一的综合应用。

**组件化比模块化更独立，但比应用集成结合得更加紧密。**

3)理论体系完善与发展阶段(1996年至今)

(1)软件架构描述与表示。
目前存在多种软件架构描述语言，比较典型的是基于组件和消息的软件架构描述语言C2SADL,分布、并发类型的架构描述语言Wright，架构互换语言ACME，基于组件和连接的架构描述语言UniCon，基于事件的架构描述语言Rapide，以及其他比较有影响力的描述语言Darwin、MetaH、Aesop、Weaves、SADL、xADL等。

(2)软件架构分析、设计和测试。
**架构分析**的内容可分为结构分析、功能分析和非功能分析。

分析的目的是系统被实际构造之前预测其质量属性。
架构分析常用的方法有：

软件架构分析方法SAAM、架构权衡分析法ATAM、成本效益分析法CBAM、基于场景的架构再工程SBAR、架构层次的软件可维护性预测ALPSM、软件架构评估模型SAEM等。

**架构设计**是指生成一个满足用户需求的软件架构过程。

架构设计常用的方法有：

从工件描述中提取架构描述的工件驱动(artifact--driven)方法；

从用例导出架构抽象的用例驱动(use-case-driven):

从模式导出架构抽象的模式驱动(pattern-driven)方法；

从领域模型导出架构抽象的域驱动(domain-driven)方法以及从设计过程中获得架构质量属性需求的属性驱动设计(attribute-driven design)方法等。  
**架构测试**着重于仿真系统模型、解决架构层的主要问题。

由于测试的抽象层次不同，架构测试策略分为单元、子系统、集成和验收测试等阶段的测试策略。测试方法主要包括架构测试覆盖方法、组件设计正确性验证方法和基于CHAM的架构动态语义验证方法等。

(3)软件架构发现、演化与重用。

**软件架构发现**解决如何从已经存在的系统中提取软件架构的问题，属于逆向工程。

Waters等人提出了一种迭代式架构发现过程。  
**软件架构演化**即由于系统需求、技术、环境和分布等因素的变化而最终导致软件架构的变动。软件系统在运行时刻的架构变化称为架构动态性，而将架构的静态修改称为架构扩展。架构扩展和动态性都是架构适应性和演化的研究范畴。
**软件架构复用属于设计重用**，比代码重用更抽象。架构模式就是架构复用的一种成果。

(4)基于软件架构的开发方法。  
软件开发模型是跨越整个软件生存周期的系统开发、运行和维护所实施的全部工作和任务的结构框架，给出了软件开发活动各个阶段之间的关系。

通常软件开发模型可分为三种：

以软件需求完全确认为前提的瀑布模型：

在软件开发初期只能提供基本需求为前提的渐进式开发模型（如螺旋模型等）：

以形式化开发方法为基础的变换模型。

(5)软件架构风格。
**架构风格（架构模式）**是针对给定场景中经常出现的问题提供的一般性可重用方案，它反映了领域中众多系统所共有的结构和语义特征，并指导如何将各个模块和子系统有效地组成一个完整的系统。

通常，将软件架构风格分成主要五类(David Garland和Mary Shaw划分方式)：
**数据流风格、调用/返回风格、独立组件风格、虚拟机风格和仓库风格**。

4)普及应用阶段（2000年至今)

>在软件架构的发展历程中，**1999年是一个关键年份**。
>
>这一年召开了第一届FP软件架构会议，并成立了IFIP工作组2.0与全球软件架构师协会。
>
>许多企业开始将软件架构相关理论投入实践，为了使架构描述能够在实践中得到更广泛的应用，Open Group提出了ADML,它是一种基于XML的架构描述语言，支持广泛的架构模型共享。
>
>由于企业对重用以及产品族的形成有着更多考虑，因此，软件产品线成为软件架构的一个重要分支，吸引了大量大型企业的关注。
>软件产品线架构表示一组具有公共的系统需求集的软件系统，它们都是根据基本的用户需求对
>标准的产品线架构进行定制，将可重用组件与系统独立的部分集成而得到的。

软件架构是软件生命周期中的重要产物，它影响软件开发的各个阶段：

* **需求阶段：**把软件架构有的概念引入需求分析阶段，有助于保证需求规约和系统设计之
  间的可追踪性和一致性。
* **设计阶段：**设计阶段是软件架构研究关注最早、最多的阶段，这一阶段的软件架构主要
  包括软件架构的描述、软件架构模型的设计与分析以及对软件架构设计经验的总结与复
  用等。
* **实现阶段：**将设计阶段设计的算法及数据类型用程序设计语言进行表示，满足设计、架
  构和需求分析的要求，从而得到满足设计需求的目标系统。
* 维护阶段：为了保证软件具有良好的维护性，在软件架构中针对维护性目标进行分析
  时，需要对一些有关维护性的属性（如可扩展性、可替换性）进行规定，当架构经过
  定的开发过程实现和形成软件系统时，这些属性也相应地反映了软件的维护性。

纵观软件架构的发展历程，其完成了由实践上升到理论，再由理论反馈指导实践的过程，
理论与实践均处于健康发展中，己经形成良性发展循环。
架构设计师也是随着架构概念的不断演化而逐步发展为软件开发过程中一个非常重要的
角色。

### 1.1.2 软件架构的常用分类及建模方法
#### 1.软件架构的常用分类

多年来，“架构”概念经过不断演化，目前已形成了满足不同用途的架构模式，比较典型的架构模型包括**分层架构、事件驱动架构、微核架构、微服务架构和云架构**等五类。

当然，像**C/S、B/S、管道-过滤器和PAC等架构**也是被广泛使用的软件架构，本节简要说明典型架构内涵。

##### 1)分层架构

分层架构(Layered Architecture)是最常见的软件架构，也是事实上的标准架构。这种架构将软件分成若干个水平层，每一层都有清晰的角色和分工，不需要知道其他层的细节。

层与层之间通过**接口**进行通信。分层架构通常明确约定软件一定要分成多少层。

最常见的是四层结构，

* 表现层(Presentation Layer):用户界面，负责视觉和用户互动：
* 业务层(Business Layer):实现业务逻辑；
* 持久层(Persistence Layer):提供数据，SQL语句就放在这一层；
* 数据库(Database Layer).:保存数据。

![image-20230208下午25258152](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230208%E4%B8%8B%E5%8D%8825258152.png)

有的项目在逻辑层和持久层之间加了一个服务层(Service)，提供不同业务逻辑需要的一些通用接口。用户的请求将依次通过这四层的处理，不能跳过其中任何一层。

##### 2)事件驱动架构
事件(Event)是状态发生变化时软件发出的通知。事件驱动架构(Event-driven Architecture)
是通过事件进行通信的软件架构，它分成四个部分：

* 事件队列(Event Queue)：接收事件的入口：
* 分发器(Event Mediator):将不同的事件分发到不同的业务逻辑单元：
* 事件通道(Event Channel).：分发器与处理器之间的联系渠道；
* 事件处理器(Event Processor):实现业务逻辑，处理完成后会发出事件，触发下一步
  操作。

![image-20230208下午30521640](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230208%E4%B8%8B%E5%8D%8830521640.png)

对于简单的项目，事件队列、分发器和事件通道可以合为一体，整个软件就分成事件代理
和事件处理器两部分。

##### 3)微核架构

**微核架构**(Microkernel Architecture)又称为**插件架构**(Plug-in Architecture)，是指软件的内核相对较小，主要功能和业务逻辑都通过插件实现：

![image-20230208下午33242154](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230208%E4%B8%8B%E5%8D%8833242154.png)

**内核(Coe)**通常只包含系统运行的最小功能。

插件则是互相独立的，插件之间的通信应该减少到最低，避免出现互相依赖的问题。

##### 4)微服务架构
微服务架构(Microservices Architecture)是服务导向架构(Service-Oriented Architecture,SOA)
的升级。

每一个服务就是一个独立的部署单元(Separately Deployed Unit)。

这些单元都是分布式的，互相解耦，通过远程通信协议（比如REST、SOAP)联系：

![image-20230208下午33453804](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230208%E4%B8%8B%E5%8D%8833453804.png)

微服务架构分成三种实现模式。

* **RESTful API模式：**服务通过API提供，云服务就属于这一类；
* **RESTful应用模式：**服务通过传统的网络协议或者应用协议提供，背后通常是一个多功能的应用程序，常见于企业内部：
* **集中消息模式：**采用消息代理(Message Broker)可以实现消息队列、负载均衡、统一日志和异常处理，缺点是会出现单点失败，消息代理可能要做成集群。

##### 5)云架构
云架构(Cloud Architecture)主要解决**扩展性**和**并发**的问题，是**最容易扩展的架构。**
它的高扩展性体现在将数据都复制到内存中，变成可复制的内存数据单元，然后将业务处理能力封装成一个个处理单元(Processing Unit)。

若访问量增加，就新建处理单元；若访问量减少，就关闭处理单元。由于没有中央数据库，所以扩展性的最大瓶颈消失了。

由于每个处理单元的数据都在内存里，需要进行数据持久化。
云架构主要分成两部分：**处理单元**(Processing Unit)和**虚拟中间件**(Virtualized Middleware),
如图所示。

![image-20230209上午104130405](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230209%E4%B8%8A%E5%8D%88104130405.png)

(1)**处理单元**：实现业务逻辑。
(2)**虚拟中间件**：负责通信、保持会话控制(sessions)、数据复制、分布式处理和处理单
元的部署。
这里，虚拟中间件又包含四个组件：

* **消息中间件(Messaging Grid)**:管理用户请求和会话控制(sessions),当一个请求进来以后，它决定分配给哪一个处理单元。
* **数据中间件(Data Grid)**：将数据复制到每一个处理单元，即数据同步。保证某个处理
  单元都得到同样的数据。
* **处理中间件(Processing Grid)：**可选，如果一个请求涉及不同类型的处理单元，该中
  间件负责协调处理单元。
* **部署中间件(Deployment Manager)：**负责处理单元的启动和关闭，监控负载和响应时
  间，当负载增加，就新启动处理单元，负载减少，就关闭处理单元。

#### 2.系统架构的常用建模方法
架构师在进行软件架构设计时，必须掌握软件架构的表示方法，即如何对软件架构建模。
根据建模的侧重点的不同，可以将软件架构的模型分成4种：**结构模型**、**框架模型**、**动态模型**
和**过程模型**。

* **结构模型**：这是一个最直观、最普遍的建模方法。此方法以架构的构件、连接件和其他概念来刻画结构。并力图通过结构来反映系统的重要语义内容，包括**系统的配置、约束、隐含的假设条件、风格和性质**。研究结构模型的核心是架构描述语言。
* **框架模型**：框架模型与结构模型类似，但它不太侧重描述结构的细节，而更侧重整体的结构。框架模型主要以**一些特殊的问题为目标建立只针对和适应问题的结构**。
* **动态模型**：动态模型是对结构或框架模型的补充，主要研究系统的“大颗粒”行为的性质。例如，描述系统的重新配置或演化。这里的动态可以是指系统总体结构的配置、建立或拆除通信或计算的过程，这类系统模型常是激励型的。
* **过程模型**：过程模型是研究构造系统的步骤和过程，其结构是遵循某些过程脚本的结果。
  上述介绍的4种模型并不是完全独立的，通过有机的结合才可形成一个完整的模型来刻画软件架构，也将能更加准确、全面地反映软件架构。

软件架构可从不同角度来描述用户所关心架构的特征。

Philippe Kruchten在1995年提出了一个**“4+1”视角模型**。“4+1”模型从5个不同的视角包括**逻辑(Logical)视角、过程(Process)视角、物理(Physical)视角、开发(Development).视角和场景(Scenarios).视角**来描述软件架构。

每一个视角只关心系统的一个侧面，5个视角结合在一起才能够反映系统的软件架构的全部内容。

#### 1.1.3软件架构的应用场景
软件架构发展至今，已随着信息技术的广泛应用而成为各个领域的关键技术能力。概括来讲，软件架构风格在实践中已被反复使用，不同的架构风格具有各自的优缺点和应用场景，比如：

**管道-过滤器风格**适用于将系统分成若干独立的步骤；

**主程序/子系统和面向对象的架构**风格可用于对组件内部进行设计：

**虚拟机风格**经常用于构造解释器或专家系统：

**C/S和B/S风格**适合于数据和处理分布在一定范围，通过网络连接构成系统：

**平台/插件风格**适用于具有插件扩展功能的应用程序：

**MVC风格**被广泛地应用于用户交互程序的设计：

**SOA风格**应用在企业集成等方面：

**C2风格**适用于GUI软件开发，用以构建灵活和可扩展的应用系统等。
而对于现代大型软件，很少使用单一的架构风格进行设计与开发，而是混合多种风格，从不同视角描述大型软件系统的能力，并可保证软件系统的可靠性、可扩展性、可维护性等非功能属性的正确描述。

#### 1.1.4软件架构的发展未来
从20世纪40年代出现编程算法算起，软件架构及相关技术经历了70余年的发展，其中关键的技术如图1-7所示。

架构发展的主线可以归纳为**模块化编程/面向对象编程、构件技术、面向服务开发技术和云技术**。这些阶段一方面引起了软件开发方法的演变，另一方面引发了领域工程相关技术的广泛应用。

针对架构本身的**描述，建模和验证技术**也在其中扮演着至关重要的角色。
从软件架构的发展历程可知，任何新技术、新方向和新思想的出现都会融入软件架构的发展历程中，如微服务架构、数据驱动架构以及智能架构等。

随着人类认识能力的增强，在不远的将来，一定会出现更具价值的新型软件架构来指引相应的软件开发工作。

![image-20230209上午113954778](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230209%E4%B8%8A%E5%8D%88113954778.png)

#### 1.2 系统架构设计师概述

系统架构设计师(System Architecture Designer.)是项目开发活动中的众多角色之一，它可
以是一个人或一个小组，也可以是一个团队。

架构师(Architect)包含建筑师、设计师、创造者、缔造者等含义，可以说，架构师是社会各领域的创造者和缔造者。
从组织上划分，架构师通常可分为：

业务架构师(Business Architect)、主题领域架构师(Domain Architect)、技术架构师(Technology Architect).、项目架构师(Project Architect)和**系统架构师**(System Architecture)等5类。

如果参考微软公司对架构设计师的分类，这里根据架构师关注的领域不同，可将系统架构设计师分为4种：

企业架构师EA(Enterprise Architect)、基础结构架构师IA(Infrastructure Architect)、特定技术架构师TSA(Technology Architect)和解决方案架构师SA(Solution Architect)。

本书的培养对象重点是围绕系统架构师的职责展开。

#### 1.2.1 架构设计师的定义、职责和任务
##### 1.架构设计师的定义

在定义架构设计师之前，先了解一下架构设计师、架构设计与架构之间的关系，

如图所示：
![image-20230209上午115143628](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230209%E4%B8%8A%E5%8D%88115143628.png)

架构设计师是系统开发的主体角色，他们通过执行一系列活动来实施架构设计。架构设计通过生成过程形成最终的产品架构，架构设计师的成果是创建架构。从图可以看出，系统开发中架构设计师是整个系统的核心。
架构设计师是负责系统架构的人、团队或组织(IEEE 1471-2000)。架构设计师是系统或产品线的设计责任人，是一个负责理解和管理并最终确认和评估非功能性系统需求（如软件的可维护性、性能、复用性、可靠性、有效性和可测试性等)，
给出开发规范，搭建系统实现的核心构架，对整个软件架构、关键构件和接口进行总体设计并澄清关键技术细节的高级技术人员。

##### 2.架构设计师的职责
架构设计师的职责应该是技术领导，这意味着架构设计师除了拥有专门技能外，还必须拥
有领导能力。

首先，领导能力既体现在组织中的职位上，也体现在架构设计师展现的品质上。
**在组织中的职位方面**，架构设计师是项目中的技术领导，应该拥有进行技术决策的权威。项目
经理更关注管理资源、进度和成本方面的项目计划，架构设计师和项目经理代表了这个项目的
公共角色。

**在架构设计师展现的品质方面**，领导力也可以在与其他团队成员的交流中展现出来，架构设计师应该为他人树立榜样并在制定方向方面表现出自信。成功的架构设计师是以人为导向的，都应在指导并培养他们团队的成员上花时间，以保证团队成员能够在后续项目的开发中能够完整地理解架构设计师的设计思路。

其次，拥有专门技能主要体现在除了必须非常清楚项目的总体目标和实施方法外，还应是特定的开发平台、语言、工具的大师，对常见应用场景能及时给出最恰当的解决方案，同时要对所属的开发团队有足够的了解，能够评估该开发团队实现特定的功能需求目标的资源代价。

架构设计师必须非常关注交付的实际结果，并必须赋予项目在技术方面的驱动力，还必须能够进行决策并确保这些决策被传达、理解并始终被执行。

##### 3.架构设计师的任务与组成
架构设计师在项目中的主要任务可概述如下。
(1)领导与协调整个项目中的技术活动（分析、设计和实施等）。
(2)推动主要的技术决策并最终表达为系统架构。
(3)确定系统架构，并促使其架构设计的文档化，这里的文档化应包括需求、设计、实施和部署等“视图”。
从技术角度看，架构设计师的职责就是**抽象设计、非功能设计和关键技术**设计等三大任务。
架构设计师角色可以由一个人或一个团队来履行。在角色和人之间是存在差异的，如一个人可能会履行多个角色。

由于架构设计师需要非常广泛的技能，所以**架构设计师角色通常由多个人履行**。这种方式允许技能分布于多个人，每个人都能充分运用他自己的经验。特别是在理解业务领域和掌握各个方面技术所必须的技能上，往往由几个人才能很好地覆盖。
这个团队是拥有共同目标和执行目标，拥有使他们可以相互负责的方法，同时技能相互补
充的一小部分人。
如果架构设计师角色由一个团队履行，拥有一个首席架构设计师角色非常重要，他不仅具有先知先明的能力、还是架构团队的单点协调人。没有这个协调人，架构团队的成员要创造出内聚的架构或做出决策是困难的。
优秀的架构设计师应知道他的优势和弱势。无论架构设计师的角色是否由一个团队来履行，架构设计师都应有好几个可信顾问的支持，这样架构设计师不仅可以了解其弱点，还可以通过获取必要的技能或与他人一起合作来弥补其知识的缺陷，进而弥补这些弱点。最优秀的架构通常由一个团队而不是个人创建，这仅仅因为当有多人参与进来时，使见识更广和更深。

#### 1.2.2 架构设计师应具备的专业素质

> 架构设计师作为项目的技术领导，他应熟悉业务领域知识并熟练掌握软件开发知识。一个优秀的架构设计师通常可以做到在软件开发知识和业务领域知识之间的平衡。因此，架构设计师应该具备以下专业知识。

1. 掌握业务领域的知识

**领域**是从事于某一行业的人理解并归纳的一组概念和术语知识或者活动范畴(UML,Usr guide 1999).
当架构设计师理解软件开发但不理解业务模型时，可能会开发出一个不能满足用户需求而只能反映该架构设计师所熟悉内容的解决方案，因此，熟悉业务也使得架构设计师能够预见可能发生的改变。

由于架构受其部署环境（包括业务领域）影响很大，对业务领域的正确认识可使架构设计师能够在可能改变的区域和稳定性方面做出更全面的决策。

2. 掌握技术知识

由于架构设计的某些方面明确需要技术知识，所以一个架构设计师应该拥有一定程度的技术水平。然而架构设计师不必是一个技术专家，它必须关注技术的重要因素，而不是细节。架构设计师需要理解像Java EE或.NET这类平台上的可用关键框架，但是不必理解访问这些平台可用的每个应用程序接口(API)的细节。由于技术的发展相当快速，架构设计师必须跟得上这些技术的发展。

3. 掌握设计技能

设计过程是架构设计的核心内容，架构是关键设计决策的具体化，因此，架构设计师应该拥有很强的设计技能。**关键设计决策**指**关键结构设计决策、特定模型的选择和指导规格说明书**等。
为了保证系统的结构完整性，这些元素被代表性的广泛应用并对系统取得成功产生深远的影响。因此，这样的元素应该由拥有相当技能的人识别出来。

设计能力不可能在短时间内获得，而是多年经验积累的结果，因此，一个优秀的架势设计师是要经过多年工作实践才能成为技术领导。

4. 具备编程技能

项目中的**开发人员**是架构设计师必须与之打交道的最重要的团队成员，而项目的最终产品是可执行代码，只有架构设计师承认开发人员的工作价值时，在架构设计师和开发人员之间的沟通才是有效的，尤其是在项目开发后期的缺陷更改时，双方的沟通尤为重要。因此，架构设计师应该具有一定的编程技能，即使他们在项目中不必编写代码，也必须跟上技术的更新。

优秀的架构设计师通常会有组织地参与开发并应该编写一定量的代码，如果架构设计师参与代码
实现，开发组织会从架构设计师那儿获得见识，这些见识可以直接有益于架构的专业知识本身。
架构设计师还可以通过查看他们决策和设计的第一手结果，对开发流程给出反馈。

5. 具备沟通能力

与架构设计师相关的所有软技能中，沟通最重要。架构设计师应该具备有效的口头和书面表达能力。有效的沟通可使开发组织能够充分理解架构设计师的思想，同时开发组织也能够及时将架构设计实现中遇到的问题及时反馈给架构设计师。有效的沟通是项目成功的基础。
架构设计师能够有效地与利益相关方沟通，对于理解他们的需求及与他们就架构达成并保持一致是非常重要的。

**架构设计师不是简单地将信息传达给团队，还要激励团队，架构设计师负责传达系统愿望，以便这个愿望为大家共享，而不是只有架构设计师理解并相信。**

6. 具备决策能力

**决策**是架构设计师必须具备的能力，尤其是在很多不很明确的情况下，而且没有充足的时间研究所有可能性时，架构设计师不能果断决策会延误项目，失去信任。优秀的架构设计师应承认这种情况，即使在决策时咨询其他人并营造共同参与决策的环境，进行适当的决策仍然是架构设计师的职责，而这些决策并不总是正确的，但是架构设计师必须学会纠正这些错误决策。

7. 知道组织策略

成功的架构设计师并不仅仅关心技术，他们还应对政治敏感并知道其在组织中的权利，他们利用这些知识与恰当的人进行沟通，并确保项目在适当的周期中获得支持。

8. 应是谈判专家

架构设计师需要与许多利益相关者进行交流，其中的一些交流需要谈判技巧。架构设计师应特别关注的一点是在项目中尽可能早地把风险降到最低，这对稳定架构所花费的时间有直接影响。

因为风险与需求有关，消除风险的一个途径是通过精炼需求以使这种风险不再出现，因此，必须回退需求以便利益相关者和架构设计师达成一致。这种情形要求架构设计师是一位有效的谈判专家，能够清晰明白地表明各种折中方案的后果。

#### 1.2.3架构设计师的知识结构
架构设计师综合的知识能力结构主要包括10个方面。
(1)战略规划能力。
(2)业务流程建模能力。
(3)信息数据架构能力。
(4)技术架构设计和实现能力。
(5)应用系统架构的解决和实现能力。
(6)基础IT知识及基础设施、资源调配的能力。
(7)信息安全技术支持与管理保障能力。
(8)IT审计、治理与基本需求的分析和获取能力。
(9)面向软件系统可靠性与系统生命周期的质量保障服务能力。
(10)对新技术与新概念的理解、掌握和分析能力。
系统架构设计师必须是开发团队的技术引导者。他们应具有很强的系统思维能力，在项目中需要能够从大量互相冲突的系统方法和工具中，判断出哪些是有效的或者是无效的，并在关键时刻能够做出科学的决策。这样，就要求架构设计师应当是一个思维敏捷、经验丰富、技术水平高超、受过良好教育的善于学习与沟通且决策能力强的人。他必须广泛了解各种技术并精通一种特定技术，至少了解计算机通用技术以便确定哪种技术最优，或组织团队开展技术评估。
优秀的架构设计师能考虑并评估所有可用来解决问题的总体技术方案。架构设计师需要拥有良
好的书面和口头沟通技巧，一般通过可视化模型和小组讨论进行沟通并指导团队，从而确保开
发人员按照架构建造系统。
因此，系统架构设计师应该是一种综合性特强的人才，其知识维度可以满足多层次、多方面的能力。多层次是指架构设计师应在技术领域的深度上掌握更多的基础知识，即必须在体系结构、计算机软硬件与网络基础知识、系统工程、信息系统、嵌入式系统、软件安全与可靠性等知识层面上受过良好教育并拥有自学习能力：还须在架构设计方法、架构模式、开发流程以及各种模型等方面有丰富的经验，广泛了解各种产品和技术并精通一种特定领域的架构设计方法。多方面是指架构设计师应在业务领域以及管理、商务、财务和法律等方面具备一定背景知识并熟悉相关政策，这与系统架构设计师的多角色特点是紧密相关的。

#### 1.3 如何成为一名好的系统架构设计师
##### 1.3.1 如何衡量一名优秀架构设计师

对于系统架构设计师而言，其优劣无法用统一的标准去衡量，优秀与否实际上是相对的，但是，根据架构设计师的能力可以进行评价。架构设计师是一个充满挑战的职业，需要关注很多维度和术。Pat Kua(原专家 Though Works咨询师)提出：

一个好的架构设计师是技术全面的，并给出了成为一个技术全面的架构设计师必须具备的6个角色特质（见下图)。

![image-20230209下午24907602](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230209%E4%B8%8B%E5%8D%8824907602.png)

1. 作为技术领导者

一名好的软件架构设计师需要明白，作为领导者并不一定要告诉开发人员做什么。相反，好的架构设计师就像一个导师，能够带领开发团队向同一个技术愿景前进。好的架构设计师会借助讲故事、影响力、引导冲突和构建信任等领导技能，将他们的架构愿景变成现实。一个好的领导者，同时也是一个好的架构设计师。他/她会仔细听取每个参与者的意见，通过与团队的互动调整他们的愿景。

2. 作为开发人员

一个架构设计师同时又是一个好的开发人员。通常，做出一个良好的架构选择需要权衡理想的架构状态与软件系统的当前状态。例如，如果一个问题更适合采用关系型数据库来解决，那么将文档数据库引入到系统中的做法是毫无道理的。

一个架构设计师如果不考虑技术选型与问题域之间的匹配度，会很容易受到各种技术的诱惑一这也就是常见的“象牙塔式架构设计师”行为模式。
缓解这种情况的最佳方法是让架构设计师多与开发人员待在一起，花一些时间在代码上。了解系统的构建方式及系统的约束，这将帮助架构设计师在当下环境中做出正确的选择。

3. 聚焦系统

经验丰富的开发人员明白代码只是软件的一部分。为了让代码可运行，他们还需要了解代码在生产环境中运行良好所需的其他重要质量属性。

他们需要考虑部署过程、自动化测试、性能、安全和可支持性等多个方面。开发人员可能以临时的方式来实现这些质量属性，而架构设计师不仅需要专注于了解代码，还要了解并满足不同利益相关者（如支持、安全和运营人员）的需求。一个好的架构设计师需要专注于寻找那些能够满足不同利益相关者需求的解决方案，而不是选择针对某一个参与者的偏好或风格进行优化的工具或方法。

4. 具备企业家思维

所有技术选型都有相关的成本和收益，一个好的架构设计师需要从这两个角度考虑新的技术选型，就如成功的企业家是愿意承担风险的，他不但会寻求快速学习的机会和方法，也要学会做好接受失败的心理准备。架构设计师可以用类似的方式做出技术选型，收集真实世界中有关短期和长期成本的信息，以及他们可能意识到的好处。
这方面一个很好的例子是，架构设计师避免承诺立即使用一个在阅读新文章时看到或在某一会议上听到过的工具。相反，他们试图通过架构调研来了解工具在其环境中的相关性，以收集更多信息。他们对于工具的选择不是基于销售量，而是考虑他们需要什么以及这个工具所提供的价值。他们还会寻找这些工具背后的隐性成本，例如工具的支持情况（如文档化程度、社区使用情况)，工具可能带来的约束或长期来看可能带来的额外风险。

5. 权衡策略思维与战术思维

许多团队由一些独立的开发人员一起构建软件，而每个人都倾向于选择自己最舒适或最有经验的工具和技术。

好的架构设计师会持续关注可能有用的新技术、工具或方法，但不一定立即采用它们。技术采用往往需要长期的考量。架构设计师将在团队和组织层面寻求敏捷度（允许团队快速采取行动)和一致性（保持足够的一致性）之间的良好平衡。建立自己的技术雷达进行练习是用战略思维探索技术的一个有用工具。

6. 良好的沟通

架构设计师需要知道，有效的沟通是建立信任和影响团队以外成员的关键技能。他们知道不同群体使用不同的术语，而使用技术术语的描述语言与业务人员沟通将会变得比较困难。与其谈论模式、工具和编程概念，架构设计师需要使用听众熟悉的术语与之交流，诸如风险回报、成本和收益等。这比单纯使用技术词汇进行沟通来得更好。

架构设计师还需要认识到团队内部沟通与外部沟通同样重要，可以使用图表和小组讨论的方式来建立和完善技术愿景，并进行书面记录（如架构决策日志或Wk等），从而为将来留下可追溯的历史。
总之，做一个技术全面的架构设计师并不容易，因为有很多方面需要关注，而每个方面都有很多作为开发人员经常不会专注并练习的技能。其实最重要的不一定是一个架构设计师的能力，而是他们在每个不同的领域都有足够的专业知识。

**有价值的架构设计师需要在上述6个方面都具备良好的专业知识。**

#### 1.3.2从工程师到系统架构设计师的演化
人们通常把系统架构设计师类比为建筑师，其共同点都是做好顶层设计，充当需求方和实施者的桥梁。

但是系统架构设计师和建筑师存在许多不同，对于建筑师而言，在成为建筑设计师之前，是不会成为建筑工人或工程师的：**而系统架构设计师一定是从工程师成长起来的。**
工程师和架构设计师的本质区别主要体现在技术、组织和个人成长上。
在技术上，架构设计师的首要工作是抽象建模，而比首要工作更重要的是要了解自己所处的业务领域。

只有对业务足够了解，才能更好地抽象和建模，也更能沉淀通用的设计方法论。

另一方面，架构设计师需要了解甚至精通业务领域所涉及的技术领域，譬如对于互联网行业的
架构设计师，小到语言、算法、数据库，大到网络协议、分布式系统、服务器、中间件、DC
等等都需要涉猎。

一句话，架构设计师是技术团队的对外接口人，也应该是外部团队技术问题的终结者。

除广度之外还要有深度，对于关键技术模块的设计，架构设计师需要有技术的权威性。而工程师则属于开发团队成员，主要负责项目的具体实现工作，在架构设计师的指导和帮助下，要熟悉相关业务流程，懂得建模方法，使用已确定的开发方法进行设计、编码和测试等工作，从掌握专用技术知识层面来讲，工程师必须熟练掌握详细的设计方法、编程语言、工具和环境。
架构设计师要成为**业务**和**技术**的桥梁，因此需要精通业务和技术的语言，要锻炼沟通能力，不只是口头沟通能力，也包括用标准化的图表表达设计思路的能力。

架构设计师需要一种学会掌握“中庸之道”的方法。不管是技术的选型，团队的协作、培养和分工，商业诉求和成本控制，产品需求和技术诉求的匹配，很多时候都是在做权衡。

可以说，架构的工作主题就是权衡，这可能也是工程师成长为架构设计师的最大挑战。

工程师经常是完美主义的，程序也总是精准而精确的，但是架构设计师要习惯于不完美和一定条件下的不精确。

工程师主要是追求产品的完美形态，通过自己设计出的漂亮程序以充分展示自我能力，很少考虑团队与协同，开发团队相互间为了提升，往往存在相互竞争。
系统架构设计师一般都具备计算机科学或软件工程的知识，由工程师做起，然后再慢慢成长为架构设计师。

成为系统架构设计师的关键是要培养自己的判断力、执行力和创新力。

**判断力**是能够准确判断系统的复杂度在哪里，能准确地看出系统的脆弱点：

**执行力**是能够使用合适的方案解决复杂度问题：

**创新力**是能够创造新的解决方案解决复杂度问题。

因此，要成为一个系统架构设计师，就需要不断地锻炼自己的内功，这些内功来源于经验、视野和思考。因此，要从工程师成长为架构设计师，应遵循积累经验，拓宽视野和深度思考的原则。

下面说明从工程师到架构设计师的成长过程。

1. 工程师阶段

要从一名技术员（助理工程师）成为一个合格的工程师需要参加相关工作13年时间，其典型特征是“在别人的指导下完成开发”，这里的“别人”主要是“高级工程师”或者“技术专家”。

通常情况下，高级工程师或者技术专家负责需求分析、讨论和方案设计，工程师负责编码实现，高级工程师或者技术专家会指导工程师进行编码实现。

工程师阶段应该是原始的“基础技能积累阶段”，主要积累基础知识，包括编程语言、基本数据结构、开发环境、操作系统、数据库以及相关软件开发流程等。

2. 高级工程师阶段

从工程师成长为高级工程师需要3~5年时间，其典型特征是“独立完成开发”，包括需求分析、方案设计和编码实现，其中需求分析和方案设计已经包含了“判断”和“选择”，只是范围相对来说小一些，更多是在已有架构下进行设计。

高级工程师主要需要“积累方案设计经验”，简单来说就是业务当前用到的相关技术的设计经验。
高级工程师阶段相比工程师阶段有两个典型的差异：

**其一是深度**，如果说工程师是要求知道How,那高级工程师就要求知道Why了。

例如Java的各种数据结构的实现原理，因为只有深入掌握了这些实现原理，才能对其优缺点和使用场景有深刻理解，这样在做具体方案设计的时候才能选择合适的数据结构。

**其二是理论**，理论就是前人总结出来的成熟的设计经验，

例如:

数据库表设计的3个范式、

> 原子性（存储的数据应该具有“不可再分性”）
>
> 唯一性 (消除非主键部分依赖联合主键中的部分字段)（一定要在第一范式已经满足的情况下）
>
> 独立性，消除传递依赖(非主键值不依赖于另一个非主键值)

面向对象的设计模式、

> **创建型模式，**共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。用于描述“”怎样创建对象“，它的主要特点是”将对象的创建与使用分离“。
> **结构型模式，**共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。用于描述如何将对象和类组装成较大的结构，并同时保持结构的灵活和高效。
> **行为型模式，**共十一种：策略模式、模板模式、观察者模式、迭代器模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。用于描述类或对象之间怎样相互协作共同完成单个对象都无法完成的任务，以及怎样分配职责。

SOLID设计原则、

> SRP：单一职责原则
> OCP：开闭原则
> LSP：里氏替换原则
> ISP：接口隔离原则
> DIP：依赖反转原则

[缓存设计理论（缓存穿透、缓存雪崩和缓存热点)](docs%2F%E6%9E%B6%E6%9E%84%2F%E8%B5%84%E6%96%99%2F%E7%BC%93%E5%AD%98%E8%AE%BE%E8%AE%A1%E7%90%86%E8%AE%BA%EF%BC%88%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%E5%92%8C%E7%BC%93%E5%AD%98%E7%83%AD%E7%82%B9%29.md)

3. 技术专家阶段

成长为技术专家需要4~8年时间，其典型的特征是“某个领域的专家”，通俗地讲，只要是这个领域的问题，技术专家都可以解决。

例如：Java开发专家、嵌入式开发专家、操作系统开发专家等。通常情况下，“领域”的范围不能太小，例如我们可以说“Java开发专家”，但不会说“Java多线程专家”或“Java JDBC专家”。

技术专家与高级工程师的一个典型区别就是：
高级工程师主要是在已有的架构框架下完成设计，而技术专家会根据需要修改、扩展和优化架构。从高级工程师成长为技术专家，主要需要“拓展技术宽度”，因为一个“领域”必然会涉及众多的技术面。
需要注意的是，拓展技术宽度并不意味着仅仅只是知道一个技术名词，而是要深入去理解每个技术的原理、优缺点以及应用场景。

4. 系统架构设计师（初级)

成长为初级架构设计师需要5~8年时间，其典型特征就是能够“独立完成一个系统的架构设计”，可以是从0到1设计一个新系统，也可以是将架构从1.0重构到2.0。

初级架构设计师负责的系统复杂度相对来说不高，例如后台管理系统、某个业务下的子系统等。

初级架构设计师和技术专家的典型区别是：初级架构设计师是基于完善的架构设计方法论的指导来进行架构设计，而技术专家更多的是基于经验进行架构设计。

简单来说，即使是同样一个方案，初级架构设计师能够清晰地阐述架构设计的理由和原因，而技术专家可能就是因为自己曾经这样做过或者看到别人这样做过而选择设计方案。但在实践工作中，技术专家和初级架构设计师的区别并不很明显，事实上很多技术专家其实就承担了初级架构设计师的角色，因为在系统复杂度相对不高的情况下，架构设计的难度不高，用不同的备选方案最终都能够较好地完成系统设计。
从技术专家成长为初级架构设计师，最主要的是形成自己的“架构设计方法论”。

形成自己的架构设计方法论的主要手段有：**系统学习架构设计方法论，包括订阅专栏或者阅读书籍等：**
深入研究成熟开源系统的架构设计；结合架构设计方法论，分析和总结自己团队甚至公司的各种系统的架构设计的优缺点，尝试思考架构的重构方案。

5. 系统架构设计师（中级)

成长为中级架构设计师需要8~10年以上时间，其典型特征是“能够完成复杂系统的架构设计”，包含高性能、高可用、可扩展、海量存储等复杂系统，例如设计一个总共100人参与开发的业务系统等。中级架构设计师与初级架构设计师的典型区别在于系统复杂度的不同，中级架构设计师面对的系统复杂度要高于初级架构设计师。

以开源项目为例，初级架构设计师可能引入某个开源项目就可以完成架构设计，而中级架构设计师可能发现其实没有哪个开源项目是合适的，而需要自己开发一个全新的项目，事实上很多开源项目就是这样诞生出来的。从初级架构设计师成长为中级架构设计师，最关键的是“技术深度和技术理论的积累”。

6. 系统架构设计师（高级）

成长为高级架构设计师需要10年以上时间，其典型特征是“创造新的架构模式”，例如：

谷歌的分布式存储架构、分布式计算MapReduce架构和列式存储架构等开创了大数据时代；

在虚拟机很成熟的背景下，Docker创造了容器化的技术潮流。

高级架构设计师与中级架构设计师相比，典型区别在于“创造性”，高级架构设计师能够创造新的架构模式，开创新的技术潮流。
总之，关于如何在专业领域内提升，有个著名的“10000小时定律”，简单来说要成为某个领域顶尖的专业人才，需要10000小时持续不断的练习，例如小提琴、足球、国际象棋、围棋等领域，无一例外都遵循这个定律，而技术人员的成长也基本遵循这个定律。

系统架构设计师的成长其实最关键的还是技术人员对技术的热情以及持续不断地投入，包括学习、实践、思考和总结等。

## 第2章 计算机系统基础知识

### 2.1计算机系统概述

计算机系统(Computer System)是指用于数据管理的计算机硬件、软件及网络组成的系统。

它是按人的要求接收和存储信息，自动进行数据处理和计算，并输出结果信息的机器系统。人们在谈及计算机系统时，一般指由**硬件子系统**和**软件子系统**组成的系统，简称为计算机。

而将连接多个计算机以实现计算机间数据交换能力的网络设备，则称之为计算机网络，简称网络。
计算机系统可划分为硬件（子系统）和软件（子系统)两部分。

硬件由机械、电子元器件、磁介质和光介质等物理实体构成，例如处理器（含运算单元和控制单元)、存储器、输入设备和输出设备等。

软件是一系列按照特定顺序组织的数据和指令，并控制硬件完成指定的功能。

可将计算机软件进一步分为系统软件和应用软件: 

**系统软件**是指支持应用软件的运行，为用户开发应用软件提供平台支撑的软件、

而**应用软件**是指计算机用户利用计算机的软、硬件资源为某一专门的应用目的而开发的软件。

典型的计算机系统组成。如图所示。

![image-20230209下午40105922](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230209%E4%B8%8B%E5%8D%8840105922.png)

**从存在形式**上看，计算机硬件是有形的，而软件是无形的：

**从计算机功能**来看，硬件与软件的界限正在逐渐模糊。在不同的应用场合，基于设计考虑，某些功能可能由硬件实现，也可能由软件实现。比如，较典型的可编程逻辑，它在设计阶段可作为软件对待，但运行中则是以逻辑门的物理形态而存在。

随着科技的发展，计算机系统的组成越来越复杂，多功能设备越来越多。
计算机系统的分类维度很多，也较为复杂，可以从**硬件的结构、性能、规模上划分**，亦可从**软件的构成、特征上划分**，或者从**系统的整体用途、服务对象等**进行分类。

这里结合计算机系统的构成特征、应用领域和用途等描述一种常见分类，如图所示。

![image-20230209下午44538556](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230209%E4%B8%8B%E5%8D%8844538556.png)

由于篇幅限制，在图2-2所示的分类中，各结点的具体内容此处不再一一列举说明。

由于技术的交叉和融合，同一设备可以具有多种特征，可以归属于不同的父分类，如电话手表、具
备通信功能的平板电脑、具备路由功能的电视盒等，故该分类并没有严格的界限，仅能够从主体功能进行大致分类。

### 2.2 计算机硬件
#### 2.2.1 计算机硬件组成

计算机组成结构(Computer Architecture)源于冯·诺依曼计算机结构，该结构成为现代计算机系统发展的基础。

冯·诺依曼计算机结构将计算机硬件划分为5部分，但在现实的硬件构成中，

控制单元和运算单元被集成为一体，封装为通常意义上的处理器（但处理器并不是只有上述两部分)；

输入设备和输出设备则经常被设计者集成为一体，按照传输过程被划分为总线、接口和外部设备。

下面按照处理器、存储器、总线、接口和外部设备进行阐述。

#### 2.2.2 处理器
**处理器(Central Processing Unit,,CPU)**作为计算机系统运算和控制的核心部件，经历了长期演化过程。

在位宽上由4位处理器发展到64位处理器：

在能力构成上从仅具有运算和控制功能发展到集成多级缓存、多种通信总线和接口：

在内核上从单核处理器发展为多核、异构多核和众核处理器等。

处理器的指令集按照其复杂程度可分为**复杂指令集(Complex Instruction Set Computers,**
**CISC)**与**精简指令集(Reduced Instruction Set Computers,RISC)**两类。

**CISC以Intel、.AMD的x86CPU为代表，RISC以ARM和Power为代表。**

随着研究的深入，除了由于历史原因而仍然存在的CISC结构外，RISC已经成为计算机指令集发展的趋势，几乎所有后期出现的指令集均为RISC架构。
典型的处理器系统结构如图2-3所示。

![image-20230209下午45017904](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230209%E4%B8%8B%E5%8D%8845017904.png)

在图2-3中，指令部件通过**MMU-Cache**的存储结构，从内存等存储设备中取得相应的软件代码指令并完成译码和控制操作，控制存取部件从存储设备中取得新的数据，控制寄存器组为运算器准备有关寄存器数据，并准备好结果寄存器，控制整型、浮点、向量等运算部件开展运算。运算部件、寄存器单元、存取部件将执行结果通知完成部件，并在完成部件中完成结果的排队，由完成部件向指令部件反馈执行结果，控制指令的顺序执行、跳转等时序。

随着微电子技术发展，用于专用目的处理器芯片不断涌现，常见的有图形处理器(Graphics Processing Unit,GPU)处理器、信号处理器(Digital Signal Processor,DSP)以及现场可编程逻辑门阵列(Field Programmable Gate Array,FPGA)等。

GPU是一种特殊类型的处理器，具有数百或数千个内核，经过优化可并行运行大量计算，因此近些年在深度学习和机器学习领域得到了广泛应用。DSP专用于实时的数字信号处理，通过采用饱和算法处理溢出问题，通过乘积累加运算提高矩阵运算的效率，以及为傅里叶变换设计专用指令等方法，在各类高速信号采集的设备中得到广泛应用。
随着我国国家政策的日益完善，国产处理器也呈现百花齐放的局面。在市场上占有率和知名度较高的包括龙芯、飞腾、申威、兆芯、国微、国芯、华睿、翔腾微和景嘉微等产品，各自在不同的行业领域中得到应用。

#### 2.2.3 存储器
存储器是利用半导体、磁、光等介质制成用于存储数据的电子设备。

根据存储器的硬件结构可分为SRAM、DRAM、NVRAM、Flash、EPROM、Disk等。

计算机系统中的存储器通常采用分层的体系(Memory Hierarchy)结构，按照与处理器的物理距离可分为4个层次。
**(1)片上缓存：**在处理器核心中直接集成的缓存，一般为SRAM结构，实现数据的快速读取。它容量较小，一般为16kB~512kB,按照不同的设计可能划分为一级或二级。
**(2)片外缓存：**在处理器核心外的缓存，需要经过交换互联开关访问，一般也是由SRAM构成，容量较片上缓存略大，可以为256kB~4MB。按照层级被称为L2 Cache或L3 Cache,或者称为平台Cache(PlatformCache)。
**(3)主存（内存）：**通常采用DRAM结构，以独立的部件/芯片存在，通过总线与处理器连接。

DRAM依赖不断充电维持其中的数据，容量在数百MB至数十GB之间。
**(4)外存：**可以是磁带、磁盘、光盘和各类Flsh等介质器件，这类设备访问速度慢，但容量大，且在掉电后能够保持其数据。

不同的介质类型容量有所不同，如Nor Flash容量一般在MB级别，磁盘容量则在GB和TB级别。

外存能够在掉电后保持数据，但并非所有介质都能够永久性保存数据，每种介质都有一定的年限，如Flash外存的维持数据的年限在10年左右，光盘年限在数年至数十年，磁盘年限在10年以上，磁带年限为30年以上。

#### 2.2.4 总线
**总线(Bus)**是指计算机部件间遵循某一特定协议实现数据交换的形式，即以一种特定格式按照规定的控制逻辑实现部件间的数据传输。
按照总线在计算机中所处的位置划分为**内总线**、**系统总线**和**外部总线**。

**内总线**用于各类芯片内部互连，也可称为片上总线(On-Chip Bus)或片内总线。

**系统总线**是指计算机中CPU、主存、I/O接口的总线，计算机发展为多总线结构后，系统总线的含义有所变化，**狭义的**系统总线仍为CPU与主存、通信桥连接的总线：广义上，还应包含计算机系统内，经由系统总线再次级联的总线，常被称为**局部总线(Local Bus)**。

**外部总线**是计算机板和外部设备之间，或者计算机系统之间互联的总线，**又称为通信总线**。总线之间通过桥(Bridge)实现连接，它是一种特殊的外设，主要实现总线协议间的转换。

总线的性能指标常见的有**总线带宽**、**总线服务**、**质量QoS**、**总线时延**和**总线抖动**等。
目前，计算机总线存在许多种类，常见的有**并行总线**和**串行总线**。

**并行总线**主要包括PCI、PCIe和ATA(IDE)等，**串行总线**主要包括USB、SATA、CAN、RS-232、RS-485、RapidIO和以太网等。

在一些专业领域中还定义了多种类型的总线，比如航空领域的ARNC429、ARINC659、ARINC664和MIL-STD-1553B等：工业控制领域的CAN、IEEE1394、PCI、PCIe和VME等。

#### 2.2.5 接口

**接口**是指同一计算机不同功能层之间的通信规则。

计算机接口有多种，常见的包括显示类接口(HDMI、DVI和DVI等)，音频输入输出类接口(TRS、RCA、XLR等)，网络类接口(RJ45、FC等)，PS/2接口，USB接口，SATA接口，LPT打印接口和RS-232接口等。

此外，像离散量接口与AD转换接口等这类接口一般属于非标准接口，而是随需求而设计。
对于总线而言，一种总线可能存在多种接口，比如，以太网总线可以通过RJ45或同轴电
缆与之连接，PCIe总线则具有多种形态的接口实现连接。

#### 2.2.6 外部设备
外部设备也称为外围设备，是计算机的非必要设备（但各类计算机必然会有一些）。

现代计算机的外部设备类日益丰富，包括所有的输入输出设备以及部分存储设备（即外存）。

常见的外部设备包括键盘、鼠标、显示器、扫描仪、摄像头、麦克风、打印机、光驱、各型网卡和各型存储卡/盘等。

在移动和穿戴设备中，常见的包括加速计、GPS、陀螺仪、感光设备和指纹识别设备等。在工业控制、航空航天和医疗等领域，还存在更多种类的外部设备，例如测温仪、测速仪、轨迹球、各型操作面板、红外FC等感应设备、各种场强测量设备、功率驱动装置、各型机械臂、各型液压装置、油门杆和驾驶杆，等等。
随着人们日益增长的物质需求，还会有更多形态各异、功能多样的外部设备产生。各型外部设备虽然种类多样，但都是通过接口实现与计算机主体的连接，并通过指令、数据实现预期的功能。

### 2.3 计算机软件
早期的**计算机软件**和**计算机程序(Computer Program)**的概念几乎不加区别，后来计算机软件的概念在计算机程序的基础上得到了延伸。

**计算机软件**是**指计算机系统中的程序及其文档，是计算任务的处理对象和处理规则的描述**。任何以计算机为处理工具的任务都是计算任务。处理对象是数据（如数字、文字、图形、图像和声音等，他们只是表示，而无含义）或信息（数据及有关的含义)。

处理规则一般指处理的动作和步骤，文档是为了便于了解程序所需的阐述性资料。

#### 2.3.1 计算机软件概述

**软件系统**是**指在计算机硬件系统上运行的程序、相关的文档资料和数据的集合。**计算机软件用来扩充计算机系统的功能，提高计算机系统的效率。

按照软件所起的作用和需要的运行环境的不同，通常将计算机软件分为**系统软件**和**应用软件**两大类。
**系统软件**是为整个计算机系统配置的不依赖特定应用领域的通用软件。这些软件对计算机系统的硬件和软件资源进行控制和管理，并为用户使用和其他应用软件的运行提供服务。也就是说，只有在系统软件的作用下，计算机硬件才能协调工作，应用软件才能运行。

**根据系统软件功能的不同**，可将其划分为：**操作系统、程序设计语言翻译系统、数据库管理系统和网络软件等。**
**应用软件**是**指为某类应用需要或解决某个特定问题而设计的软件**，如图形图像处理软件、财务软件、游戏软件和各种软件包等。在企事业单位或机构中，应用软件发挥着巨大的作用，承担了许多计算任务，如人事管理、财务管理和图书管理等。按照应用软件使用面的不同，可进一步把应用软件分为**专用的应用软件**和**通用的应用软件**两类。

#### 2.3.2 操作系统
**操作系统**是计算机系统的资源管理者，它包含对系统软、硬件资源实施管理的一组程序，其首要作用就是通过CPU管理、存储管理、设备管理和文件管理对各种资源进行合理地分配，改善资源的共享和利用程度，最大限度地发挥计算机系统的工作效率，提高计算机系统在单位时间内处理工作的能力。

操作系统是配置在计算机硬件上的第1层软件，它向下管理裸机及其中的文件，向上为其他的系统软件（汇编程序、编译程序、数据库管理系统等）和大量应用软件提供支持，以及为用户提供方便使用系统的接口。
1. 操作系统的组成

操作系统是一种大型、复杂的软件产品，它们通常由操作系统内核(Kernel)和其他许多附加的配套软件所组成，包括图形用户界面程序、常用的应用程序（如日历、计算器、资源管理器和网络浏览器等)、实用程序（任务管理器、磁盘清理程序、杀毒软件和防火墙等）以及为支持应用软件开发和运行的各种软件构件（如应用框架、编译器和程序库等）。
操作系统内核指的是能提供进程管理（任务管理）、存储管理、文件管理和设备管理等功能的那些软件模块，它们是操作系统中最基本的部分，用于为众多应用程序访问计算机硬件提供服务。由于应用程序直接对硬件操作非常复杂，所以操作系统内核对硬件设备进行了抽象，为应用软件提供了一套简洁、统一的接口（称为**系统调用接口**或**应用程序接口API)**。内核通常都驻留在内存中，它以CPU的最高优先级运行，能执行指令系统中的特权指令，具有直接访问各种外设和全部主存空间的特权，负责对系统资源进行管理和分配。

2. 操作系统的作用

操作系统主要有以下3个方面的重要作用。
**(1)管理计算机中运行的程序和分配各种软硬件资源**。

计算机中一般总有多个程序在运行，这些程序在运行时都可能要求使用系统中的资源（如访问硬盘，在屏幕上显示信息等），此时操作系统就承担着资源的调度和分配任务，以避免冲突，保证程序正常有序地运行。操作系统的资源管理功能主要包括处理器管理、存储管理、文件管理、I/O设备管理等几个方面。
**(2)为用户提供友善的人机界面。**

人机界面的任务是实现用户与计算机之间的通信（对话)。几乎所有操作系统都向用户提供图形用户界面(GUI),它通过多个窗口分别显示正在运行的各个程序的状态，采用图标(Icon)来形象地表示系统中的文件、程序和设备等对象，用户借助单击“菜单”的方法来选择要求系统执行的命令或输入某个参数，利用鼠标器或触摸屏控制屏幕光标的移动，并通过单击操作以启动某个操作命令的执行，甚至还可以采用拖放方式执行所需要的操作。这些措施使用户能够比较直观、灵活、有效地使用计算机。
**(3)为应用程序的开发和运行提供一个高效率的平台。**安装了操作系统之后，实际上呈现在应用程序和用户面前的是一台“虚拟计算机”。操作系统屏蔽了几乎所有物理设备的技术细节，它以规范、高效的方式（例如系统调用、库函数等）向应用程序提供了有力的支持，从而为开发和运行其他系统软件及各种应用软件提供了一个平台。
除了上述3个方面的作用之外，操作系统还具有辅导用户操作（帮助功能）、处理软硬件错误、监控系统性能、保护系统安全等许多作用。

总之，有了操作系统，计算机才能成为一个高效、可靠、通用的数据处理系统。

3. 操作系统的特征

**1)并发性**
在多道程序环境下，并发性是指在一段时间内，宏观上有多个程序同时运行，但实际上在单CPU的运行环境，每一个时刻只有一个程序在执行。因此，从微观上来说，各个程序是交替、轮流执行的，如果计算机系统中有多个CPU,则可将多个程序分配到不同CPU上实现并行运行。
**2)共享性**
共享是指操作系统中的资源（包括硬件资源和信息资源）可以被多个并发执行的进程（线程)共同使用，而不是被一个进程所独占。出于经济上的考虑，一次性向每个用户程序分别提供它所需的全部资源不但是浪费的，有时也是不可能的。现实的方法是让操作系统和多个用户程序共用一套计算机系统的所有资源，因此必然会产生共享资源的需要。**共享资源的方式**可以分为**同时共享**和**互斥共享**。
**3)虚拟性**
虚拟性是指操作系统中的一种管理技术，它是把物理上的一个实体变成逻辑上的多个对应物，或把物理上的多个实体变成逻辑上的一个对应物的技术。前者是实际存在的，而后者是虚构假想的，是用户感觉上的东西。采用虚拟技术的目的是为用户提供易于使用且方便高效的操作环境。
**4)不确定性**
在多道程序环境中，允许多个进程并发执行，但由于资源有限，在多数情况下进程的执行不是一贯到底的，而是“走走停停”。例如一个进程，在CPU上运行一段时间后，由于等待资源或某事件发生，它被暂停执行，将CPU转让给另一个进程执行。系统中的进程何时执行，何时暂停，以什么样的速度向前推进，进程总共要花多少时间执行才能完成，这些都是不可预知的。或者说该进程是以不确定的方式运行的，其导致的直接后果是程序执行结果可能不唯一。

4. 操作系统的分类

通常，操作系统可分为**批处理操作系统**、分时操作系统、**实时操作系统**、网络操作系统、**分布式操作系统**、**微型计算机操作系统**和嵌入式操作系统等类型。
**1)批处理操作系统**
批处理操作系统分为单道批处理和多道批处理。
单道批处理操作系统是一种早期的操作系统，用户可以向系统提交多个作业，“单道”的含义是指一次只有一个作业装入内存执行。作业由**用户程序、数据和作业说明书（作业控制语言）**3个部分组成。当一个作业运行结束后，随即自动调入同批的下一个作业，从而节省了作业之间的人工干预时间，提高了资源的利用率。
**多道批处理操作系统**允许多个作业装入内存执行，在任意一个时刻，作业都处于开始点和终止点之间。每当运行中的一个作业由于输入/输出操作需要调用外部设备时，就把CPU交给另一个等待运行的作业，从而将主机与外部设备的工作由串行改变为并行，进一步避免了因主机等待外设完成任务而浪费宝贵的CPU时间。

多道批处理系统主要有3个特点：**多道**、**宏观上并行运行**和**微观上串行运行**。
**2)分时操作系统**
在分时操作系统中，一个计算机系统与多个终端设备连接。分时操作系统是将CPU的工作时间划分为许多很短的时间片，轮流为各个终端的用户服务。

例如，一个带20个终端的分时系统，若每个用户每次分配一个50s的时间片，则每隔1s即可为所有的用户服务一遍。因此，尽管各个终端上的作业是断续运行的，但由于操作系统每次对用户程序都能做出及时响应，因此用户感觉整个系统均归其一人占用。
**分时系统主要有4个特点：多路性、独立性、交互性和及时性。**

3)实时操作系统
**实时是指计算机对于外来信息能够以足够快的速度进行处理，并在被控对象允许的时间范围内做出快速反应。**

实时系统对交互能力要求不高，但要求可靠性有保障。
实时系统分为**实时控制系统**和**实时信息处理系统**。

**实时控制系统**主要用于生产过程的自动控制，例如数据自动采集、武器控制、火炮自动控制、飞机自动驾驶和导弹的制导系统等。

**实时信息处理系统**主要用于实时信息处理，例如飞机订票系统、情报检索系统等。
4)网络操作系统
**网络操作系统是使联网计算机能方便而有效地共享网络资源，为网络用户提供各种服务的软件和有关协议的集合。**

因此，网络操作系统的功能主要包括**高效、可靠的网络通信**：

**对网络中共享资源（在LAN中有硬盘、打印机等）的有效管理**：

**提供电子邮件、文件传输、共享硬盘和打印机等服务**：

**网络安全管理**；

**提供互操作能力**。
一个典型的网络操作系统的特征包括**硬件独立性**和**多用户支持**等。其中：

**硬件独立性**是指网络操作系统可以运行在不同的网络硬件上，可以通过网桥或路由器与其他网络连接：

**多用户支持**，应能同时支持多个用户对网络的访问，应对信息资源提供完全的安全和保护功能；

**支持网络实用程序及其管理**功能，如系统备份、安全管理、容错和性能控制：

**多种客户端支持**：提供目录服务，以单一逻辑的方式让用户访问位于世界范围内的所有网络服务和资源的技术：

**支持多种增值服务**，如文件服务、打印服务、通信服务和数据库服务等。

5)分布式操作系统

**分布式计算机系统**是由多个分散的计算机经连接而成的计算机系统，系统中的计算机无主、次之分，任意两台计算机可以通过通信交换信息。通常，为分布式计算机系统配置的操作系统称为分布式操作系统。
分布式操作系统能直接对系统中的各类资源进行动态分配和调度、任务划分、信息传输协调工作，并为用户提供一个统一的界面与标准的接口，用户通过这一界面实现所需要的操作和使用系统资源，使系统中若干台计算机相互协作完成共同的任务，有效地控制和协调诸任务的并行执行。
分布式操作系统是网络操作系统的更高级形式，它保持网络系统所拥有的全部功能，同时**又有透明性、可靠性和高性能**等特性。

6)微型计算机操作系统

微型计算机操作系统简称微机操作系统，常用的有Windows、Mac OS、Linux。

7)嵌入式操作系统

嵌入式操作系统运行在嵌入式智能设备环境中，对整个智能硬件以及它所操作、控制的各种部件装置等资源进行统一协调、处理、指挥和控制，其主要特点如下。

* 微型化：从性能和成本角度考虑，希望占用的资源和系统代码量少，如内存少、字长短、运行速度有限、能源少（用微小型电池）。
* 可定制：从减少成本和缩短研发周期考虑，要求嵌入式操作系统能运行在不同的微处理器平台上，能针对硬件变化进行结构与功能上的配置，以满足不同应用需要。
* 实时性：嵌入式操作系统主要应用于过程控制、数据采集、传输通信、多媒体信息及关键要害领域需要迅速响应的场合，所以对实时性要求较高。
* 可靠性：系统构件、模块和体系结构必须达到应有的可靠性，对关键要害应用还要提供容错和防故障措施。
* 易移植性：为了提高系统的易移植性，通常采用硬件抽象层(Hardware Abstraction Level,HAL)和板级支撑包(Board Support Package,BSP)的底层设计技术。

常见的嵌入式实时操作系统有Vx Works、.μClinux、PalmOS、WindowsCE、μC/OS-II和eCos等。

#### 2.3.3 数据库

在信息处理领域，由于数据量庞大，如何有效组织、存储数据对实现高效率的信息处理至关重要。数据库技术是目前最有效的数据管理技术。

数据库(DataBase,DB)是指长期存储在计算机内、有组织的、统一管理的相关数据的集合。它不仅描述事物的数据本身，而且还包括相关事物之间的联系。数据库可以直观地理解为存放数据的仓库，只不过这个仓库是在计算机的存储设备上，而且数据是按一定格式存放的，具有较小的冗余度、较高的数据独立性和易扩展性，可为多个用户共享。
早期数据库种类有3种，分别是**层次式数据库**、**网络式数据库**和**关系型数据库**。

目前最常见的数据库种类是**关系型数据库**和**非关系型数据库**。

根据数据库存储体系分类，还可分为**关系型数据库**、**键值(Key-Value)数据库**、**列存储数据库**、**文档数据库**和**搜索引擎数据库**等类型。
**(1)关系型数据库**。

这种类型的数据库是最传统的数据库类型，关系型数据库模型是把复杂的数据结构归结为简单的二元关系，在数据库中，对数据的操作几乎全部建立在一个或多个关系表格上。在大型系统中通常有多个表，且表之间有各种关系。实际使用就是通过对这些关联的表格进行分类、合并、连接或选取等运算来实现数据库的管理。

**(2)键值数据库。**

键值数据库是一种非关系型数据库，它使用简单的键值方法来存储数据。键值数据库将数据存储为键值对集合，其中键作为唯一标识符。

**(3)列存储数据库。**

列式存储(Column-Based)是相对于传统关系型数据库的行式存储(Row-Basedstorage)来说的。简单来说两者的区别就是对表中数据的存储形式的差异。

**(4)文档数据库。**

此类数据库可存放并获取文档，可以是XML、JSON、BSON等格式，这些文档具备可述性(Self-Describing),呈现分层的树状结构(Hierarchical Tree Data Structure),可以包含映射表、集合和纯量值。

数据库中的文档彼此相似，但不必完全相同。文档数据库所存放的文档，就相当于键值数据库所存放的“值”。文档数据库可视为其值可查的键值数据库。

**(5)搜索引擎数据库。**

搜索引擎数据库是应用在搜索引擎领域的数据存储形式，由于搜索引擎会爬取大量的数据，并以特定的格式进行存储，这样在检索的时候才能保证性能最优。
下面简要介绍常用的关系数据库和分布式数据库。

1. 关系数据库

数据模型是数据特征的抽象，它是对数据库组织方式的一种模型化表示，是数据库系统的核心与基础。它具有**数据结构、数据操作和完整性约束**条件三要素。
**关系**可以理解为二维表。一个关系模型就是指用若干关系表示实体及其联系，用二维表的形式存储数据。

例如，对某高校学生的选课（不同年级甚至同一年级学生所选课程可以不同）进行管理，可以用二维表表示，如图2-4所示。

![image-20230210下午23124823](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230210%E4%B8%8B%E5%8D%8823124823.png)

用关系表示如下，其中带下画线的属性为主码，主码能唯一确定某个实体，如学号能唯一
确定某个学生。

学生（<u>学号</u>，姓名，年龄，系别）
课程（<u>课程号</u>，课程名，学分）
选课（<u>学号</u>，<u>课程号</u>，分数）

**1)关系数据库设计的特点及方法**

数据库设计是指对于一个给定的应用环境构造最优的数据库，建立数据库及其应用系统，使之能有效地存储数据，满足各种用户的需求。数据库设计包括**结构特性**和**行为特性**的设计两方面的内容。
数据库设计的很多阶段都可以和软件工程的各阶段对应起来。

数据库设计的特点有：

> 从数据结构即数据模型开始，并以数据模型为核心展开，这是数据库设计的一个主要特点；

> 静态结构设计与动态行为设计分离：

> 试探性：反复性和多步性。

目前已有的数据库设计方法可分为4类，即**直观设计法**、**规范设计法**、**计算机辅助设计法**和**自动化设计法**。

常用的有基于**3NF的设计方法**、基于**实体联系(ER)模型的数据库设计方法**、基于**视图概念的数据库设计方法**、**面向对象的关系数据库设计方法**、**计算机辅助数据库设计方法**、**敏捷数据库设计方法**等。

**2)关系数据库设计的基本步骤**
数据库设计分为**需求分析、概念结构设计、逻辑结构设计、物理结构设计、应用程序设计和运行维护6个阶段**，如图2-5所示。

![image-20230210下午24115390](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230210%E4%B8%8B%E5%8D%8824115390.png)

**需求分析阶段**的任务是对现实世界要处理的对象（组织、部门和企业等）进行详细调查，在了解现行系统的概况和确定新系统功能的过程中，收集支持系统目标的基础数据及其处理方法。需求分析是在用户调查的基础上，通过分析逐步明确用户对系统的需求，包括数据需求和围绕这些数据的业务处理需求。
**数据库概念结构设计**是在需求分析的基础上，依照需求分析中的信息需求，对用户信息加以分类、聚集和概括，建立信息模型，并依照选定的数据库管理系统软件，把它们转换为数据的逻辑结构，再依照软硬件环境，最终实现数据的合理存储。这一过程也称为数据建模。
**设计数据库概念模型**的最著名、最常用的方法是ER方法。采用E-R方法的数据库概念结构设计可分为三步：**设计局部E-R模型、设计全局E-R模型以及全局ER模型的优化**。
**逻辑结构设计**是在概念结构设计基础上进行的数据模型设计，可以是**层次**、**网状模型**和**关系模型**。逻辑结构设计阶段的主要任务是确定数据模型，将ER图转换为指定的数据模型，确定完整性约束，确定用户视图。
**数据库在物理设备上的存储结构与存取方法**称为数据库的物理结构。数据库的物理结构设计是对已确定的数据库逻辑结构，利用DBMS(数据库管理系统(Database Management System)所提供的方法、技术，以较优的存储结构和数据存取路径、合理的数据存放位置以及存储分配，设计出一个高效的、可实现的数据库物理结构。
数据库应用系统开发是DBMS的二次开发，**一方面是对用户信息的存储：** **另一方面就是对用户处理要求的实现。**
数据库应用程序设计要做的工作有，**选择设计方法**、**制订开发计划**、**选择系统架构和设计安全性策略**。

在应用程序设计阶段，设计方法有**结构化设计方法**和**面向对象设计方法**两种。

安全性策略主要是指硬件平台、操作系统、数据库系统、网络及应用系统的安全。
数据库的正常运行和优化也是数据库设计的内容之一。

在数据库运行维护阶段要做的工作主要有**数据库的转储和恢复**，**数据库的安全性和完整性控制**，**数据库性能的监督**、**分析和改造**，**数据库的重组和重构**等。

2. 分布式数据库

分布式数据库系统(Distributed DataBase System,DDBS)是针对地理上分散，而管理上又需要不同程度集中管理的需求而提出的一种数据管理信息系统。满足**分布性、逻辑相关性、场地透明性和场地自治性**的数据库系统被称为完全分布式数据库系统。
分布式数据库系统的特点是**数据的集中控制性、数据独立性、数据冗余可控性、场地自治性和存取的有效性。**
**1)分布式数据库体系结构**
我国在多年研究与开发分布式数据库及制定《分布式数据库系统标准》中，提出了把分布式数据库抽象为4层的结构模式，如图2-6所示。这种结构模式得到了国内外一定程度的支持和认同。

![image-20230210下午44334470](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230210%E4%B8%8B%E5%8D%8844334470.png)

4层模式划分为**全局外层、全局概念层、局部概念层和局部内层**，在各层间还有相应的层间映射。这种4层模式适用于同构型分布式数据库系统，也适用于异构型分布式数据库系统。

**2)分布式数据库的应用**

分布式数据库的应用领域有**分布式计算、Internet.应用、数据仓库、数据复制以及全球联网**
**查询等**，Sybase公司的Replication Server即是一种典型的分布式数据库系统。

3. 常用数据库管理系统

计算机科学技术不断发展，数据库管理系统也不断发展进化，MySQL AB公司(2009年被Oracle公司收购)的MySQL、Microsoft公司的Access等是小型关系数据库管理系统的代表，
Oracle公司的Oracle、Microsoft公司的SQL Server、IBM公司的DB2等是功能强大的大型关系数据库管理系统的代表。
**1)Oracle**
Oracle是一种适用于大型、中型和微型计算机的**关系数据库管理系统。**Oracle的结构包括数据库的内部结构、外存储结构、内存储结构和进程结构。在Oracle中，数据库不仅指物理上的数据，还包括处理这些数据的程序，即DBMS本身。Oracle使用PL/SQL(Procedural Language/SQL)语言执行各种操作。Oracle除了以关系格式存储数据外，Oracle8以上的版本还支持面向对象的结构（如抽象数据类型）。
Oracle产品主要包括数据库服务器、开发工具和连接产品三类。Oracle还提供了一系列的工具产品，如逻辑备份工具Export、Import等。
**2)IBM DB2**
DB2是IBM的一种分布式数据库解决方案。简单地说，DB2就是IBM开发的一种大型**关系型数据库**平台，它支持多用户或应用程序在同一条SQL语句中查询不同Database甚至不同DBMS中的数据。
DB2核心数据库的特色有支持面向对象编程，支持多媒体应用程序，支持备份和恢复功能，支持存储过程和触发器，支持SQL查询，支持异构分布式数据库访问，支持数据复制。
DB2采用多进程多线索体系结构，可运行于多种操作系统之上。IBM还提供了Visualizer、
Visualage、Visualgen等开发工具。

**3)Sybase**
Sybase是美国SYBASE公司在20世纪80年代中期推出的**客户机/服务器(Client/Server,C/S)结构的关系**数据库系统，也是世界上第一个真正的基于客户机/服务器结构的RDBMS产品。

Sybase数据库主要由三部分组成：进行数据库管理和维护的联机关系数据库管理系统Sybase SQLServer，支持数据库应用系统建立与开发的一组前端工具Sybase SQLToolset,.可把异构环境下其他厂商的应用软件和任何类型的数据连接在一起的接口Sybase OpenClient/OpenServer Sybase提供了Sybase Adaptive Server Enterprise高性能企业智能型关系数据库管理系统、EAServer电子商务解决方案应用服务器、系统分析设计工具PowerDesigner和应用开发工具PowerBuilder
**4 )Microsoft SQL Server**
Microsoft SQL Server是一种典型的**关系型数据库管理系统**，可运行于多个操作系统上，它使用Transact-SQL语言完成数据操作。

SQL Server的基本服务器组件包括Open Data Services、MS SQL Server、SQL Server Agent
MSDTC (Microsoft Distributed Transaction Coordinator).
SQL Server数据平台包括以下工具：**关系型数据库、复制服务、通知服务、集成服务、分析服务、报表服务、管理工具和开发工具。**

4. 大型数据库管理系统的特点

大型数据库管理系统主要有如下7个特点。
**(1)基于网络环境的数据库管理系统。**

可以用于C/S结构的数据库应用系统，也可以用于B/S结构的数据库应用系统。

**(2)支持大规模的应用。**

可支持数千个并发用户、多达上百万的事务处理和超过数百GB的数据容量。
**(3)提供的自动锁功能使得并发用户可以安全而高效地访问数据。**
**(4)可以保证系统的高度安全性。**
**(5)提供方便而灵活的数据备份和恢复方法及设备镜像功能，还可以利用操作系统提供容错功能，确保设计良好的应用中的数据在发生意外的情况下可以最大限度地被恢复。**
**(6)提供多种维护数据完整性的手段。**
**(7)提供了方便易用的分布式处理功能。**

#### 2.3.4 文件系统
1. 文件与文件系统

文件(Fle)是具有符号名的、在逻辑上具有完整意义的一组相关信息项的集合，

例如，一个源程序、一个目标程序、编译程序、一批待加工的数据和各种文档等都可以各自组成一个文件。

文件是一种抽象机制，它隐藏了硬件和实现细节，提供了将信息保存在外存上而且便于以后读取的手段，使用户不必了解信息存储的方法、位置以及存储设备实际操作方式便可存取信息。

一个**文件**包括**文件体**和**文件说明**。

文件体是文件真实的内容：

文件说明是操作系统为了管理文件所用到的信息，包括文件名、文件内部标识、文件类型、文件存储地址、文件长度、访问权限、建立时间和访问时间等。

**文件系统**是操作系统中实现文件统一管理的一组软件和相关数据的集合，是专门负责管理和存取文件信息的软件机构。

文件系统的功能包括按名存取，即用户可以“按名存取”，而不是“按地址存取”：

**统一的用户接口**，在不同设备上提供同样的接口，方便用户操作和编程；

**并发访问和控制**，在多道程序系统中支持对文件的并发访问和控制：

**安全性控制**，在多用户系统中的不同用户对同一文件可有不同的访问权限：

**优化性能**，采用相关技术提高系统对文件的存储效率、检索和读/写性能：

**差错恢复**，能够验证文件的正确性，并具有一定的差错恢复能力。

2. 文件的类型

(1)按**文件的性质和用途**分类可将文件分为**系统文件、库文件和用户文件**。
(2)按**信息保存期限分类**可将文件分为**临时文件**、**档案文件**和**永久文件**。
(3)按**文件的保护方式分类**可将文件分为**只读文件、读/写文件、可执行文件和不保护文件**。
(4)**UNIX系统将文件**分为**普通文件、目录文件和设备文件（特殊文件）**。

目前常用的文件系统类型有FAT、VFAT、NTFS、Ext2和HPFS等。
**文件分类的目的**是对**不同文件进行管理，提高系统效率，提高用户界面友好性。**

当然，根据文件的存取方法和物理结构的不同，还可以将文件分为不同的类型。

3. 文件的结构和组织

**文件的结构**是指文件的组织形式。

从用户角度看到的文件组织形式称为文件的逻辑结构，文件系统的用户只要知道所需文件的文件名就可以存取文件中的信息，而无须知道这些文件究竟存放在什么地方。

从实现的角度看，文件在文件存储器上的存放方式称为文件的物理结构。

**1)文件的逻辑结构**

文件的逻辑结构可分为两大类：

**一是有结构的记录式文件**，它是由一个以上的记录构成的文件：

**二是无结构的流式文件**，它是由一串顺序字符流构成的文件。

在记录式文件中，所有的记录通常都是描述一个实体集的，有着相同或不同数目的数据项，记录的长度可分为定长（指文件中所有记录的长度相同）和不定长（指文件中各记录的长度不相同)两类。

**无结构的流式文件**的**文件体**为**字节流**，不划分记录。

无结构的流式文件通常采用顺序访问方式，并且每次读/写访问可以指定任意数据长度，其长度以字节为单位。

对于流式文件的访问，是利用读/写指针指出下一个要访问的字符。可以把流式文件看作是记录式文件的一个特例。

**2)文件的物理结构**

**文件的物理结构**是指**文件的内部组织形式**，即文件在物理存储设备上的存放方法。由于文件的物理结构决定了文件在存储设备上的存放位置，所以文件的逻辑块号到物理块号的转换也是由文件的物理结构决定的。

根据用户和系统管理上的需要，可采用多种方法来组织文件，下面介绍几种常见的文件物理结构。

**(1)连续结构。**
连续结构也称顺序结构，它将逻辑上连续的文件信息（如记录）依次存放在连续编号的物理块上。只要知道文件的起始物理块号和文件的长度，就可以很方便地进行文件的存取。

**(2)链接结构。**
链接结构也称串联结构，它是将逻辑上连续的文件信息（如记录）存放在不连续的物理块上，每个物理块设有一个指针指向下一个物理块。因此，只要知道文件的第1个物理块号，就可以按链指针查找整个文件。

**(3)索引结构。**
在采用索引结构时，将逻辑上连续的文件信息（如记录）存放在不连续的物理块中，系统为每个文件建立一张索引表。索引表记录了文件信息所在的逻辑块号对应的物理块号，并将索引表的起始地址放在与文件对应的文件目录项中。

**(4)多个物理块的索引表。**
索引表是在文件创建时由系统自动建立的，并与文件一起存放在同一文件卷上。根据一个文件大小的不同，其索引表占用物理块的个数不等，一般占一个或几个物理块。多个物理块的索引表可以有两种组织方式：**链接文件**和**多重索引方式**。

4. 文件存取的方法和存储空间的管理

**1)文件的存取方法**
文件的存取方法是指读/写文件存储器上的一个物理块的方法。通常有**顺序存取**和**随机存取**两种方法。

**顺序存取方法**是指对文件中的信息按顺序依次进行读/写：

**随机存取方法**是指对文件中的信息可以按任意的次序随机地读/写。

**2)文件存储空间的管理**

要将文件保存到外部存储器（简称外存或辅存）上，首先必须知道存储空间的使用情况，即哪些物理块是被“占用”的，哪些是“空闲”的。特别是对大容量的磁盘存储空间被多用户共享时，用户执行程序经常要在磁盘上存储文件和删除文件，因此，文件系统必须对磁盘空间进行管理。

**外存空闲空间管理的数据结构通常称为磁盘分配表(Disk Allocation Table)**。常用的空闲空间管理方法**有空闲区表、位示图和空闲块链**3种。

**(1)空闲区表。**

将外存空间上的一个连续的未分配区域称为“空闲区”。操作系统为磁盘外存上的所有空闲区建立一张空闲表，每个表项对应一个空闲区，空闲表中包含序号、空闲区的第1块号、空闲块的块数和状态等信息，如表2-1所示。它适用于连续文件结构。

![image-20230210下午52610154](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230210%E4%B8%8B%E5%8D%8852610154.png)

**(2)位示图。**

这种方法是在外存上建立一张位示图(Bitmap),记录文件存储器的使用情况。每一位对应文件存储器上的一个物理块，取值0和1分别表示空闲和占用。

例如，某文件存储器上位示图的大小为 n，物理块依次编号为0,1,2，…。假如计算机系统中字长为
32位，那么在位示图中的第0个字（逻辑编号）对应文件存储器上的0,1,2，…，31号物理块：第1个字对应文件存储器上的32,33,34，…，63号物理块，依此类推，如图2-7所示。

![image-20230210下午52814087](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230210%E4%B8%8B%E5%8D%8852814087.png)

这种方法的主要特点是位示图的大小由磁盘空间的大小（物理块总数）决定，位示图的描述能力强，适合各种物理结构。

**(3)空闲块链。**

每个空闲物理块中有指向下一个空闲物理块的指针，所有空闲物理块构成一个链表，链表的头指针放在文件存储器的特定位置上（如管理块中），不需要磁盘分配表，节省空间。每次申请空闲物理块只需根据链表的头指针取出第1个空闲物理块，根据第一个空闲物理块的指针可找到第2个空闲物理块，依此类推。
**(4)成组链接法。**

UNIX系统采用该方法。例如，在实现时系统将空闲块分成若干组，每100个空闲块为一组，每组的第1个空闲块登记了下一组空闲块的物理盘块号和空闲块总数。
假如某个组的第1个空闲块号等于0，意味着该组是最后一组，无下一组空闲块。

**1)文件的共享**

文件共享是指不同用户进程使用同一文件，它不仅是不同用户完成同一任务所必须的功能，还可以节省大量的主存空间，减少由于文件复制而增加的访问外存次数。

文件共享有多种形式，采用文件名和文件说明分离的目录结构有利于实现文件共享。

常见的文件链接有**硬链接**和**符号链接**两种。

**(1)硬链接。**

文件的硬链接是指两个文件目录表目指向同一个索引结点的链接，该链接也称基于索引结点的链接。

换句话说，硬链接是指不同文件名与同一个文件实体的链接。文件硬链接不利于文件主删除它拥有的文件，因为文件主要删除它拥有的共享文件，必须首先删除(关闭)所有的硬链接，否则就会造成共享该文件的用户的目录表目指针悬空。

**(2)符号链接。**

符号链接建立新的文件或目录，并与原来文件或目录的路径名进行映射，当访问一个符号链接时，系统通过该映射找到原文件的路径，并对其进行访问。

采用符号链接可以跨越文件系统，甚至可以通过计算机网络连接到世界上任何地方的机器中的文件，此时只须提供该文件所在的地址以及在该机器中的文件路径。

> PS：各类网盘的实现：

**2)文件的保护**

文件系统对文件的保护常采用**存取控制**的方式进行。

所谓存取控制，就是规定不同的用户对文件的访问有不同的权限，以防止文件被未经文件主同意的用户访问。

**(1)存取控制矩阵。**

理论上，存取控制的方法可用存取控制矩阵实现，它是一个二维矩阵，一维列出计算机的全部用户，另一维列出系统中的全部文件，矩阵中的每个元素A表示第i个用户对第个文件的存取权限。

通常，存取权限有可读R、可写W、可执行X以及它们的组合，如表2-2所示。

![image-20230210下午54611031](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230210%E4%B8%8B%E5%8D%8854611031.png)

![image-20230210下午54637991](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230210%E4%B8%8B%E5%8D%8854637991.png)

**(2)存取控制表。**

存取控制矩阵由于太大往往无法实现。一个改进的办法是按用户对文件的访问权力的差别对用户进行分类，由于某一文件往往只与少数几个用户有关，所以这种分类方法可使存取控制表简化。

UNX系统就是使用了这种存取控制表方法，它把用户分成三类：**文件主、同组用户和其他用户**，每类用户的存取权限为可读、可写、可执行以及它们的组合。

**(3)用户权限表。**

改进存取控制矩阵的另一种方法是以用户或用户组为单位将用户可存取的文件集中起来存入表中，这称为用户权限表。表中的每个表目表示该用户对应文件的存取权限，这相当于存取控制矩阵一行的简化。

**(4)密码。**

在创建文件时，由用户提供一个密码，在文件存入磁盘时用该密码对文件的内容加密。在进行读取操作时，要对文件进行解密，只有知道密码的用户才能读取文件。

#### 2.3.5 网络协议

在计算机网络中要实现资源共享以及信息交换，必须实现不同系统中实体的通信。两个实体要想成功通信，它们必须具有相同的语言，在计算机网络中称为协议（或规程）。所谓协议，指的是网络中的计算机与计算机进行通信时，为了能够实现数据的正常发送与接收必须要遵循的一些事先约定好的规则（标准或约定），在这些规程中明确规定了通信时的数据格式、数据传送时序以及相应的控制信息和应答信号等内容。
常用的网络协议包括**局域网协议(LAN)**、**广域网协议(WAN)**、**无线网协议和移动网协议**。

互联网使是TCP/IP协议簇。

#### 2.3.6 中间件

由于应用软件是在系统软件基础上开发和运行的，而系统软件又有多种，如果每种应用软件都要提供能在不同系统上运行的版本，开发成本将大大增加。

因而出现了一类称为“中间件”(Middleware)的软件，它们作为应用软件与各种操作系统之间使用的标准化编程接口和协议，可以起承上启下的作用，使应用软件的开发相对独立于计算机硬件和操作系统，并能在不同的系统上运行，实现相同的应用功能。

中间件是基础软件的一大类，属于可复用软件的范畴。

顾名思义，中间件处在操作系统、网络和数据库之上，应用软件的下层，如图2-8所示。也有人认为中间件应该属于操作系统中的一部分。

![image-20230213下午22851600](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230213%E4%B8%8B%E5%8D%8822851600.png)

1. 中间件分类

按照中间件在分布式系统中承担的职责不同，可以划分以下几类中间件产品。
**1)通信处理（消息）中间件**
正如，人们通过安装红绿灯，设立交通管理机构，制定出交通规则，才能保证道路交通畅通一样，在分布式系统中，人们要建网和制定出通信协议，以保证系统能在不同平台之间通信，实现分布式系统中可靠的、高效的、实时的跨平台数据传输，这类中间件称为消息中间件，也是市面上销售额最大的中间件产品，目前主要产品有BEA的eLink、IBM的MQSeries、TongLINK等。实际上，一般的网络操作系统如Windows已包含了其部分功能。
**2)事务处理（交易）中间件**
正如城市交通中要运行各种运载汽车，以此来完成日常的运载工作，同时随时监视汽车的运行，在出现故障时及时排堵保畅。在分布式事务处理系统中，经常要处理大量事务，特别是OLTP中，每项事务常常要多台服务器上的程序按顺序协调完成，一旦中间发生某种故障，不但要完成恢复工作，而且要自动切换系统保证系统永不停机，实现高可靠性运行。要使大量事务在多台应用服务器上能实时并发运行，并进行负载平衡的调度，实现与昂贵的可靠性机和大型计算机系统的同等功能，为了实现这个目标，要求中间件系统具有监视和调度整个系统的功能。BEA的Tuxedo由此而闻名，它成为增长率最高的厂商。
**3)数据存取管理中间件**
在分布式系统中，重要的数据都集中存放在数据服务器中，它们可以是关系型的、复合文档型、具有各种存放格式的多媒体型，或者是经过加密或压缩存放的，该中间件将为在网络上**虚拟缓冲存取、格式转换、解压**等带来方便。
**4)Web服务器中间件**
浏览器图形用户界面已成为公认规范，然而它的会话能力差，不擅长做数据的写入任务，受HTTP协议的限制多等，就必须对其进行修改和扩充，因此出现了Wb服务器中间件，如SilverStream公司的产品。
**5)安全中间件**
一些军事、政府和商务部门上网的最大障碍是安全保密问题，而且不能使用国外提供的安全措施（如防火墙、加密和认证等），必须用国产产品。产生不安全因素是由操作系统引起的，但必须要用中间件去解决，以适应灵活多变的要求。

**6)跨平台和架构的中间件**
当前开发大型应用软件通常采用基于架构和构件技术，在分布式系统中，还需要集成各结点上的不同系统平台上的构件或新老版本的构件，由此产生了架构中间件。

功能最强的是**CORBA**,可以跨任意平台，但是其过于庞大：

JavaBeans较灵活简单，很适合用于浏览器，但运行效率有待改善：

COM+模型主要适合Windows平台，已在桌面系统广泛使用。

由于国内新建系统多基于UNIX(包括Linux)和Windows,因此，针对这两个平台建立相应的中间件市场相对要大得多。

**7)专用平台中间件**
专用平台中间件为**特定应用领域设计**，**领域参考模式**，建立相应架构，配置相应的构件库和中间件，为应用服务器开发和运行特定领域的关键任务（如电子商务、网站等）。
**8)网络中间件**
它包括网管、接入、网络测试、虚拟社区和虚拟缓冲等，也是当前最热门的研发项目。

2. 中间件产品介绍

主流的中间件产品有IBM MQSeries和BEA Tuxedo。
**1)IBM MQSeries**
IBM公司的MQSeries是IBM的消息处理中间件。MQSeries提供一个具有工业标准、安全、可靠的消息传输系统，它用于控制和管理一个集成的系统，使得组成这个系统的多个分支应用(模块)之间通过传递消息完成整个工作流程。

MQSeries基本由一个信息传输系统和一个应用程序接口组成，其资源是消息和队列。MQSeries的关键功能之一是确保信息的可靠传输，即使在网络通信不可靠或出现异常时也能保证信息的传输。

MOSeries的异步消息处理技术能够保证当网络或者通信应用程序本身处于“忙”状态或发生故障时，系统之间的信息不会丢失，也不会阻塞。这样的可靠性是非常关键的，否则大量的金钱和客户信誉就会面临极大的损害。
同时，MQSeries是灵活的应用程序通信方案。MQSeries支持所有的主要计算平台和通信模式，也能够支持先进的技术（如Internet和Java),拥有连接至主要产品（如LotusNotes和SAP/R3等)的接口。
**2)BEA Tuxedo**
BEA公司的Tuxedo作为电子商务交易平台，属于交易中间件。它允许客户机和服务器参与一个涉及多个数据库协调更新的交易，并能够确保数据的完整性。BEA Tuxedo一个特色功能是能够保证对电子商务应用系统的不间断访问。它可以对系统构件进行持续的监视，查看是否有应用系统、交易、网络及硬件的故障。一旦出现故障，BEA Tuxedo会从逻辑上把故障构件排除，然后进行必要的恢复性步骤。
BEA Tuxedo根据系统的负载指示，自动开启和关闭应用服务，可以均衡所有可用系统的负载，以满足对应用系统的高强度使用需求。借助DDR(数据依赖路由)，BEA Tuxedo可按照消息的上下文来选择消息路由。其交易队列功能，可使分布式应用系统以异步“少连接”方式协同工作。

BEA Tuxedo的LLE安全机制可确保用户数据的保密性，应用/交易管理接口为50多种硬件平台和操作系统提供了一致的应用编程接口。BEA Tuxedo基于网络的图形界面管理可以简化对电子商务的管理，为建立和部署电子商务应用系统提供了端到端的电子商务交易平台。

#### 2.3.7 软件构件
构件又称为组件，是一个自包容、可复用的程序集。

构件是一个程序集，或者说是一组程序的集合。这个集合可能会以各种方式体现出来，如源程序或二进制的代码。这个集合整体向外提供统一的访问接口，构件外部只能通过接口来访问构件，而不能直接操作构件的内部。

构件的两个最重要的特性是**自包容**与**可重用**。

1. 软件构件的组装模型

随着软件构件技术的发展，人们开始尝试利用软件构件进行搭积木式的开发，即构件组装模型。在构件组装模型中，当经过需求分析定义出软件功能后，将对构件的组装结构进行设计，将系统划分成一组构件的集合，明确构件之间的关系。在确定了系统构件后，则将独立完成每一个构件，这时既可以开发软件构件，也可以重用已有的构件，当然也可以购买或选用第三方的构件。

构件是独立的、自包容的，因此架构的开发也是独立的，构件之间通过接口相互协作。
构件组装模型的一般开发过程如图2-9所示。

![image-20230214上午115816218](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230214%E4%B8%8A%E5%8D%88115816218.png)

构件组装模型的优点如下：

构件的**自包容性**让系统的扩展变得更加容易：

设计良好的构件更容易**被重用**，降低软件开发成本；

构件的**粒度较整个系统更小**，因此安排开发任务更加灵活，可以将开发团队分成若干组，并行地独立开发构件。
构件组装模型也有**明显的缺点**：

对构件的设计需要经验丰富的架构设计师，设计不良的构件难以实现构件的优点，降低构件组装模型的重用度：

在考虑软件的重用度时，往往会对其他方面做出让步，如性能等：

使用构件组装应用程序时，要求程序员能熟练地掌握构件，增加了研发人员的学习成本；

第三方构件库的质量会最终影响到软件的质量，而第三方构件库的质量往往是开发团队难以控制的。

2. 商用构件的标准规范

当前，主流的商用构件标准规范包括对象管理组织(Object Management Group,OMG)的CORBA、Sun的J2EE和Microsoft的DNA。
**1)CORBA**
公共对象请求代理架构(Common Object Request Broker Architecture,CORBA)主要分为3个层次：**对象请求代理、公共对象服务和公共设施**。

最底层的对象请求代理(Object RequestBroker,ORB)规定了分布对象的定义（接口）和语言映射，实现对象间的通信和互操作，是分布对象系统中的“软总线”；

在ORB之上定义了很多公共服务，可以提供诸如并发服务、名字服务、事务（交易）服务、安全服务等各种各样的服务：

最上层的公共设施则定义了构件框架，提供可直接为业务对象使用的服务，规定业务对象有效协作所需的协定规则。
CORBA CCM(CORBA Component Model)构件模型是OMG组织制定的一个用于开发和配置分布式应用的服务器端构件模型规范，它主要包括如下3项内容。
**(1)抽象构件模型**：用以描述服务器端构件结构及构件间互操作的结构。
**(2)构件容器结构**：用以提供通用的构件运行和管理环境，并支持对安全、事务、持久状态等系统服务的集成。
**(3)构件的配置和打包规范**：CCM使用打包技术来管理构件的二进制、多语言版本的可执行代码和配置信息，并制定了构件包的具体内容和文档内容标准。

**2)J2EE**
在J2EE中，SUN给出了完整的基于Java语言开发面向企业分布的应用规范。其中，在分布式互操作协议上，J2EE同时支持**远程方法调用**(Remote Method Invocation,RMI)和**互联网内部对象请求代理协议**(Internet Inter-ORB Protocol,IIOP),而在服务器端分布式应用的构造形式，则包括了Java Servlet、JSP、EJB等多种形式，以支持不同的业务需求。

而且Java应用程序具有跨平台的特性，使得J2EE技术在发布计算领域得到了快速发展。其中，EJB给出了系
统的服务器端分布构件规范，这包括了构件、构件容器的接口规范以及构件打包、构件配置等的标准规范内容。

EJB技术的推出，使得用Java基于构件方法开发服务器端分布式应用成为可能。从企业应用多层结构的角度，EJB是业务逻辑层的中间件技术。

与JavaBeans不同，它提供了事务处理的能力，自从三层结构提出以后，中间层（也就是业务逻辑层）是处理事务的核心，
从数据存储层分离，取代了存储层的大部分地位。从Internet技术应用的角度，EJB、Servlet和JSP一起成为新一代应用服务器的技术标准。

EJB中的Bean可以分为会话Bean和实体Bean,前者维护会话，后者处理事务，通常由Servlet负责与客户端通信，访问EJB,并把结果通过JSP产生页面传回客户端。

**3)DNA2000**
Microsoft DNA2000是Microsoft在推出Windows2000系列操作系统平台的基础上，在扩展了分布计算模型以及改造BackOffice系列服务器端分布计算产品后发布的新的分布计算架构和规范。

在服务器端，DNA2000提供了ASP、COM、Cluster等的应用支持。DNA2000融合了当今最先进的分布计算理论和思想，如事务处理、可伸缩性、异步消息队列和集群等内容。
DNA可以开发基于Microsoft平台的服务器构件应用，其中，如数据库事务服务、异步通信服务和安全服务等，都由底层的分布对象系统提供。
Microsoft的DCOM/COM/COM+技术在DNA2000分布计算结构基础上，展现了一个全新的分布构件应用模型。首先，DCOM/COM/COM什的构件仍然采用普通的构件对象模型(Component Object Model,COM)。COM最初作为Microsoft桌面系统的构件技术，主要为本地的对象连接与嵌入(Object Linking and Embedding,OLE)应用服务，但是随着Microsoft服务器操作系统Windows NT和分布式构件对象模型(Distributed Component Object Model, DCOM)的发布，COM通过底层的远程支持使得构件技术延伸到了分布应用领域。DCOM COM/COM+更将其扩充为面向服务器端分布应用的业务逻辑中间件。通过COM+的相关服务设施，如负载均衡、内存数据库、对象池、构件管理与配置等，DCOM/COM/COM+将COM、
DCOM、MTS(Microsoft Transaction Server,.微软事物处理服务器)的功能有机地统一在一起，形成了一个功能强大的构件应用架构。
通过购买商用构件（平台）并遵循其开发标准来进行应用开发，是提高应用软件开发效率的常见选择。

#### 2.3.8 应用软件
应用软件是为了利用计算机解决某类问题而设计的程序的集合，是为满足用户不同领域、不同问题的应用需求而提供的软件。有些软件是为个人用户设计的，有些软件则是为企业应用设计的。

应用软件种类繁多，包括办公软件、图形图像、系统管理、文件管理、邮件处理、学习娱乐、即时通信、音频视频工具和浏览器等。  
按照应用软件的开发方式和适用范围，应用软件可再分成通用应用软件和定制应用软件两大类。

1. 通用软件

常见的通用软件分文字处理软件、电子表格软件、媒体播放软件、网络通信软件、个人信息管理软件、演示软件、绘图软件、信息检索软件和游戏软件等（见表23)。这些软件设计得很精巧，易学易用，在用户几乎不经培训就能普及到计算机应用的进程中，它们起到了很大的作用。

![image-20230214下午121222745](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230214%E4%B8%8B%E5%8D%88121222745.png)

2. 专用软件

专用软件是按照不同领域用户的特定应用要求而专门设计开发的，如超市的销售管理和市场预测系统、汽车制造厂的集成制造系统、大学教务管理系统、医院信息管理系统、酒店客房管理系统等。

这类软件专用性强，设计和开发成本相对较高，主要是机构用户购买，因此价格比通用应用软件贵得多。
所有得到广泛使用的应用软件，一般都具有以下的共同特点：

**它们能替代现实世界己有的工具，而且使用起来比已有工具更方便、有效：**

**它们能完成已有工具很难完成甚至完全不可能完成的任务，扩展了人们的能力。**

### 2.4 嵌入式系统及软件

嵌入式系统(Embedded System)是为了特定应用而专门构建且将信息处理过程和物理过程紧密结合为一体的专用计算机系统。

嵌入式系统随着20世纪70年代单片微型计算机(SCM)发明而兴起，目前已涵盖军事、自动化、医疗、通信、工业控制、消费电子、交通运输等各个应用领域。
嵌入式软件则是指**可运行在嵌入式系统中的程序代码和帮助这些软件开发所用的工具或环境软件的总称**。

#### 2.4.1 嵌人式系统的组成及特点

嵌入式系统是以应用为中心、以计算机技术为基础，并将可配置与可裁减的软、硬件集成于一体的专用计算机系统，需要满足应用对功能、可靠性、成本、体积和功耗等方面的严格要求。

嵌入式系统通常通过外部接口采集相关输入信息或人机接口输入的命令，对输入数据进行加工和计算，并将计算结果通过外部接口输出，以控制受控对象，如图2-10所示。

![image-20230214下午21610900](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230214%E4%B8%8B%E5%8D%8821610900.png)

从计算机角度看，嵌入式系统是指嵌入各种设备及应用产品内部的计算机系统。它主要完成信号控制的功能，体积小、结构紧凑，可作为一个部件埋藏于所控制的装置中。它提供用户接口，管理有关信息的输入输出和设备监控工作，使设备及应用系统有较高智能和性价比。从技术角度看，嵌入式系统是计算机技术、通信技术、半导体技术、微电子技术、语音图像、数据传输技术，以及传感器等先进技术和具体应用对象相结合后的换代产品，是技术密集、投资规模大、高度分散、不断创新的知识密集型系统，反映了当代最新技术的先进水平。从综合角度看，嵌入式系统定义为现代科学多学科相互融合的以应用技术产品为核心，以计算机技术为基础，以通信技术为载体，以消费类产品为对象，引入各类传感器，引入Internet网络技术的连
接，从而适应应用环境的产品。

1. 嵌入式系统的组成

一般嵌入式系统由嵌入式处理器、相关支撑硬件、嵌入式操作系统、支撑软件以及应用软件组成。

**(1)嵌入式处理器。**

由于嵌入式系统一般是在恶劣的环境条件下工作，与一般处理器相比，嵌入式处理器应可抵抗恶劣环境的影响，比如高温、寒冷、电磁、加速度等环境因素。为适应恶劣环境，嵌入式处理器芯片除满足低功耗、体积小等需求外，根据不同环境需求，其工艺可分为民用、工业和军用等三个档次。

**(2)相关支撑硬件。**

相关支撑硬件是指**除嵌入式处理器以外的构成系统的其他硬件**，包括**存储器、定时器、总线、IO接口以及相关专用硬件**。

基于ARM处理器的嵌入式计算机硬件组成图如图2-11所示，其中嵌入式ARM处理器是嵌入式计算机的核心部件，也是整个系统的运算中心。

相关支撑硬件主要包括4类：**存储器、输出设备、输入设备、接口和网络总线**。

本嵌入式**存储器**配备了**非易失存储器(Flash)、内存(SDRAM)、硬盘（非线性Flash盘）**，**显示设备**配备了**LCD显示**，**输入设备**配备了**键盘设备**，**提供了RS-232串行接口**、**USB接口**和**JTAG等三路I/O接口**，配备了**TCPP网络和CAN总线**。

![image-20230214下午22834186](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230214%E4%B8%8B%E5%8D%8822834186.png)

**(3)嵌入式操作系统。**

嵌入式操作系统是指运行在嵌入式系统中的基础软件，主要用于管理计算机资源和应用软件。与通用操作系统不同，嵌入式操作系统应具备**实时性**、**可剪裁性**和**安全性**等特征。

**(4)支撑软件。**

支撑软件是指为应用软件开发与运行提供公共服务、软件开发、调试能力的软件，支撑软件的公共服务通常运行在操作系统之上，以库的方式被应用软件所引用。
**(5)应用软件。**

应用软件是指为完成嵌入式系统的某一特定目标所开发的软件。

2. 嵌入式系统的特点

根据嵌入式系统的应用背景及其在应用中所起作用，嵌入式系统应具备以下特性。
**(1)专用性强。**

嵌入式系统面向特定应用需求，能够把通用CPU中许多由板卡完成的任务集成在芯片内部，从而有利于嵌入式系统的小型化。
**(2)技术融合。**

嵌入式系统将先进的计算机技术、通信技术、半导体技术和电子技术与各个行业的具体应用相结合，是一个技术密集、资金密集、高度分散、不断创新的知识集成系统。
**(3)软硬一体软件为主。**

软件是嵌入式系统的主体，有IP核。嵌入式系统的硬件和软件都可以高效地设计，量体裁衣，去除冗余，可以在同样的硅片面积上实现更高的性能。
**(4)比通用计算机资源少。**

由于嵌入式系统通常只完成少数几个任务。设计时考虑到其经济性，不能使用通用CPU,这就意味着管理的资源少，成本低，结构更简单。
**(5)程序代码固化在非易失存储器中。**

为了提高执行速度和系统可靠性，嵌入式系统中的软件一般都固化在存储器芯片或单片机本身中，而不是存在磁盘中。

**(6)需专门开发工具和环境。**

嵌入式系统本身不具备开发能力，即使设计完成以后，用户通常也不能对其中的程序功能进行修改，必须有一套开发工具和环境才能进行开发。

**(7)体积小、价格低、工艺先进、性能价格比高、系统配置要求低、实时性强。**

**(8)对安全性和可靠性的要求高。**

#### 2.4.2 嵌人式系统的分类

由于嵌入式系统是一个“深埋”于**各种**设备中，对设备的各种传感器进行管理与控制的系统，可从不同角度去划分嵌入式系统。通常，根据不同用途可将嵌入式系统划分为**嵌入式实时系统**和**嵌入式非实时系统**两种，而实时系统又可分为**强实时(Hard Real--Time)系统**和**弱实时(Weak Real-Time)系统**。

如果从安全性要求看，嵌入式系统还可分为**安全攸关(Safety-Critical或Life-Critical)系统**和**非安全攸关系统**。

嵌入式系统的分类如图2-12所示。

![image-20230214下午25628538](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230214%E4%B8%8B%E5%8D%8825628538.png)



**(1)实时系统(Real-Time System,RTS)。**
实时系统是指**能够在指定或者确定的时间内完成<u>系统功能</u>和<u>外部或内部</u>、<u>同步或异步时间做出响应的系统</u>**。也就是说，系统计算的正确性不仅取决于程序的逻辑正确性，也取决于结果产生的时间，如果系统的时间约束条件得不到满足，将会发生系统错误。

**(2)安全攸关系统(Safety-Critical System)。**

安全攸关系统也称为**安全关键系统**或者**安全生命关键系统(Life-Critical System),**是指其不正确的功能或者失效会导致人员伤亡、财产损失等严重后果的计算机系统。

#### 2.4.3 嵌人式软件的组成及特点

嵌入式系统的最大特点就是系统的运行和开发是在不同环境中进行的，通常将运行环境称为“目标机”环境，称开发环境为“宿主机”环境，其结构如图2-13所示。

![image-20230214下午30059875](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230214%E4%B8%8B%E5%8D%8830059875.png)

在目标机环境运行时，系统与被控对象直接相关联，其系统架构的优劣也影响着被控对象功能的好坏。下面所介绍的嵌入式系统通用架构主要指目标机环境架构。

嵌入式系统的能力与应用需求密不可分，同时也与硬件配置存在着紧密的耦合性。通常，嵌入式系统软件组成架构采用层次化结构，并且具备<u>可配置</u>、<u>可剪裁能力</u>。

从现代嵌入式系统观看，人们把嵌入式系统分为<u>硬件层</u>、<u>抽象层</u>、<u>操作系统层</u>、<u>中间件层</u>和<u>应用层</u>等5层，如图2-14所示。

![image-20230214下午30610682](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230214%E4%B8%8B%E5%8D%8830610682.png)



**(1)硬件层。**

硬件层主要是为嵌入式系统提供运行支撑的硬件环境，其核心是<u>微处理器、存储器(ROM、SDRAM、Flash等)、I/O接口(AD、D/A、I/O等)和通用设备以及总线、电源时钟等。</u>

**(2)抽象层。**

在<u>硬件层和软件层</u>之间为抽象层，主要实现对硬件层的硬件进行抽象(Hardware Abstract Layer,HAL),为上层应用（操作系统）提供虚拟的硬件资源；

板级支持包(Board Support Package,BSP)是一种硬件驱动软件，它是面向硬件层的硬件芯片或电路进行
驱动，为上层操作系统提供对硬件进行管理的支持。

**(3)操作系统层。**

操作系统层主要由<u>嵌入式操作系统、文件系统、图形用户接口、网络系统和通用组件等可配置模块组成。</u>嵌入式操作系统的功能主要包括<u>任务管理、内部存储器管理、任务间通信管理和时钟/中断管理等</u>，主要完成系统的硬件资源、软件资源进行调度和管理：可配置组件是对操作系统的基本功能的扩展，为用户提供更加丰富的公共能力，这些组件具备可配置和可剪裁特性，用户可根据自己设计的应用系统需求，做适当组合。通常可配置组件包括了<u>文件系统、设备管理、运行时库(RTL)、图形用户接口(GUI)、网络管理（如TCP/IP)和支持系统软件调试用的目标机代理(Agent)等组件</u>。

**(4)中间件(Middleware)层。**

中间件是指一种独立的系统软件或服务程序，分布式应用系统借助这种软件可在不同的技术之间共享资源。中间件层一般位于操作系统之上，管理计算机资源和网络通信，中间件层是连接两个独立应用的桥梁。通常，中间件可分为**服务中间件、集成中间件、数据中间件、消息中间件和安全中间件**等5类。

在嵌入式系统中，比较常用的中间件产品有<u>嵌入式数据库、OpenGL图形图像处理软件、JAVA中间件、虚拟机(VM)、DDS CORBA和Hadoop</u>等。

**(5)应用层。**

应用层是指嵌入式系统的具体应用，主要包括不同的应用软件。
外部环境的变化会对系统的硬件性能产生影响，硬件的变化必然会引发软件的异常现象，比如，航天领域的辐射会引起存储器的负离子反转，那么存储器中存储的程序或数据就会发生变化，因此，嵌入式软件也要适应恶劣环境的影响。
**嵌入式软件的主要特点如下。**
**(1)可剪裁性。**

嵌入式软件能够根据系统功能需求，通过工具进行适应性功能的加或减删除掉系统不需要的软件模块，使得系统更加紧凑。

可剪裁性通常采用的设计方法包括**静态编译、动态库和控制函数流程实现功能控制**等。

**(2)可配置性。**

<u>嵌入式软件需要具备根据系统运行功能或性能需要而被配置的能力，使得嵌入式软件能够根据系统的不同状态、不同容量和不同流程，对软件工作状况进行能力的扩展、变更和增量服务</u>。可配置通常采用的设计方法包括**数据驱动、静态编译和配置表**等。

**(3)强实时性。**

嵌入式系统中的大多数都属于强实时性系统，要求任务必须在规定的时限(Deadline)内处理完成，因此，嵌入式软件采用的算法优劣是影响实时性的主要原因。

强实时性通常采用的设计方法包括**表驱动、配置、静/动态结合、汇编语言**等。

**(4)安全性(Safety)。**

安全性是指系统在规定的条件下和规定的时间内不发生事故的能力。

安全性是判断、评价系统性能的一个重要指标，可直接反映系统失效后所带来损失大小。
通常，在嵌入式系统中根据软件危害程度可将软件分成不同安全等级，例如，机载领域DO-178适航标准将软件分为A~E 5个安全等级。提高安全性通常采用的设计方法包括编码标准、安全保障机制、FMECA(故障模式、影响及危害性分析)。

**(5)可靠性。**

可靠性是指系统在规定的条件下和规定的时间周期内程序执行所要求的功能的能力。

可靠性也是判断、评价系统性能的一个重要指标。软件可靠性与硬件可靠性的衡量指标是完全不同的，软件是不可能随着时间发生变化。在安全攸关系统中，其系统的可靠性指标通常要达到10<sup>-6</sup> ～ 10<sup>-9</sup>。提高安全性通常采用的设计方法包括容错技术、余度技术和鲁棒性设计等。

**(6)高确定性。**

嵌入式系统运行的时间、状态和行为是预先设计规划好的，其行为不能随时间、状态的变迁而变化。也就是说，在嵌入式系统中，任务、资源、状态、错误和时限等都是预先由设计师规划好的，在系统运行期间，不能发生资源枯竭和未预计的状态出现等情况，尤其是在系统失效后不能由于未预计到的错误而引发灾难。确保软件确定性通常采用的设计方法包括静态分配资源、越界检查、状态机、静态任务调度等。
此外，嵌入式软件的开发也与传统的软件开发方法存在比较大的差异，主要表现在以下方面。

> **(1)嵌入式软件开发是在宿主机(PC机或工作站)上使用专门的嵌入式工具开发，生成二进制代码后，需要使用工具卸载到目标机或固化在目标机储存器上运行。**
> **(2)嵌入式软件开发时更强调软/硬件协同工作的效率和稳定性。**
> **(3)嵌入式软件开发的结果通常需要固化在目标系统的储存器或处理器内部储存器资源中。**
> **(4)嵌入式软件的开发一般需要专门的开发工具、目标系统和测试设备。**
> **(5)嵌入式软件对实时性的要求更高。**
> **(6)嵌入式软件对安全性和可靠性的要求较高。**
> **(7)嵌入式软件开发是要充分考虑代码规模。**
> **(8)在安全攸关系统中的嵌入式软件，其开发还应满足某些领域对设计和代码审定。**
> **(9)模块化设计即将一个较大的程序按功能划分成若干程序模块，每个模块实现特定的功能。**

#### 2.4.4 安全攸关软件的安全性设计

美国电气和电子工程协会(IEEE)将安全攸关软件定义为：**“用于一个系统中，可能导致不可接受的风险的软件”。**在航空航天、轨道交通和核工业等领域中，其系统的安全性保障是至关重要的。因为一旦飞行器出现安全问题，将会带来机毁人亡的重大灾难。

如今，嵌入式计算机及软件在这些领域中起着主导作用。

如何设计一款高安全、高可靠的嵌入式软件，已成为软件业亟待解决的问题。
NASA 8719.13A给出了**软件安全(Safety)的定义**，即**“在软件生命周期内，应用安全性工程技术，确保软件采取积极的措施提高系统安全性，确保降低系统安全性的错误，使其减少或控制在一个风险可接受的水平内”**。

严格来说，安全性属于一种系统特性，软件自身从本质上无从谈起是安全还是不安全。然而，当软件是一个安全攸关系统的一部分时，它可能引起或助长不安全的因素，从而影响系统的安全性。也正因如此，对于是否存在软件安全性说法一直存在较大争议，认为安全性只用系统才有。安全性分析应自上而下，安全性分析离不开所适用的场景。
为了开发出能强化安全性的软件，必须首先理解软件所运行的系统，对整个系统进行安全性评估，通过对系统功能需求和系统体系结构的安全性分析，也能识别出相应的安全性需求，并将之反馈到系统需求中，作为系统需求的一部分共同作为软件、硬件开发的基础。根据软件对安全性的不同影响程度，利用软件开发保证级别的概念来对软件进行分类和区别对待，即对安全攸关软件分配不同的开发保证级别，对级别越高的功能要求执行越多的开发和验证活动，要求越多的依赖性证据，要求越多的错误要被识别和排除。不同软件开发保证级别，软件开发成本不同，甚至相差极大，因此开发保证级别的分配对于一个组织来说也不是越高越好，因为越高的开发保证级别代表了越大的成本。合理的功能分配、体系结构设计会帮助改善软件开发
保证级别分配，从而降低软件研发成本和风险。
在安全攸关软件设计中有很多方法可以参考，而Do-178标准中的Software Considerations in Airborne System and Equipment Certification是美国FAA制定的一套民用飞机适航标准中针对机载软件而制定的“机载系统/设备合格审定中的软件考虑”唯一标准，此标准被航空、航天等安全攸关领域普遍采用。

本节概要介绍DO-178B对高安全软件开发的要求。

1982年由RTCA和EUROCAE正式发布了DO-178版，这是民用航空机载软件开发中安全保证的一个里程碑。1992年发布的Do-178第三版(B版)称为Do-178B。现在，DO-178B早就成了国际公认的民用航空机载软件的开发标准。

一架民用飞机（相对军用飞机而言）不经过“民航标准体系”的适航认证，是不可以飞行的。

而这个“民航标准体系”中，针对机载软件适航认证的，就是DO-178B标准。经过再次完善和补充，2011年形成了DO-178C标准，它将工具鉴定、基于模型的开发验证技术、面向对象的技术和形式化验证技术纳入适航验证中。

1. D0-178B的目的和内容

DO-178B的目的是为制造机载系统和设备的机载软件提供指导，使其能够提供在满足符合适航要求的安全性水平下完成预期功能。为了满足该目标，DO-178B给予了以下3方面的指导。

> (1)软件生命周期过程的目标。
> (2)为满足上述目标要进行的活动。
> (3)证明上述目标已经达到的证据，也即软件生命周期数据。

在DO-178B中，**目标、过程、数据**是软件适航的基本要求。

这三方面适航要求是辩证统一的关系，即一旦选择了DO-178B标准作为符合性方法，就必须满足该标准所定义的所有适航目标，而满足这些适航目标的途径则是执行该标准所建议的过程和活动，为证明这些适航目标被满足，应按照该标准所定义的软件生命周期数据来组织相关证据。

DO-178B的主要内容就是介绍目标、过程、数据这三个方面的适航要求。目标、过程和数据三个因素是DO-178B的精髓，它贯穿在整个软件生命周期各个过程之中。

**(1)目标。**

DO-178B标准规定了软件整个生命周期需要达到的66个目标。在DO-178B中，根据软件在系统中的重要程度将软件的安全等级分为A~E五级，不同安全等级的软件，需要达到目标要求不同，其分布详见表2-4。

![image-20230214下午64655243](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230214%E4%B8%8B%E5%8D%8864655243.png)

**(2)过程。**

DO-178B标准把软件生命周期分为**“软件计划过程”**“**软件开发过程**”和“**软件综合过程**”，其中软件开发过程和软件综合过程又分别被细分成4个子过程。

**(3)数据。**

DO-178B把软件生命周期中产生的文档、代码、报表、记录等所有产品统称为软件生命周期数据。
DO-178B仅仅定义的是软件生命周期过程，在嵌入式系统中，软件的需求是来自系统分解给它的需求，二者是密不可分的。图2-15展示了软件生存周期与系统生存周期的关系。

![image-20230214下午64841471](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230214%E4%B8%8B%E5%8D%8864841471.png)

2. D0-178B的软件生命周期

D0-178B标准将软件生命周期分为“**软件计划过程**”“**软件开发过程**”和“**软件综合过程**”，其中软件开发过程和软件综合过程又分别被细分成4个子过程。

**1)软件计划过程**

软件计划过程策划和协调软件生命周期的所有活动，预测软件生命周期的过程和数据是否符合适航要求，制订一系列软件计划和软件标准，用以指导软件开发过程和软件综合过程活动。

**2)软件开发过程**

软件开发过程包含了生产软件产品的所有活动。整个过程所有活动的共同目标就是实现软件产品的**自顶向下**、**由粗及细**、**从无到有的生产**。

软件开发过程又包括了**软件需求过程、软件设计过程、软件编码过程和集成过程**4个子过程。

**(1)软件需求过程。**它包含了根据系统生命周期的输出来开发软件高层需求的所有活动。
**(2)软件设计过程。**它包含了对高层需求进行细化，开发软件体系结构和低层需求的所有活动。
**(3)软件编码过程。**它包含了根据软件体系结构和低层需求编写源代码的所有活动。
**(4)集成过程。**它包含了对源代码和目标码进行编译、链接并加载到目标机，形成机载系统或设备的所有活动。

**3)软件综合过程**

软件综合过程包含了**验证软件产品、管理软件产品、控制软件产品**，以保证软件产品和软件过程的正确、受控和可信的所有活动。

软件综合过程又包含了**软件验证过程、软件配置管理过程、软件质量保证过程、审定联络过程**4个子过程。

**(1)软件验证过程。**

它包含了对软件产品和软件验证结果进行技术评估以保证其**正确性、合理性、完好性、一致性、无歧义性**等特性的所有活动。软件验证依然是一项十分复杂的活动，DO-178B中根据验证活动的分类，列出了这些验证活动应该实现的目标。

**(2)软件配置管理过程。**

它包含对数据进行配置标识、基线建立、更改控制、软件产品归档等一系列活动。这个过程中所有活动的目标就是实现软件生命周期数据的配置管理。

**(3)软件质量保证过程。**

它包含对数据和过程进行审计的所有活动。整个过程所有活动的共同目标就是评价软件生命周期过程及其输出，保证过程的目标得以实现，缺陷得以检测，软件产品和软件生命周期数据与合格审查要求一致。

**(4)审定联络过程。**

它包含了软件研制单位与合格审查机构之间建立交流和沟通的所有活动。从工作流关系分析D0-178B定义的软件生命周期全过程的流程关系如图2-16所示。

![image-20230215下午25554137](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230215%E4%B8%8B%E5%8D%8825554137.png)

这里把计划过程、开发过程和综合过程纵向并排，并在过程的流向之间标明了软件生存周期的数据项，可以清晰地展示出过程与过程、过程与数据的关系。在图的顶部指明了来自系统生命周期过程的输入。

3. DO-178与CMMI差异

CMM能力成熟度模型是1994年由美国国防部与卡内基·梅隆大学的软件工程研究中心以及美国国防工业协会共同开发和研制的，其目的是帮助软件企业对软件工程过程进行管理和改进，增强开发与改进能力，从而能按时、不超预算地开发出高质量的软件，同时也用于采办方评估和选择软件供应商。2002年推出了能力成熟度模型集成(CMMI),把开发模型CMM Dev、服务模型CMMI-SVC、采购模型CMM-ACQ、人力模型P-CMM等多个领域能力成熟度模型集成到一个框架中去。
DO-178与CMMI是目前承担安全攸关软件开发企业最为关注的两个标准，二者的主要区别如下。

(1)CMMI是从过程改进的视角，对软件开发的技术与管理提出要求，覆盖了从个人、项目及组织三个层次的要求，更关注组织整体软件能力提升。

DO-178是从适航审定视角，对软件开发的技术与管理过程提出要求，更关注项目软件质量对于安全性的影响。所以DO-178覆盖的过程范围比CMMI少，比如DO-178C对于项目监控过程、风险管理过程、培训过程等并没有提出明确要求。

(2)CMMI主要由实践组成，实践是各行业最佳实践的抽象（去环境、方法）提炼，而DO-178C过程主要由<u>目标、活动与数据组成</u>，活动虽不代表具体工作步骤，但活动要求比较具体，并且对过程输出（数据）提出了明确要求，结合DO-178的配置管理过程，对数据管理与控制的要求也较为具体。

(3)CMMI是集成了系统、软件和硬件等视角，所以在内容和措辞上必须兼顾多个场景，容易产生歧义。而DO-178聚焦软件，更容易为软件工程师所理解（不代表容易做到）。

总之，DO-178比CMMI的目标更清晰，要求更具体，而且是针对安全攸关软件的。这两个标准都侧重于要求，而不是具体方法和步骤。对一个企业而言，不仅要关注一个项目的成功，还要在多个项目中持续获得成功，而且是商业成功（包括质量、进度、成本等），这就需要建立更为系统的软件过程体系，在这一点上CMMI更有指导性。过程改进思想的本质是过程不断丰富和优化的过程，在这个过程中需要融合不同标准与方法的要求以及实践中的经验与教训的总结。

### 2.5 计算机网络

**计算机网络是利用通信线路将地理上分散的、具有独立功能的计算机系统和通信设备按不同的形式连接起来，并依靠网络软件及通信协议实现资源共享和信息传递的系统。**

计算机网络技术主要涵盖**通信技术、网络技术、组网技术和网络工程**等四个方面。

#### 2.5.1 网络的基本概念

1. 计算机网络的发展

纵观计算机网络发展，其大致经历了诞生、形成、互联互通和高速发展等4个阶段。

**1)诞生阶段**

20世纪60年代中期之前的第一代计算机网络是以单个计算机为中心的远程联机系统，典型应用是由一台计算机和全美范围内2000多个终端组成的飞机订票系统，终端是一台计算机的外围设备，包括显示器和键盘，无CPU和内存。随着远程终端的增多，在主机之前增加了前端机(FE)。当时，人们把计算机网络定义为“以传输信息为目的而连接起来，实现远程信息处理或资源共享的系统”，这样的通信系统已具备网络的雏形。

**2)形成阶段**

20世纪60年代中期至70年代的第二代计算机网络，是以多个主机通过通信线路互联起来为用户提供服务。它兴起于20世纪60年代后期，典型代表是美国国防部高级研究计划局协助开发的ARPANET。主机之间不是直接用线路相连，而是由接口报文处理机(IMP)转接后互联的。MP和它们之间互联的通信线路一起负责主机间的通信任务，构成了通信子网。通信子网互联的主机负责运行程序，提供资源共享，组成资源子网。这个时期，网络概念为“以能够相互共享资源为目的互联起来的具有独立功能的计算机之集合体”，形成了计算机网络的基本概念。

**3)互联互通阶段**

20世纪70年代末至90年代的第三代计算机网络是具有统一的网络体系结构并遵守国际标准的开放式和标准化网络。

ARPANET兴起后，计算机网络发展迅猛，各大计算机公司相继推出自己的网络体系结构及实现这些结构的软硬件产品。由于没有统一的标准，不同厂商的产品之间互联很困难，人们迫切需要一种开放性的标准化实用网络环境，因此产生了两种国际通用的最重要的体系结构，即TCP/IP体系结构和国际标准化组织的OSI体系结构。

**4)高速发展阶段**

20世纪90年代至今的第四代计算机网络，由于局域网技术发展成熟，出现光纤及高速网络技术，整个网络就像一个对用户透明的庞大的计算机系统，发展为以因特网(Internet)为代表的互联网。

2. 计算机网络的功能

**1)数据通信**

数据通信是计算机网络最主要的功能之一。数据通信是依照一定的通信协议，利用数据传输技术在两个通信结点之间传递信息的一种通信方式。它可实现计算机和计算机、计算机和终端以及终端与终端之间的数据信息传递，是继电报、电话业务之后的第3种最大的通信业务。
数据通信中传递的信息**均以二进制数据形式表示**。

数据通信的另一个特点是，它通常与远程信息处理相联系，是包括科学计算、过程控制、信息检索等内容的广义的信息处理。

**2)资源共享**

资源共享是人们建立计算机网络的主要目的之一。计算机资源包括硬件资源、软件资源和数据资源。

硬件资源的共享可以提高设备的利用率，避免设备的重复投资，如利用计算机网络建立网络打印机、计算资源池等，供网络上的用户或应用来共享；

软件资源和数据资源的共享可以充分利用已有的信息资源，比如可减少软件开发过程中的重复劳动，也可避免大型数据库的重复建设等。

**3)管理集中化**

计算机网络技术的发展和应用，已使得现代的办公手段、经营管理等发生了深刻变化。迄今已经有了许多管理信息系统、办公自动化系统等，通过这些系统可以实现日常工作的集中管理，提高工作效率，增加经济效益。

**4)实现分布式处理**

网络技术的发展，使得分布式计算成为可能。对于大型的课题，可以分为许许多多小题目，由不同的计算机分别完成，然后再集中来解决问题。

**5)负荷均衡**

负荷均衡是指工作负荷(Workload)被均匀地分配给网络上各台计算机系统。网络控制中心负责分配和检测，当某台计算机负荷过重时，系统会自动转移负荷到较轻的计算机系统来处理。
综上所述，计算机网络可以极大扩展计算机系统的功能及其应用范围，提高可靠性，在为用户提供方便的同时，减少了整体系统费用，提高了系统性价比。

3. 网络有关指标

计算机网络性能是衡量网络服务质量的重要体现，除了性能指标外，还有一些非性能特征，它们对计算机网络的性能也有很大影响。

**1)性能指标**

可以从**速率、带宽、吞吐量和时延**等不同方面来度量计算机网络的性能。

**(1)速率。**

网络速率指的是连接在计算机网络上的主机或通信设备在数字信道上传送数据的速率，它也称为数据率(Data Rate).或比特率(Bit Rate)。速率是计算机网络中最重要的性能指标之一。速率的单位是b/s(比特每秒)。
**(2)带宽。**

“带宽”有以下两种不同的意义。
其一，带宽是指一个信号具有的频带宽度。信号的带宽表示一个信号所包含的各种不同频率成分所占据的频率范围。

例如，在传统的通信线路上传送的电话信号的标准带宽是3.1kHz(300Hz~3.4kHz为话音的主要成分的频率范围)。带宽的单位是赫兹（或千赫、兆赫、吉赫等)。
其二，在计算机网络中，带宽用来表示网络的通信线路传送数据的能力。网络带宽表示**在单位时间内从网络中一个结点到另一个结点所能通过的“最高数据率”**。此处带宽单位是“比特每秒”，记为b/s。

**(3)吞吐量。**

吞吐量表示**在单位时间内通过某个网络（或信道、接口）的数据量**。

吞吐量受网络的带宽或网络额定速率所限制。

例如，对于一个带宽为100Mb/s的以太网，其额定速率是100M/s,那么这个数值也是该以太网的吞吐量的绝对上限值。因此，对100Mb/s的以太网，其典型的吞吐量可能也只有70Mb/s。有时吞吐量还可用每秒传送的字节数或帧数来表示。

**(4)时延。**

时延是指数据（一个报文、分组甚至比特）从网络（或链路）的一端传送到另一端所需的时间。

时延是个很重要的性能指标，它有时也称为延迟或迟延。网络中的时延由以下几个不同部分组成，如发**送时延、传播时延、处理时延、排队时延**等组成。

**(5)往返时间。**

往返时间(RTT)也是一个重要的网络性能指标，它表示从发送方发送数据开始，到发送方收到来自接收方的确认（接受方收到数据后便立即发送确认）总共经历的时间。

**(6)利用率。**

利用率有**信道利用率**和**网络利用率**两种。

信道利用率指信道被利用的概率(即有数据通过)，通常以百分数表示。完全空闲的信道利用率是零。

网络利用率是全网络的信道利用率的加权平均值。

**2)非性能指标**

费用、质量、标准化、可靠性、可扩展性、可升级性、易管理性和可维护性等非性能指标
与前面介绍的性能指标有很大相关性。

**(1)费用。**

构建网络的费用（网价格）包括设计和实现的费用。网络的性能与其价格密切相关。一般说来，网络的速率越高，其价格也越高。

**(2)质量。**

网络的质量取决于网络中所有构件的质量以及由它们构建网络的方式。网络的质量体现在诸多方面，如网络可靠性、网络管理简易性以及网络性能等。高质量的网络往往价格不菲。

**(3)标准化。**

网络硬件和软件的设计既可以按照通用的国际标准，也可以遵循特定的专用网络标准。采用国际标准设计的网络，具有更好的互操作性，更易于升级换代和维护，也更容易得到技术上的支持。

**(4)可靠性。**

可靠性与网络的质量和性能都有密切关系。速率更高的网络，其可靠性不一定会更差。但速率更高的网络要可靠地运行，则往往更加困难，同时所需费用也会更高。

**(5)可扩展性和可升级性。**

网络在构造时就应当考虑到日后可能需要的扩展（即规模扩大）和升级（即性能和版本的提高）。网络性能越好，其扩展和升级的难度与费用往往也越高。

**(6)易管理和维护性。**

如果对网络不进行良好的管理和维护，就很难达到和保持所设计的性能。

4. 网络应用前景

21世纪人类将全面进入信息时代。信息时代的重要特征就是数字化、网络化和信息化。网络可以非常迅速地传递信息，要实现信息化就需要完善的网络。网络现在已经成为信息社会的命脉和发展知识经济的重要基础。网络对社会生活、社会经济的发展已经产生了不可估量的影响。

从20世纪90年代以后，以因特网(Internet)为代表的计算机网络得到了飞速的发展，已从最初的教育科研网络逐步发展成为商业网络，并已成为仅次于全球电话网的世界第二大网络。

因特网正在改变着人们工作和生活的方方面面，它己经给人类社会带来了巨大益处，并加速了全球信息革命的进程。因特网是人类自印刷术发明以来在通信方面最大的变革。现在，人们的生活、工作、学习和交往都已离不开因特网了。

#### 2.5.2 通信技术

计算机网络是利用通信技术将数据从一个结点传送到另一结点的过程。通信技术是计算机网络的基础。这里所说的数据，指的是模拟信号和数字信号，它们通过**信道**来传输。

信道可分为**物理信道**和**逻辑信道**。

物理信道由**传输介质**和**设备**组成，根据传输介质的不同，分为**无线信道**和**有线信道**。

逻辑信道是指**在数据发送端和接收端之间存在的一条虚拟线路，可以是有连接的或无连接的**。

逻辑信道以物理信道为载体。

1. 信道

信息传输就是<u>**信源**和**信宿**通过信道收发信息的过程</u>。

信源发出信息，发信机负责将信息转换成适合在信道上传输的信号，收信机将信号转化成信息发送给信宿。

> (1)信道是信息的传输通道。
>
> (2)发信机接收信源发送的信息，进行编码和调制，将信息转化成适合在信道上传输的信
> 号，发送到信道上。
>
> (3)收信机负责从信道上接收信号，进行解调和译码，将信息恢复出来发送给信宿。不是所有频率的信号都可以通过信道传输，频率响应决定了哪些可以通过，可以通过的频率范围大小是信道的带宽。
>
> (4)香农公式。信道容量就是信道的最大传输速率，可通过香农公式计算得到。

公式：    $$C=B*log_2(1+\frac{S}{N})$$

> C代表信道容量，单位是b/s
>
> B代表信号带宽，单位是Hz
>
> S代表信号平均功率，单位是W
>
> N代表噪声平均功率，单位是W
>
> S/N代表信噪比，单位是dB(分贝)
>
> **提升信道容量可以使用比较大的带宽，降低信噪比：也可以使用比较小的带宽，升高信噪比。**

[信噪比怎么看 信噪比如何算？](docs%2F%E6%9E%B6%E6%9E%84%2F%E5%8E%9F%E7%90%86%E6%A6%82%E5%BF%B5%2F%E4%BF%A1%E5%99%AA%E6%AF%94%E6%80%8E%E4%B9%88%E7%9C%8B%20%E4%BF%A1%E5%99%AA%E6%AF%94%E5%A6%82%E4%BD%95%E7%AE%97%EF%BC%9F.md)
2. 信号变换

发信机进行的信号处理包括信源编码、信道编码、交织、脉冲成形和调制。相反地，收信机进行的信号处理包括解调、采样判决、去交织、信道译码和信源译码。

**1)信源编码**

将模拟信号进行模数转换，再进行压缩编码（去除冗余信息），最后形成数字信号。例如GSM(全球移动通信系统)先通过PCM(脉冲编码调制)编码将模拟语音信号转化成二进制数字码流，再利用RPE-LPT(规则脉冲激励·长期预测编码)算法对其进行压缩。

**2)信道编码**

信道编码通过增加冗余信息以便在接收端进行检错和纠错，解决信道、噪声和干扰导致的误码问题，一般只能纠正零星的错误，对于连续的误码无能为力。

**3)交织**

为了解决连续误码导致的信道译码出错问题，通过交织将信道编码之后的数据顺序按照一定规律打乱，到了接收端在信道译码之前再通过交织将数据顺序复原，这样连续的误码到了接收端就变成了零星误码，信道译码就可以正确纠错了。

**4)脉冲成形**

为了减小带宽需求，需要将发送数据转换成合适的波形，这就是脉冲成形。
矩形脉冲要求的信道会很宽，主要原因是矩形脉冲的竖边是垂直的，想要达到这一点要很高的频率，脉冲成形并不要求是垂直的，所以频率要求降低了。

**5)调制**

调制是将信息承载到满足信号要求的高频载波信号的过程。

3. 复用技术和多址技术

在一条信道上只传输一路数据的情况下，只需要经过信源编码、信道编码、交织、脉冲成形、调制之后就可以发送到信道上进行传输了：但如果**同时传递多路数据就需要复用技术和多址技术。**

**1)复用技术**

复用技术是指在一条信道上同时传输多路数据的技术，如TDM时分复用、FDM频分复用和CDM码分复用等。ADSL使用了FDM的技术，语音的上行和下行占用了不同的带宽。

**2)多址技术**

多址技术是指在一条线上同时传输多个用户数据的技术，在接收端把多个用户的数据分离(**TDMA时分多址、FDMA频分多址和CDMA码分多址**)**<u>多路复用技术是多址技术的基础</u>**，多址技术还涉及信道资源分配算法，Walsh码分配算法等。

4. 5G通信网络

作为新一代的移动通信技术，5G的网络结构、网络能力和应用场景等都与过去有很大不同，其特征体现在以下方面。

**1)基于OFDM优化的波形和多址接入**

5G采用基于OFDM优化的波形和多址接入技术，因为OFDM技术被当今的4GLTE和WIFI系统广泛采用，因其可扩展至大带宽应用，具有高频谱效率和较低的数据复杂性，能够很好地满足5G要求。OFDM技术可实现多种增强功能，例如，通过加窗或滤波增强频率本地化，在不同用户与服务间提高多路传输效率，以及创建单载波ODM波形，实现高能效上行链路传输。

**2)实现可扩展的OFDM间隔参数配置**

通过OFDM子载波之间的15kHz间隔（固定的OFDM参数配置），LTE最高可支持20MHz的载波带宽。为了支持更丰富的频谱类型/带（为了连接尽可能丰富的设备，5G将利用所有可利用的频谱，如毫米微波、非授权频段)和部署方式。5GNR(New Radio)将引入可扩展的OFDM间隔参数配置。这一点至关重要，因为当快速傅里叶变换(Fast Fourier Transform,FFT)为更大带宽扩展尺寸时，必须保证不会增加处理的复杂性。而为了支持多种部署模式的不同信道宽度，5G NR必须适应同一部署下不同的参数配置，在统一的框架下提高多路传输效率。另外，5G NR也能跨波形实现载波聚合，比如聚合毫米波和6GHz以下频段的载波。

**3)OFDM加窗提高多路传输效率**

5G将被应用于大规模物联网，这意味着会有数十亿设备相互连接，5G势必要提高多路传输的效率，以应对大规模物联网的挑战。为了相邻频带不相互干扰，频带内和频带外信号辐射必须尽可能小。OFDM能实现波形后处理(Post-Processing),如时域加窗或频域滤波，来提升频率局域化。

**4)灵活框架设计**

5G NR采用灵活的5G网络架构，进一步提高5G服务多路传输的效率。这种灵活性既体现在频域，更体现在时域上，5G NR的框架能充分满足5G的不同服务和应用场景。这包括可扩展的传输时间间隔(Scalable Transmission Time Interval,STTI)和自包含集成子帧(Self Contained Integrated Subframe).

**5)大规模MMO(Multiple-Input Multiple-Output)**

5G将2×2 MMO提高到了4×4 MMO。更多的天线也意味着占用更多的空间，要在空间有限的设备中容纳更多天线显然不现实，只能在基站端叠加更多MMO。从目前的理论来看，5G NR可以在基站端使用最多256根天线，而通过天线的二维排布，可以实现3D波束成型，从而提高信道容量和覆盖。

**6)毫米波**

全新5G技术首次将频率大于24GHz以上的频段（通常称为毫米波）应用于移动宽带通信。大量可用的高频段频谱可提供极致的数据传输速度和容量，这将重塑移动体验。但毫米波的利用并非易事，使用毫米波频段传输更容易造成路径受阻与损耗（信号衍射能力有限）。通常情况下，毫米波频段传输的信号甚至无法穿透墙体，此外，它还面临着波形和能量消耗等问题。

**7)频谱共享**

用共享频谱和非授权频谱，可将5G扩展到多个维度，实现更大容量，使用更多频谱，支持新的部署场景。这不仅将使拥有授权频谱的移动运营商受益，而且会为没有授权频谱的厂商创造机会，如有线运营商、企业和物联网垂直行业，使他们能够充分利用5G NR技术。5G NR原生地支持所有频谱类型，并通过前向兼容灵活地利用全新的频谱共享模式。

**8)先进的信道编码设计**

现有移动通信网络编码（如LTE Turbo码）不足以应对未来无线数据传输需求。在5G通信信道编码中拟采用更符合5G网络应用场景的编码方式，如LDPC码和Polar码等。

**低密度奇偶校验(Low-Density Parity-Check,LDPC)码**是一种具有稀疏校验矩阵的分组纠错码，性能逼近香农容量极限，实现简单，译码简单且可实行并行操作，适合硬件实现。

**LDPC码**传输效率远超LTE Turbo,且易于平行化的解码设计，能以低复杂度和低时延途径进行扩展，获得更高传输速率。

**Polar码**是一种前向错误更正编码方式。在编码侧采用此方式使各个子信道呈现出不同的可靠性，当码长持续增加时，部分信道将趋向于容量近于1的完美信道（无误码），另一部分信道趋向于容量接近于0的纯噪声信道，选择在容量接近于1的信道上直接传输信息以逼近信道容量：在解码侧，极化后的信道可用简单的逐次干扰抵消解码的方法，以较低的复杂度获得与最大自然解码相近的性能。由于没有误码率，极化编码可以支持99.999%的可靠性，这正迎合了5G应用的超高可靠性诉求。

Polar码是用作5G控制信道的主要编码方式。

#### 2.5.3 网络技术

网络通常按照网络的覆盖区域和通信介质等特征来分类，可分为**局域网(LAN)、无线局域网(WLAN)、城域网(MAN)、广域网(WAN)和移动通信网等**。

1. 局域网(LAN)

局域网(Local Area Network,LAN)是指在**有限地理范围内将若千计算机通过传输介质互联成的计算机组（即通信网络）**，通过网络软件实现计算机之间的文件管理、应用软件共享、打印机共享、工作组内的日程安排、电子邮件和传真通信服务等功能。

局域网是封闭型的，比如可以由办公室内的两台及以上计算机组成，也可以由一个公司内的若干台计算机组成。

**1)网络拓扑**

局域网专用性非常强，具有比较稳定和规范的拓扑结构。常见的局域网拓扑结构有**星状结构、树状结构、总线结构和环形结构。**

**(1)星状结构。**

网络中的每个结点设备都以中心结点为中心，通过连接线与中心结点相连，如果一个结点设备需要传输数据，它首先必须通过中心结点，如图2-17所示。

![image-20230217上午113402540](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8A%E5%8D%88113402540.png)

这种结构的网络系统中，中心结点是控制中心，任意两个结点间的通信最多只需两步，所以：传输速度快、网络构简单、建网容易、便于控制和管理。这种结构的缺点是可靠性低，网络共享能力差，并且一旦中心结点出现故障则导致全网瘫痪。

**(2)树状结构。**

**树状结构网络也被称为分级的集中式网络**，如图2-18所示，其特点是网络成本低，结构简单。在网络中，任意两个结点之间不产生回路，每个链路都支持双向传输，结点扩充方便、灵活，方便寻查链路路径。但在这种结构的网络系统中，除叶结点及其相连的链路外，任何一个工作站或链路产生故障都会影响整个网络系统的正常运行。

![image-20230217上午113506514](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8A%E5%8D%88113506514.png)

**(3)总线结构。**

总线结构网络是将各个结点设备和一根总线相连，如下图所示。网络中所有的结点设备都是通过总线进行信息传输的。在总线结构中，作为数据通信必经的总线的负载能力是有限度的，这是由通信媒体本身的物理性能决定的。

![image-20230217上午113901136](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8A%E5%8D%88113901136.png)

**(4)环形结构。**

将网络中各结点通过一条首尾相连的通信链路连接起来，形成一个闭合环形结构网，如下图所示。环形结构的网络中各结点设备的地位相同，信息按照固定方向单向流动，两个节点之间仅有一条通路，系统中无信道选择问题，任一结点的故障将导致物理瘫痪。由于环路是封闭的，所以环形结构的网络不便于扩充，系统响应延时长，且信息传输效率相对较低。

![image-20230217上午114017263](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8A%E5%8D%88114017263.png)

**(5)网状结构。**

网状网络中的任何结点彼此之间均存在一条通信链路，任何结点故障不会影响其他结点之间的通信。但这种拓扑结构的网络布线较为烦琐，且建设成本高，控制方法复杂。

**2)以太网技术**

以太网(Ethernet)是一种计算机局域网组网技术。EEE制定的EEE802.3标准给出了以太网的技术标准。它规定了包括物理层的连线、电信号和介质访问层协议的内容。以太网是当前应用最普遍的局域网技术。

**(1)以太网帧结构。**

在以太网链路上的数据包被称作以太帧，其结构如图2-20所示。

![image-20230217上午114328217](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8A%E5%8D%88114328217.png)

DMAC代表目的终端的MAC地址，

SMAC代表源MAC地址，

而Length/Type字段长度是2字节，若该字段的值大于1500，则代表该数据帧的类型（比如该帧是属于哪个上层协议的数据单元)；若该字段的值小于1500，则代表该数据帧的长度。

DATA/PAD代表具体数据，以太网数据帧的最小长度必须不小于64字节（根据半双工模式下最大距离计算获得的），如果数据长度加上帧头不足64字节，需要在数据部分增加填充内容。

当Length/Type取值大于1500的时候，MAC子层可以根据Length/Type的值直接把数据帧提交给上层协议，由上层协议进行分帧处理。

这种结构为当前较为流行的ETHERNET_Ⅱ协议，大部分计算机都支持这种结构。FCS则是帧校验字段，用于判断该数据帧是否出错。

**(2)最小帧长。**

由于CSMA/CD算法限制，以太网帧的最小长度为64字节。高层协议要保证此长度。如果实际数据不足64个字节，则高层协议必须进行填充。数据域的长度上限可以灵活设置，但通常被设置为1500字节。

规定最小帧长的原因是为了避免发生某结点已经将一个数据包的最后一个BT发送完毕，但这个报文的第一个BT还未传送到距离较远的结点。这可能使得这些结点认为线路空闲而发送数据，导致链路上数据发送冲突

**(3)最大传输距离。**

以太网的最大传输距离没有严格限制，由线路质量、信号衰减程度等因素决定。

**(4)流量控制。**

当通过交换机端口流量过大，超过了它的处理能力时，就会发生端口阻塞。
网络拥塞一般是由于线速不匹配（如100M向10M端口发送数据）和突发的集中传输而产生的，它可能导致延时增加、丢包和重传增加这几种情况，使网络资源不能有效利用。

流量控制的作用是防止在设备出现阻塞情况下丢帧。

在半双工方式下，流量控制通过反压(Back-Pressure)技术实现，模拟产生碰撞，使得信息源降低发送速度。

在全双工方式下，流量控制一般遵循EEE802.3标准。EEE802.3x规定了一种64字节的“PAUSE”MAC控制帧格式。当端口发生阻塞时，交换机向信息源发送“PAUSE”帧，告诉信息源暂停一段时间再发送信息。

在实际网络中，尤其是一般局域网产生网络拥塞情况极少，所以有的厂家交换机并不支持流量控制。高性能的交换机通常都支持半双工方式下的反向压力和全双工的IEEE802.3x流控。
有的交换机的流量控制将阻塞整个LAN的输入，降低整个LAN的性能：高性能的交换机采用的策略是仅仅阻塞向交换机拥塞端口输入帧的端口，保证其他端口用户的正常工作。

2. 无线局域网(WLAN)

无线局域网WLAN(Wireless Local Area Networks)利用无线技术在空中传输数据、话音和视频信号。无线局域网所使用的关键技术，除了红外传输技术、扩频技术、窄带微波技术外还有一些其他技术，如调制技术、加解扰技术、无线分集接收技术、功率控制技术和节能技术。

无线局域网在室外主要有以下几种结构：**点对点型、点对多点型、多点对点型和混合型**。与有线网络相比，无线局域网具有安装便捷、使用灵活、经济节约、易于扩展等优点。

**1)WLAN标准**

IEEE 802.11是最早的无线局域网技术标准，当时传输速率只有1~2Mb/s,采用无连接的协议。

IEEE 802.11b标准的速率可达11Mb/s,IEEE 802.11a标准的传输速率可达到54Mb/s。同时还出现了EEE 802.11g标准，该标准具有与IEEE 802.11a标准一样的接入速率，同时兼容EEE 802.11b标准，工作于免费的2.4GHz频段，价格比IEEE 802.11a更便宜。之后出现了IEEE 802.11n新标准，其传输速率可达200Mb/s以上。

**2)WLAN拓扑结构**

在WLAN中，通常使用的拓扑结构主要有3种形式：**点对点型、HUB型和全分布型**。这3种结构解决问题的方法各有优缺点，目的都是让用户在无线信道中，获得与有线LAN兼容或相近的传输速率。

**(1)点对点型。**

典型的点对点结构是通过单频或扩频微波电台、红外发光二极管、红外激光等方法，连接两个固定的有线LAN网段，实际上是作为一种网络互联方案。无线链路与有线LAN是通过**桥路器或中继器**完成连接的。

点对点拓扑结构简单，采用这种方案可获得中远距离的高速率链路。由于不存在移动性问题，收发信机的波束宽度可以很窄，虽然这会增加设备调试难度，但可减小由波束发散引起的功率衰耗。

**(2)HUB型。**

由一个中心结点(HUB)和若干外围节点组成，外围结点既可以是独立的结点，也可与多个用户相连。中心HUB作为网络管理设备，为访问有线LAN或服务器提供逻辑接入点，并监控所有节点对网路的访问，管理外围设备对广播带宽的竞争，其管理功能由软件具体实现。

在此拓扑中，任何两外围结点间的数据通信都须经过HUB,是典型的集中控制式通信。

采用这种结构的网络具有用户设备简单，维护费用低，网络管理单一等优点，并可与微蜂窝技术结合，实现空间和频率复用。但是，用户之间的通信延迟增加，网络抗毁性能较差，中心结点的故障容易导致整个网络的瘫痪。

**(3)完全分布型。**

完全分布结构目前还无具体应用，仅处于理论探讨阶段，它要求相关结点在数据传输过程中发挥作用，类似于分组无线网的概念。对每一结点而言，一般仅只有网络的部分拓扑信息，但它可与邻近结点以某种方式分享各自拓扑结构信息，基于此完成一种分布路由算法，使得传输路径上的每一结点都要协助源结点数据传送至目的结点。
分布式结构抗毁性能好，移动能力强，可形成多跳网，适合较低速率的中小型网络，但对于用户结点而言，复杂性和成本较其他结构大幅度提高，网络管理困难，并存在多径干扰问题，同时随着网络规模的扩大，其性能指标快速下降。但在军事领域中，分布式WLAN具有很好的应用前景。

3. 广域网(WAN)

广域网是一种将分布于更广区域（比如一个城市、一个国家甚至国家之间）的计算机设备联接起来的网络。它通常是电信部门负责组建、经营和管理，并向社会公众提供通信服务。

广域网由通信子网与资源子网组成。通信子网主要是由一些通信结点设备和连接这些设备的链路组成。通信结点设备负责网络中数据的转发，其链路用于承载用户的数据，一般分为传输主干链路和末端用户线路。广域网的通信子网可以利用公用分组交换网、卫星通信网和无线分组交换网来构建，将分布在不同地区的局域网或计算机系统互连起来，达到资源共享的目的。

资源子网是指网络中实现资源共享功能的设备及其软件的集合。资源子网主要指网络资源设备，如信息服务或业务服务器、用户计算机、网络存储系统、独立运行的网络数据设备、网络上运行的各种软件资源、数据资源等。

**1)广域网相关技术**

**(I)同步光网络。**

同步光网络(Synchronous Optical Networking,SONET)是使用光纤进行数字化信息通信的一个标准。同步数字体系(Synchronous Digital Hierarchy,SDH)标准从SONET发展而来。

SONET是由美国标准化组织颁布的标准，SDH是国际电信联盟颁布的标准，两者均为传输网络物理层技术。SONET和SDH两种技术都被广泛应用，SONET应用在美国和加拿大，SDH应用于其他国家。

SONET和SDH体制都能够用来封装较早的数字传输标准，比如PDH(Plesiochronous Digital Hierarchy)标准，或者直接用来支持ATM以及SONET上的分组业务(Packet Over SONET).

**(2)数字数据网。**

数字数据网DDN(Digital Data Network)利用数字信道提供半永久性连接电路以传输数据。它可以满足各类租用数据专线业务的需要。它具有传输速率高、传输质量高、协议简单、连接方式灵活、电路可靠性高和网络运行管理简便等优点。

**(3)帧中继。**

帧中继FR(Frame Relay)是一种高性能广域网技术，运行于OSI/RM的物理层和数据链路层，是一种数据包交换技术，是$$X$$25网络的简化版本，但具有更高性能和传输效率。

帧中继采用虚电路技术，充分利用网络资源，具有吞吐量高，时延低，适合突发性业务等特点。

**(4)异步传输技术。**

异步传输模式(Asynchronous Transfer Mode,ATM)是以信元为基础的面向连接的一种分组交换和复用技术。它具有高速数据传输率，可满足多种业务（如语音、数据、传真、实时视频等)传输的需要。

在ATM中信元不仅是传输的基本单位，也是交换的信息单位。由于信元长度固定(53个字节)，可高速地进行处理和交换，去除不必要的数据校验，交换速率大大高于其他传统数据网，其典型速率为150Mb/s。

**2)广域网的特点**

广域网具有下述特点：

> (1)主要提供面向数据通信的服务，支持用户使用计算机进行远距离的信息交换。

> (2)覆盖范围广，通信的距离远，广域网没有固定拓扑结构。

> (3)由电信部门或公司负责组建、管理和维护，并向全社会提供面向通信的有偿服务等。

**3)广域网的分类**

广域网可以分为**公共传输网络、专用传输网络和无线传输网络**。

> (1)公共传输网络一般是由政府电信部门组建、管理和控制，网络内的传输和交换装置可以提供（或租用）给任何部门和单位使用。公共传输网络大体可以分为电路交换网络和分组交换网络两类。
> (2)专用传输网络是由单个组织或团体自己建立、使用、控制和维护的私有通信网络。一个专用网络起码要拥有自己的通信和交换设备，它可以建立自己的线路服务，也可以向公用网络或其他专用网络进行租用。专用传输网络主要是数字数据网(DDN)。DDN可以在两个端点之间建立一条永久的、专用的数字通道。它的特点是在租用该专用线路期间，用户独占该线路的带宽。
> (3)无线传输网络主要是移动无线网，典型的有GSM、TD-SCDMA/WCDMA/CDMA2000、LTE和5G等。

4. 城域网(MAN)

城域网是在单个城市范围内所建立的计算机通信网，简称MAN(Metropolitan Area Network)。

由于采用有源交换元件的局域网技术，网络中传输时延较小，它的传输媒介主要采用光缆，传输速率在100Mb/s以上。

MAN基于一种大型的LAN,通常使用与LAN相似的技术，但MAN的标准称为分布式队列双总线DQDB (Distributed Queue Dual Bus),即IEEE 802.6。DQDB是由双总线构成，将加入MAN的所有计算机都连接起来。

如果说局域网或广域网通常是为了一个单位或系统服务的，那么城域网则是为整个城市而非某个特定部门服务。

它向上与骨干网相连，向下将本地所有的联网用户与城市骨干网相连。城域网络通常分为3个层次：**核心层、汇聚层和接入层**。

**核心层**主要提供高带宽的业务承载和传输，完成和已有网络（如ATM、FR、DDN、IP网络）的互联互通，其特征为宽带传输和高速调度。

**汇聚层**的主要功能是给业务接入结点提供用户业务数据的汇聚和分发处理，同时要实现业务的服务等级分类。

**接入层**利用多种接入技术，进行带宽和业务分配，实现用户的接入。

5. 移动通信网

**1)移动通信网发展**

移动通信网络自从20世纪80年代出现以来，经历近40年的发展历程。最初采用模拟信号传输，即将电磁波进行频率调制后，将语音信号转换到载波电磁波上，载有信息的电磁波发布到空间后由接收设备接收，并从载波电磁波上还原语音信息，完成人与人之间的通话，即1G通信时代。

由于1G采用模拟信号传输，所以其容量非常有限，一般只能传输语音信号，且存在语音品质低、信号不稳定、涵盖范围不够全面、安全性差和易受干扰等问题。

之后出现的2G移动通信采用数字调制技术。移动通信系统的容量有了增加，此时手机可以上网了，虽然数据传输速度很慢，速率为9.6~14.4kb/s,但可传输文字信息。

这也是移动互联网发展的起点。随后，移动通信网络发展到3G时代。3G延续2G数字数据传输技术，但通过开辟新电磁波频谱及研发新标准，使得3G传输速率可达384kb/s,在室内稳定环境下甚至可达2Mb/s的速率，比2G提升了百倍之多。

由于采用更宽频带，传输稳定性大大提高。正是由于速度大幅提升和通信稳定性的提高，使大数据的传送成为可能，催生了移动通信多样化的应用。

随着移动通信自身演进以及移动互联网发展的需要，诞生了4G移动通信技术。4G采用更先进的通信协议和技术，理论上网速度为3G的几十倍，实际用户上网体验与固网20Mb/s家庭宽带相当。

4G可满足人们使用手机流畅观看高清电影，进行大数据传输等需要。4G己经像“水电”一样成为人们生活中不可或缺的基本资源，像微信、微博、视频、移动支付等手机应用成为生活中的必需，人们无法想象离开手机的生活。因此，4G将人类带进了移动互联网快速发展的时代。

随着社会信息化发展步伐的加快，以及社会各个领域对移动通信需求的日益多样化的驱动，诞生了5G通信网络，5G不再由某项业务能力或者某个典型技术特征加以定义。它不仅是更高速率、更大带宽、更强能力的技术，而且是一个多业务、多技术融合的网络，更是面向业务应用和用户体验的智能网络，最终打造以用户为中心的信息生态系统。

5G网络的基本特征是高速率（峰值速率可大于20Gb/s,相当于4G的20倍)、低时延（网络时延从4G的50ms缩减到1ms)、海量设备连接（满足1000亿量级的连接）、低功耗（基站更节能，终端更省电）。

**2)5G网络的主要特征**

(1)服务化架构。为满足5G时代行业应用的差异化需求，网络需要具备软件快速迭代和升级的能力，以加快业务创新，低成本试错，实现商业敏捷，3GPP(3 rd Generation Partnership Project)在5G核心网中引入了SBA(Service-based Architecture)服务化架构，实现网络功能的灵活定制和按需组合。下图2-21给出了5G网络的系统架构。

![image-20230217下午121408611](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%88121408611.png)

在5G通信系统中涉及的主要网元NF(Network Function)如图2-21所示，其中控制面NF包括：

> 认证服务功能(Authentication Server Function,AUSF),
接入和移动性管理功能(Access and Mobility Management Function,AMF),
网络能力开放功能(Network Exposure Function,NEF),
网络存储功能(Network Repository Function,NRF),
网络切片选择功能(Network Slice Selection Function,NSSF),
策略控制功能(Policy Control Function,PCF),
会话管理功能(Session Management Function,SMF),
统一数据管理功能(Unified Data Management,UDM),
应用功能(Application Function,AF)等。

用户面NF包括用户面功能(User Plane Function,UPF),另外包括用户设备(User Equipment,UE),接入网或无线接入网((Radio) Access Network, (R) AN)等。

数据网(Data Network,DN)泛指运营商服务网络、Internet 互联网或者是第三方服务网络等。它是5G通信系统要接入的业务网络。

5G系统控制面网元（如AMF、SMF、NRF、NSSF等）之间采用服务化接口(Service Based Interface,SBI)互通，使HTTP协议作为承载协议。其中AMF和接入网(AN)采用点到点方式通信，使用SCTP协议作为承载协议，SMF和用户面网元(UPF)之间采用点到点通
信，使用UDP协议作为承载协议。UPF和(R)AN之间采用点到点方式通信，使用UDP作为承载协议。UDP和DN之间基于IP协议通信。

**(2)网络切片。**

5G时代网络服务的对象不再是单纯的移动手机，而是各种类型的设备，如移动手机、平板、固定传感器和车辆等：应用场景也更加多样化，如移动宽带、大规模物联网、任务关键型互联网等：要满足的要求也愈加多样化，如移动性、安全性、时延性和可靠性等。

这便催生了网络切片的诞生。通过网络切片技术在单个独立的物理网络上切分出多个逻辑网络，从而避免了为每一个服务建设一个专用的物理网络，极大地降低了建网和运维成本。图2-22描述了根据不同群体与不同需求（应用场景）划分的不同网络切片。

在图2-22中，移动宽带(eMBB)的应用场景如面向4K/8K超高清视频、全息技术、增强现实/虚拟现实等应用，对网络带宽和速率要求较高：海量大规模物联网(mMTC)的应用场景如海量的物联网传感器部署于测量、建筑、农业、物流、智慧城市、家庭等领域，这些传感器设备是非常密集的，规模庞大，且大部分是静止的，对时延和移动性要求不高：关键任务物联网(uRLLC)的应用场景如无人驾驶、车联网、自动工厂、远程医疗等领域，要求超低时延和超高可靠性。

![image-20230217下午122111806](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%88122111806.png)

为了满足5G网络切片组网的需要，引入了SPN(Slicing Packet Network)技术，其中包括基于灵活以太网(Flexible Ethernet,FlexE)的硬切片技术。FlexE基于PHY层的切片转发，提供刚性管道隔离，实现带宽灵活分配。基于FlexE Cross-connection的FlexE Channel则将业务隔离从端口级扩展到网络级，可对不同业务实现端到端子信道隔离，为5G承载网络切片提供最佳转发面支撑。同时，基于FlexE Channel技术的保护倒换能做到1ms以内，把电信级保护提升到了工业控制级。

#### 2.5.4 组网技术
1. 网络设备及其工作层级

网络设备是连接到网络中的物理实体。网络设备的种类繁多，且与日俱增。基本的网络设备有**集线器、中继器、网桥、交换机、路由器和防火墙**等。

**1)集线器**

集线器是最简单的网络设备。在集线器中，从一个端口收到的数据被转送到所有其他端口，无论与端口相连的系统是否准备好。集线器还有一个端口被指定为上联端口，用来将该集线器连接到其他集线器或路由设备等以便形成更大的网络。

**2)中继器**

中继器是局域网互连设备，工作于OSI体系结构的物理层，它接收并识别网络信号，然后再生信号，将其发送到网络的其他分支上。为了保证中继器正常工作，需要保证每一个分支中的数据包和逻辑链路协议相同。此外，中继器可以用来连接不同物理介质，并在各种物理介质中传输数据包。

**3)网桥**
网桥工作于OSI体系的数据链路层。OSI模型数据链路层以上各层的信息对网桥来说是透明的。网桥包含了中继器的功能和特性，不仅可以连接多种介质，还能连接不同的物理分支，如以太网、令牌网，能将数据包在更大的范围内进行传送。

**4)交换机**

交换机是一种工作在OSI七层协议中的数据链路层，为接入交换机的任意两个网络结点提供独享的转发通路，将从一个端口接收的数据通过内部处理转发到指定端口。交换机具备自动寻址和交换的功能，同时具有避免端口冲突、提高网络吞吐(Throughput)的能力。

**5)路由器**

路由器工作在OSI体系结构中的网络层，它可以在多个网络上交换和路由数据包。路由器可通过在相互独立网络中交换路由信息以生成路由表来达到数据包的路径选择。路由表包含网络地址、连接信息、路径信息和发送代价等属性。路由器通常用于广域网或广域网与局域网的互连。

**6)防火墙(Firewall)**

防火墙是网络中一种重要设备，它通常作为网络的门户，为网络的安全运行提供保障。通过在防火墙设置若干安全规则、实现对进出网络的数据进行监视和过滤。在网络中通常采用硬件防火墙。硬件防火墙是指把防火墙程序做到芯片里面，由硬件执行这些功能，能减少CPU的负担，使路由更稳定。它的安全和稳定，直接关系到整个网络的安全。

2. 网络协议

**1)开放系统互连模型**

开放系统是指遵从国际标准的、能够通过互连而相互作用的系统。系统之间的相互作用只涉及系统的外部行为，而与系统内部的结构和功能无关。国际标准化组织(International Standard Organization,ISO)公布了开放系统互连参考模型(OSI/RM)。

OSI/RM为开放系统互连提供了一种功能结构的框架。OSI/RM是一种分层的体系结构，参考模型共有7层，分层的基本想法是每一层都在它的下层提供的服务基础上提供更高级的增值服务，而最高层提供能运行分布式应用程序的服务。这样，通过分层的方法将复杂的问题分解，并保持层次之间的独立性。

OSI/RM的网络体系结构如图2-23所示，由低层至高层分别为物理层(Physical Layer)、数据链路层(Datalink Layer)、网络层(Network Layer)、传输层(Transport Layer)、会话层(SessionLayer)、表示层(Presentation Layer)和应用层(Application Layer)。

![image-20230217下午22035053](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8822035053.png)

**2)OSI协议集**

国际标准化组织除了定义开放系统互连(Open System Interconnection,OSI)参考模型，还开发了实现7个功能层次的各种协议和服务标准，通称为OSI协议。与其他协议一样，OSI协议是实现某些功能的过程描述和说明。每一个OSI协议都详细地规定了特定层次的功能特性。

OSI协议集如表2-5所示。

![image-20230217下午22309889](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8822309889.png)

**3)TCP/IP协议集**

TCP/IP(Transmission Control Protocol /Internet Protocol).作为Internet的核心协议，已被广泛应用于局域网和广域网中，TCPP的主要特性为逻辑编址、路由选择、域名解析、错误检测和流量控制以及对应用程序的支持等。TCP/IP是个协议族，主要包括**因特网协议(IP)、传输控制协议(TCP)、用户数据报协议(UDP)、虚拟终端协议(TELNET)、文件传输协议(FTP)、电子邮件传输协议(SMTP)、网上新闻传输协议(NNTP)和超文本传送协议(HTTP)等8个**。

TCP/IP网络协议模型共分为**网络接口层、网际层、传输层和应用层**4层。

对于网络访问层，在TCPP参考模型中并没有详细描述，只是指出主机必须使用某种协议与网络相连。

网际层是整个TCP/IP体系结构的关键部分，其功能是使主机可以把分组发往任何网络，并使分组独立地传向目标。

传输层使源端和目的端机器上的对等实体可以进行会话。这一层定义了两个端到端的协议：**传输控制协议(TCP)和用户数据报协议(UDP)。**

**4)ISO/OSI模型与TCPP模型的对比**

ISO/OSI模型与TCP/IP模型的对比如表2-6所示。

![image-20230217下午22655645](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8822655645.png)![image-20230217下午22858285](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8822858285.png)

如表2-6所示，TCP/IP分层模型由4个层次构成，**即应用层、传输层、网际层和网络接口层**。

网际层定义的协议除了IP外，还有ICMP(Internet Control Message Protocol)、ARP(Address Resolution Protocol)和RARP(Reverse Address Resolution Protocol)等几个重要协议。

应用层的协议有NFS(Network File Serve)、Telnet、SMTP(Simple Mail Transport Protocol)、SNMP(Simple Network Management Protocol)和FTP(File Transfer Protocol)等。

Internet的地址主要有两种表示形式：域名格式和IP地址格式。域名和P地址是一一对应的。IP协议版本号为4，也称之为IPv4:IP协议版本号为6时，称之为IPv6。

WWW(World Wide Web)也称万维网，是指在因特网上以超文本为基础形成的信息网。它采用统一的资源定位器(Uniform Resource Locator,URL)和图文声并茂的用户界面，可以方便地浏览Internet上的信息和利用各种网络服务。

互联网常用的服务包括域名服务(Domain Name Server,.DNS)、WWW服务、E-mail电子邮件服务、FTP文件传输服务、Telnet远程登录服务、Gopher,等等。

3. 交换技术

数据在网络中转发通常离不开交换机。人们日常使用的计算机通常就是通过交换机接入网络的。交换机功能包括：

> (1)集线功能。提供大量可供线缆连接的端口达到部署星状拓扑网络的目的。
> (2)中继功能。在转发帧时重新产生不失真的电信号。
> (3)桥接功能。在内置的端口上使用相同的转发和过滤逻辑。
> (4)隔离冲突域功能。将部署好的局域网分为多个冲突域，而每个冲突域都有自己独立的
> 带宽，以提高交换机整体宽带利用效率。

**1)基本交换原理**

交换机是一种基于MAC地址识别，能完成封装转发数据包功能的网络设备。交换机可以“学习”MAC地址，并把其存放在内部地址表中，通过在数据帧的始发者和目标接收者之间建立临时的交换路径，使数据帧直接由源地址到达目的地址，交换机需要实现的功能如下所述。

> **(1)转发路径学习。**根据收到数据帧中的源MAC地址建立该地址同交换机端口的映射，写入MAC地址表中。
> **(2)数据转发。**如果交换机根据数据帧中的目的MAC地址在建立好的MAC地址表中查询到了，就向对应端口进行转发。
> **(3)数据泛洪。**如果数据帧中的目的MAC地址不在MAC地址表中，则向所有端口转发，也就是泛洪。广播帧和组播帧向所有端口（不包括源端口）进行转发。
> **(4)链路地址更新。**MAC地址表会每隔一定时间（如300s)更新一次。

**2)交换机协议**

在交换机组网中，为保证链路的可靠性通常会采用一条以上的物理链路来连接设备，因此，如果在一个交换网络中两台设备之间连接多条链路时就会产生环路。而环路的出现会导致数据转发异常，影响交换机的正常工作。

而生成树协议(STP)就可以很好解决链路环路问题。
另外，为提高链路可靠性，或提升与邻接交换设备之间端口带宽，可采用链路聚合协议，如802.3ad。

4. 路由技术

应用或业务数据在网络中的传输，是依照网络路由机制来进行的。路由功能由路由器(Router)来提供，具体包括：

> (1)异种网络互连，比如具有异种子网协议的网络互连；
>
> (2)子网协议转换，不同子网间包括局域网和广域网之间的协议转换：
>
> (3)数据路由，即将数据从一个网络依据路由规则转发到另一个网络：
>
> (4)速率适配，利用缓存和流控协议进行适配；
>
> (5)隔离网络，防止广播风暴，实现防火墙：
>
> (6)报文分片和重组，超过接口的MTU报文被分片，到达目的地之后的报文被重组：
>
> (7)备份、流量控制，如主备线路的切换和复杂流量控制等。

**1)路由原理**

路由器工作在OSI七层协议中的第3层，即网络层。其主要任务是接收来源于一个网络接口的数据包，通常根据此数据包的目地址决定待转发的下一个地址（即下一跳地址）。

路由器中维持着数据转发所需的路由表，所有数据包的发送或转发都通过查找路由表来实现。这个路由
表可以静态配置，也可以通过动态路由协议自动生成。

**2)路由器协议**

路由器是通过路由表来转发接收到的数据。转发策略可以是人工指定的，即通过静态配置路由的方法来指定。

在较小规模网络中，人工指定转发策略没有任何问题，但是在较大规模网络中（如跨国企业网络、ISP网络等），如果通过人工指定路由或转发策略的话，将会给网络管理员带来巨大工作量，并且管理、维护路由表也变得十分困难。为了解决这个问题，路由协议应运而生。

路由协议(Routing Protocol)是一种指定数据包转送方式的协议。路由协议是运行在路由器上的协议，可以让路由器自动学习到其他路由器的网络，并且在网络拓扑发生改变后自动更新其维护的路由表。

网络管理员只需要简单配置路由协议即可，相比人工配置转发策略、路由，工作量大大减少，同时避免了人为配置可能带来的差错。

路由协议通过在路由器之间共享路由信息来支持可路由协议。路由信息在相邻路由器之间传递，使得所有路由器获悉其他路由器的路径，以此路由协议创建路由表，描述网络拓扑结构：路由协议与路由器协同工作，执行路由选择和数据包转发功能。
一般来说，路由协议可分为**内部网关协议(IGP)**和**外部网关协议(EGP)**两类。

**(1)内网关协议。**在一个自治系统AS(Autonomous System)内运行的路由协议称为内部网关协议(Interior Gateway Protocol)。

内部网关协议可以划分为两类：**距离矢量路由协议和链路状态路由协议**。

> <u>距离矢量路由协议</u>采用的是**距离向量算法**：**IS-IS和OSPF采用的是链路状态算法**。

> 对于小型网络，采用基于距离向量算法的路由协议易于配置和管理，且应用广泛，但在面对大型网络时，不但其固有的环路问题变得更难解决，所占用的带宽也迅速增长，以至于网络无法承受。
> 因此对于大型网络，采用链路状态算法的IS-S和OSPF更为有效，并得到广泛应用。

(2)外部网关协议。在 AS 之间的路由协议称为外部网关协议(Exterior Gateway Protocol,EGP)。

> 外部网关协议最初采用的是EGP。EGP是为简单的树形拓扑结构设计的，随着越来越多的用户和网络加入Internet,给EGP带来了很多局限性。为了摆脱EGP局限性，IETF边界网关协议工作组制定了标准的边界网关协议(BGP)。

#### 2.5.5 网络工程

网络建设是一个复杂的系统工程，是对计算机网络、信息系统建设和项目管理等领域知识进行综合利用的过程。

作为系统架构设计师，应充分**分析和调研市场，确定网络建设方案。网络建设工程可分为网络规划、网络设计和网络实施**三个环节。

1. 网络规划

网络规划是网络建设的首要环节，也是至关重要的步骤，同时也是系统性过程。网络规划需要以需求为导向，兼顾技术和工程可行性。网络规划包括网络需求分析、可行性分析以及对现有网络的分析（需对现有网络进行优化升级时）。

2. 网络设计

网络设计是在网络规划基础上设计一个能解决用户问题的方案。网络设计包括网络总体目标确定、总体设计原则确定以及通信子网设计，设备选型，网络安全设计等。

3. 网络实施

网络实施是依据网络设计结果进行设备采购、安装、调试和系统切换（需对原有系统改造升级时)等。网络实施具体包括工程实施计划、网络设备验收、设备安装和调试、系统试运行和切换、用户培训等。

### 2.6 计算机语言

#### 2.6.1 计算机语言的组成

计算机语言(Computer Language)是指用于人与计算机之间交流的一种语言，是人与计算机之间传递信息的媒介。计算机语言主要由一套指令组成，而这种指令一般包括**表达式、流程控制和集合**三大部分内容。

> 表达式又包含变量、常量、字面量和运算符。
> 流程控制有分支、循环、函数和异常。
> 集合包括字符串、数组、散列表等数据结构。

编程人员可以通过这些指令来**指挥**计算机进行各种工作。

#### 2.6.2 计算机语言的分类

计算机语言的种类繁多，早期人们把计算机语言分成**机器语言、汇编语言和高级语言**三大类，而针对不同的处理器架构，机器语言和汇编语言又存在着许多种语言类。

近年来，随着计算机语言的不断发展，涌现出了众多其他语言，这里主要分别介绍机器语言、汇编语言、高级语言、建模语言和形式化语言等。

1. 机器语言

机器语言是最早使用的程序设计语言，是第一代计算机语言，是计算机自身具有的“本地语”。在计算机设计时，围绕的中心是指令，指令是一种基本的操作。

一台计算机处理功能的大小与指令的功能以及指令的多少有关。所有指令的集合称为**指令系统**，也就是机器语言。机器语言是计算机能够直接接收并能识别和执行操作的语言，其优点是可以被计算机直接理解和执
行，而且执行速度快、占用内存少。

由于每条机器指令就是一个0、1串，使用机器语言编程十分烦琐，且不易学、不易记、不易用、不易调试和维护，而且由于每台计算机的指令系统往往各不相同，所以，在一台计算机上执行的程序，要想在另一台计算机上执行必须另编程序，造成了重复工作。因此，机器语言是不可或缺的，但它又阻碍了计算机应用的发展，使计算机仅为少数专业人员所使用。

**1)机器语言的指令格式**

机器语言指令是一种二进制代码，由**操作码**和**操作数**两部分组成。计算机是通过执行指令来处理各种数据的。为了指出数据的来源、操作结果的去向及所执行的操作，一条指令必须包含下列信息。

> (1)操作码。它具体说明了操作的性质及功能。一台计算机可能有几十条至几百条指令，每一条指令都有一个相应的操作码，计算机通过识别该操作码来完成不同的操作。
> (2)操作数的地址。CPU通过该地址就可以取得所需的操作数。
> (3)操作结果的存储地址。把对操作数的处理所产生的结果保存在该地址中，以便再次使用。
> (4)下条指令的地址。执行程序时，大多数指令按顺序依次从主存中取出执行，只有在遇到转移指令时，程序指令的执行顺序才会改变。为了压缩指令的长度，可以用一个程序计数器(Program Counter,PC)存放指令地址。每执行一条指令，PC的指令地址就自动+1（设该指令只占一个主存单元)，指出将要执行的下一条指令的地址。当遇到执行转移指令时，则用转移地址修改PC的内容。由于使用了PC,指令中就不必明显地给出下一条将要执行指令的地址。

一条指令实际上包括两种信息即操作码和地址码。操作码用来表示该指令所要完成的操作(如加、减、乘、除、数据传送等)，其长度取决于指令系统中的指令条数。地址码用来描述该指令的操作对象，它或者直接给出操作数，或者指出操作数的存储器地址或寄存器地址（即寄存器名)。

指令包括**操作码域**和**地址**域两部分。根据地址域所涉及的地址数量，常见的指令格式有以下几种。

> (1)三地址指令。一般地址域中A1、A2分别确定第1、第2操作数地址，A3确定结果地址。下一条指令的地址通常由程序计数器按顺序给出。
> (2)二地址指令。地址域中A1确定第1操作数地址，A2同时确定第2操作数地址和结果地址。
> (3)单地址指令。地址域中A确定第1操作数地址。固定使用某个寄存器存放第2操作数和操作结果。因而在指令中隐含了它们的地址。
> (4)零地址指令。在堆栈型计算机中，操作数一般存放在堆栈顶的两个单元中，结果又放入栈顶，地址均被隐含，因而大多数指令只有操作码而没有地址域。
> (5)可变地址数指令。地址域所涉及的地址的数量随操作定义而改变。如有的计算机的指令中的地址数可少至0个，多至6个。

2. 汇编语言

为了降低使用机器语言编程的难度，人们进行了一种有益的改进，即用一些简洁的英文字母、符号串来替代一个特定指令的二进制串，例如，用ADD代表加法，MOV代表数据传递等，这样一来，人们很容易读懂并理解程序在做什么，编程、纠错及维护都变得方便了，这种程序设计语言就称为汇编语言，即第二代计算机语言。

与机器语言相比，汇编语言有许多优点。程序设计人员用汇编语言写出的程序，代码短、省空间、效率高。但是汇编语言仍是一种面向机器的语言，通用性差。它要求程序设计人员详细了解计算机的硬件结构，如计算机的指令系统、CPU中寄存器的结构及存储单元的寻址方式等，并且要求程序设计人员具有较高的编程技巧。

汇编语言是机器语言的符号化描述，所以也是面向机器的程序设计语言。然而，计算机并不认识这些符号，这就需要一个专门的程序，专门负责将这些符号翻译成二进制的机器语言，这种翻译程序被称为汇编程序。汇编语言同样十分依赖于机器硬件，可移植性不好，但效率十分高，针对计算机特定硬件编制的汇编语言程序，能准确发挥计算机硬件的功能和特长，程序精炼且质量高，所以至今仍是一种常用的强有力的软件开发工具。

**1)汇编语言的语句格式**

语句(Statements)是汇编语言程序的基本组成单位。在汇编语言源程序中有3种语句：**指令语句、伪指令语句和宏指令语句（或宏调用语句）**。

> **(1)指令语句。**指令语句又称为机器指令语句，将其汇编后能产生相应的机器代码，这些代码能被CPU直接识别并执行相应的操作。基本的指令有ADD、SUB和AND等，书写指令语句时必须遵循指令的格式要求。
> **指令语句可分为传送指令、算术运算指令、逻辑运算指令、移位指令、转移指令和处理机**
> **控制指令等类型。**
> **(2)伪指令语句。**伪指令语句指示汇编程序在汇编源程序时完成某些工作，例如为变量分配存储单元地址，给某个符号赋一个值等。伪指令语句与指令语句的区别是：伪指令语句经汇编后不产生机器代码，而指令语句经汇编后要产生相应的机器代码。另外，**伪指令语句所指示的操作是在源程序被汇编时完成的**，而**指令语句的操作必须在程序运行时完成**。
> **(3)宏指令语句。**在汇编语言中，还允许用户将多次重复使用的程序段定义为宏。宏的定义必须按照相应的规定进行，每个宏都有相应的宏名。在程序的任意位置，若需要使用这段程序，只要在相应的位置使用宏名，即相当于使用了这段程序。因此，宏指令语句就是宏的引用。

**2)指令语句和伪指令语句格式**

指令语句和伪指令语句有相同的语句格式，每条语句均由如下4个字段(Fields)组成：**名字、操作符、操作数和注释**。其中，每个字段的意义如下。

> **(1)名字字段(Name Field)。**除少数伪指令语句必选外，其他多数语句是一个任选字段。在指令语句中，这个字段的名字叫标号，且一定是用冒号“：”作为名字字段的结束符。标号是一条指令的符号地址，它代表该指令代码的第1个字节单元地址。通常在一个程序段的入口指令语句处选用标号。当程序需要转入这个程序时，就可直接引用这个标号。在伪指令语句中，对于不同的伪指令这个字段的名字有所不同，它们可以是常量名、变量名、段名、过程名等。
> 伪指令语句的名字字段后面用空格作为结束符，不得使用冒号，这是它与指令语句的一个重要区别。伪指令语句的这些名字，有的代表一个具体常数值，有的作为存储单元的符号地址。它们都可以在指令语句和伪指令语句的操作数字段中直接加以引用。
> **(2)操作符字段(Operator Field)。**这是一条语句不可缺少的主要字段，它反映了这个语句的操作要求。在指令语句中，这个字段就是指令助记符，如MOV、ADD和SUB等，它表示程序在运行时CPU完成的操作功能。在伪指令语句中，这个字段就是本章后面将要介绍的各种伪指令，如数据定义伪指令DB、DW、DD:段定义伪指令SEGMENT;过程定义伪指令PROC等，它表示汇编程序如何汇编（翻译）源程序各条语句。这些伪指令的操作要求都是由汇编程序在汇编源程序时完成的。
> **(3)操作数字段(Operand Field)。**在一条语句中，本字段是否需要、需要几个以及需要什么形式的操作数等都由该语句的操作符字段（指令助记符/伪指令）确定。如果需要本字段，那么本字段与操作符字段用空格或制表符Tab作为分界符。如果本字段要求有两个或两个以上操作数，那么各操作数之间用逗号“，”或空格分隔。
> **(4)注释字段(Comment Field)。**这是一个任选字段。如选用本字段，必须以分号“：”作为字段的开始符。本字段可由程序设计人员编写任意字符串，其内容不影响程序和指令的功能，它们也不出现在目标程序中。这个字段为提高程序的可读性和可维护性提供了方便，它对某些程序段或指令加以注解，说明它们的功能和意义。当需要进行较多的文字说明时，一条语句可以只有注释字段，这时该语句的第1个有效字符必须是分号。

3. 高级语言

由于汇编语言依赖于硬件，使得程序的可移植性极差，而且编程人员在使用新的计算机时还需学习新的汇编指令，大大增加了编程人员的工作量，为此诞生计算机高级语言。高级语言不是一门语言，而是一类语言的统称，它比汇编语言更贴近于人类使用的语言，易于理解、记忆和使用。由于高级语言和计算机的架构、指令集无关，因此它具有良好的可移植性。高级语言应用非常广泛，世界上绝大多数编程人员都在使用高级语言进行程序开发。

常见的高级语言包括C、C+、Java、VB、C#、Python、Ruby等。下面介绍几种常见的高级语言。

**1)C语言**

C语言是20世纪70年代由美国Bell实验室为描述UNIX操作系统而开发的一种系统描述语言。C语言同时具有汇编语言和高级语言的优点：

> 语言简洁紧凑，使用方便灵活，运算符极其丰富，可移植性好，可以直接操作硬件，生成的目标代码质量高，程序执行效率高。

因此，C语言一出现便在国际上广泛流行起来。

20世纪80年代初，随着微型计算机的日益普及，出现了许多C语言版本。由于没有统一的标准，所以这些C语言之间出现了一些不兼容的地方。

美国国家标准学会(ANSI)于1989年发布了第1个完整的C语言标准，称为ANSI C标准，简称C89。1990年C89被国际标准化组织(International Standard Organization,IS0)采纳，称为ISO/IEC 9899:1990(简称为C90)标准。1999年，在对C语言做了一些必要的修正和完善后，发布命名为IS0/IEC 9899:1999(简称为C99)C语言新标准。之后还有2011年发布的IS0/IEC 9899:2011(简称为C11),最新的C语言标准是ISO/IEC 9899:2018(简称为C18)。

**2)C++**
美国Bell实验室于1980年开始对C语言进行改进和扩充，引入面向对象程序设计思想，并于1983年将这个扩充的C语言正式命名为C++。C++不仅保持了C语言简洁、高效和可取代汇编语言等优点，而且还在模块化结构的基础上增加了对面向对象程序设计的支持。

美国国家标准化协会ANSI和国际标准化组织ISO一起对C++语言进行了标准化工作，并于1998年正式发布了C++语言的第1个国际标准IS0/IEC 14882:1998(简称为C++98)。此后，在C++ 98的基础上增加了许多新特性后，发布了IS0/IEC 14882:2011(简称为C+11)标准，进一步改进后依次发布了SO/IEC 4882:2014(C++14)、IS0/IEC 14882:2017(C++17)、IS0/IEC 14882:2020(C+20),C++20中引入了更多特性，以更简单地编写和维护代码。

面向对象程序设计是软件开发方法的一场革命，它代表了计算机程序设计的新的思维方法。该方法与通常的结构化程序设计不同，它支持一种概念，即旨在使计算机问题的求解更接近人的思维活动，人们能够利用C++语言充分挖掘硬件的潜力，在减少开销的前提下提供更有力的软件开发工具。

**3)Java**

Java语言是1991年美国SUN公司提出的面向计算机网络、完全面向对象的程序设计语言。Java语言的口号是“一次编写，处处运行”。

随着Internet/Intranet的发展，加上Java语言本身结构的新颖、能实时操作、可靠又安全、最适合于浏览器编程的特点，Java语言被公认为Internet上的“世界语”。

Java是纯面向对象的语言，其可重用性好，编程效率高，安全性好，程序运行时系统不容易崩溃。更重要的是其跨平台的特性，Java语言新颖的、完全开放的软件技术思路，做到了与硬/软件平台无关，使Java程序可以在网络上任何装有Java解释器的计算机上运行。

**4)Python**

Python是一种结合了解释性、编译性、互动性和面向对象的脚本语言，由荷兰人吉多·范罗苏姆(Guido van Rossum)于1989年设计，1991年公开发布了Python的第1个版本。

Python是纯粹的自由软件，具有简洁、易学、易读、易维护、可移植、可嵌入、可扩展互动等特点，特别是具有强大的标准库，提供了系统管理、网络通信、文本处理、数据库接口、图形系统、XML处理等额外的功能。Python的主要应用包括Web应用、科学计算、大数据分析处理等。

4. 建模语言

软件开发技术和模型的表现手法层出不穷，但在目前的软件开发方法中，面向对象的方法占据着主导地位。面向对象方法的主导地位也决定着软件开发过程模型化技术的发展，面向对象的建模技术方法也就成为主导的方法。

公认的面向对象建模语言出现于20世纪70年代中期。从1989年到1994年，其数量从不到10种增加到了50多种。20世纪90年代中期，一批新方法出现了，其中最引人注目的是Booch1993、OOSE和OMT-2等。

面对众多的建模语言，用户由于没有能力区别不同语言之间的差别，因此很难找到一种比较适合其应用特点的语言：其次，众多的建模语言实际上各有千秋，极大地妨碍了用户之间的交流。因此，在客观上有必要在精心比较不同的建模语言优缺点及总结面向对象技术应用实践的基础上，组织联合设计小组，根据应用需求，取其精华，去其糟粕，求同存异，统一建模语言工作，之后先后推出了UML的多个版本。

UML的发展历史如图2-24所示。在美国，截至1996年10月，UML获得了工业界、科技界和应用界的广泛支持，已有700多个公司表示支持采用UML作为建模语言。1997年10月17日，OMG采纳UML1.1作为面向对象技术的标准建模语言。在我国，UML也成为广大软件公司的建模语言。1999年底，UML已稳占面向对象技术市场的90%，成为可视化建模语言事实上的工业标准。

![image-20230217下午33603089](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8833603089.png)

UML是一种定义良好、易于表达、功能强大且普遍适用的建模语言。它的作用不限于支持面向对象的分析与设计，还支持从需求分析开始的软件开发的全过程。UML成为“标准”建模语言的原因之一在于与程序设计语言无关。而且，UML符号集只是一种语言而不是一种方法学，不需要任何正式的工作产品。因为语言与方法学不同，它可以在不做任何更改的情况下很容易地适应任何公司的业务运作方式。

**1)UML组成要素**

UML由3个要素构成：UML的基本构造块（事物、关系）、图（支配基本构造块如何放置在一起的规则)和运用于整个语言的公用机制。

**(1)事物**。

UML中有4种事物：**结构事物、行为事物、分组事物和注释事物**。

①结构事物。结构事物是UML模型中的名词。它们通常是模型的静态部分，描述概念或物理元素。结构事物包括**类(Class)、接口(Interface)、协作(Collaboration)、用例(UseCase)、主动类(Active Class)、构件(Component).、制品(Artifact)和结点(Node)。**
各种结构事物的图形化表示如图2-25所示。

![image-20230217下午34208076](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8834208076.png)

**②行为事物。**

行为事物是UML模型的动态部分。它们是模型中的动词，描述了跨越时间和空间的行为。行为事物包括**交互(Interaction)、状态机(State Machine)和活动(Activity)**。各种行为事物的图形化表示如图2-26所示。

![image-20230217下午34322531](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8834322531.png)

状态机描述了一个对象或一个交互在生命期内响应事件所经历的状态序列。

单个类或一组类之间协作的行为可以用状态机来描述。

一个状态机涉及一些其他元素，包括**状态、转换（从一个状态到另一个状态的流)、事件（触发转换的事物）和活动（对一个转换的响应）**。在图形上，把**状态表示为一个圆角矩形，通常在圆角矩形中含有状态的名称及其子状态**。

活动是描述计算机过程执行的步骤序列，注重步骤之间的流而不关心哪个对象执行哪个步骤。**活动的一个步骤称为一个动作**。在图形上，把动作画成一个圆角矩形，在其中含有指明其用途的名字。状态和动作通过不同的语境来区别。
**交互、状态机和活动**是可以包含在UML模型中的基本行为事物。在语义上，这些元素通常与各种结构元素（主要是类、协作和对象）相关。

**③分组事物。**

分组事物是UML模型的组织部分，是一些由模型分解成的“盒子”。在**所有的分组事物中，最主要的分组事物是<u>包(Package)</u>**。

包是把元素组织成组的机制，这种机制具有多种用途。结构事物、行为事物甚至其他分组事物都可以放进包内。包与构件（仅在运行时存在)不同，它纯粹是概念上的，即它仅在开发时存在。包的图形化表示如图2-27所示。

![image-20230217下午34805331](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217下午34805331.png)

④注释事物。注释事物是UML模型的解释部分。这些注释事物用来描述、说明和标注模
型的任何元素。注解(Not)是一种主要的注释事物。注解是一个依附于一个元素或者一组元
素之上，对它进行约束或解释的简单符号。注解的图形化表示如图2-28所示。

![image-20230217下午35000577](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8835000577.png)

**(2)关系。**

> UML中有4种关系：**依赖、关联、泛化和实现。**

①依赖是两个事物间的语义关系，其中一个事物（独立事物）发生变化会影响另一个事物(依赖事物)的语义。在图形上，把一个依赖画成一条可能有方向的虚线，如图2-29所示。

![image-20230217下午35016672](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8835016672.png)

②关联是一种结构关系，它描述了一组链，链是对象之间的连接。聚集是一种特殊类型的关联，它描述了整体和部分间的结构关系。关联和聚集的图形化表示如图2-30和图2-31所示。

![image-20230217下午35112106](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8835112106.png)

在关联上可以标注重复度和角色。

③泛化是一种特殊/一般关系，特殊元素（子元素）的对象可替代一般元素（父元素）的对象。用这种方法，子元素共享了父元素的结构和行为。在图形上，把一个泛化关系画成一条带有空心箭头的实线，它指向父元素，如图2-32所示。

![image-20230217下午35401725](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8835401725.png)

④实现是类元之间的语义关系，其中一个类元指定了由另一个类元保证执行的契约。在两种情况下会使用实现关系：一种是在接口和实现它们的类或构件之间：另一种是在用例和实现它们的协作之间。在图形上，把一个实现关系画成一条带有空心箭头的虚线，如图2-33所示。

![image-20230217下午35449117](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8835449117.png)

这4种关系是UML模型中可以包含的基本关系事物。

它们也有变体，例如，依赖的变体有精化、跟踪、包含和延伸。

**(3)UML中的图。**

图是一组元素的图形表示，大多数情况下把图画成顶点（代表事物）和弧（代表关系）的连通图。为了对系统进行可视化，可以从不同的角度画图，这样图是对系统的投影。

UML2.0提供了13种图，分别是**类图、对象图、用例图、序列图、通信图、状态图、活动图、构件图、部署图、组合结构图、包图、交互概览图和计时图。序列图、通信图、交互概览图和计时图均被称为交互图**。

用例图(Use Case Diagram)展现了一组用例、参与者(Actor)以及它们之间的关系。用例图通常包括用例和参与者以及它们之间的关系，如图2-34所示。

![image-20230217下午35827126](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230217%E4%B8%8B%E5%8D%8835827126.png)

用例之间有扩展关系(<< extend >>)和包含关系(<< include >>)，参与者和用例之间有关联关系，用例与用例、参与者与参与者之间有泛化关系。

用例图用于对系统的静态用例视图进行建模。这个视图主要支持系统的行为，即该系统在它的周边环境的语境中所提供的外部可见服务。当对系统的静态用例视图建模时，可以用下列两种方式来使用用例图。

**①对系统的语境建模**。对一个系统的语境进行建模，包括围绕整个系统画一条线，并声明有哪些参与者位于系统之外并与系统进行交互。在这里，用例图说明了参与者以及他们所扮演的角色的含义。

**②对系统的需求建模**。对一个系统的需求进行建模，包括说明这个系统应该做什么（从系统外部的一个视点出发)，而不考虑系统应该怎样做。在这里，用例图说明了系统想要的行为。

通过这种方式，用例图使人们能够把整个系统看作一个黑盒子，采用矩形框表示系统边界：可以观察到系统外部有什么，系统怎样与哪些外部事物相互作用，但却看不到系统内部是如何工作的。

**2)UML5种视图**

对于同一个系统，不同人员所关心的内容并不一样。因此一个系统应从不同的角度进行描述，从一个角度观察到的系统称为一个视图(View),每个视图表示系统的一个特殊的方面。

按照图本身具有的特点，可以把图形划分为5类视图，分别是**用例视图、逻辑视图、进程视图、实现视图和部署视图**，其中的用例视图居于中心地位。

**(1)用例视图：**描述系统的功能需求，方便找出用例和执行者：它展示了一个外部用户能够观察到的系统功能模型，主要包括用例图。对此关心的开发团队成员主要包括客户、分析者、设计者、开发者和测试者。
**(2)逻辑视图：**描述如何实现系统内部的功能：系统的静态结构和因发送消息而出现的动态协作关系。逻辑视图包含**类图和对象图、状态图、顺序图、合作图和活动图**。
**(3)进程视图**：描述系统的并发性，并处理这些线程间的通信和同步：它将系统分割成并发执行的控制线程及处理这些线程的通信和同步。进程视图主要包括**状态图、顺序图、合作图、活动图、构件图和配置图**：对此关心的开发团队成员主要包括开发者和系统集成者。
**(4)实现视图**：描述系统代码构件组织和实现模块及它们之间的依赖关系；实现视图主要包括构件图：对此关心的开发团队成员主要有设计者、开发者和测试者。
**(5)部署视图**：定义系统中软硬件的物理体系结构及连接、哪个程序或对象驻留在哪台计算机上执行：主要包括配置图：对此关心的开发团队成员主要包括开发者、系统集成者和测试者。

5. 形式化语言

形式化方法是把概念、判断、推理转化成特定的形式符号后，对形式符号表达系统进行研究的方法，是用具有精确语义的形式语言书写的程序功能描述，它是设计和编制程序的出发点，也是验证程序是否正确的依据。形式化方法就是用符号化的数学变换把需求分析准确地表述出来，这样可以确保和需求的一致性，并能用于分析和验证应用程序。毕竟，一个程序本身就是一个正式的规范化语言。

**1)形式化规格说明语言**

为了书写形式化的规格说明，许多计算机科学家从不同的角度，提出了多种不同的形式化规格说明语言。由于所根据的数学基础不同，方法与途径不同，形成了以下几个主要流派。

> (1)公理方法，利用前置条件与后置条件描述程序的行为，这个学派的代表人物有Floyd、Hoare和ijkstra。
> (2)基于集合论和一阶谓词演算的meta-IV语言和Z语言，这种语言己广泛用于书写大型软件的规格说明与设计。在描述程序语言的指称语义时，利用这类语言可以方便地定义高阶函数，并由此定义程序语言的复杂控制构造的意义。利用meta-IV描述的形式化软件开发方法，称为维也纳开发方法，简称VDM。
> (3)代数规格说明，是关于抽象数据类型的代数描述，语言有OBJ及ACT。
> (4)进程描述语言，用于描述开发进程的行为。主要有Hoare的顺序通信进程CSP及R.Milner的通信系统理论CCS。

专用的规格说明语言已有大量的成功实例，例如，在计算机网络与通信系统中，广泛地使用形式化方法来研制与开发各种网络协议。目前国际标准化组织认可的形式化规格说明语言有**ISO LOTOS、ISO ESTELLE、ISO SDL、CCITT Z.IO0和CCITT SDL**等。

**2)形式化方法的分类**

针对不同的系统，需要采用不同的形式化方法，每一种形式化方法都有不同的数学定义，可通过类型分析决定应用程序采用何种形式化方法。

> 一是**面向对象的形式化方法**，通过定义状态和操作进行建模，如Z语言、VDM、B、Object-Z等方法：
> 二是**面向属性的形式化方法**，如OBJ3、Larch等方法：
> 三是**基于并发性的形式化方法**，如CCS、ACP、CSP、LOTOS等：
> 四是**基于实时性的形式化方法**，如TRIO、RTOZ等方法。

(1)根据描述方式，可将**形式化方法**归为**模型描述的形式化方法**和**性质描述的形式化方法**两类。

> 模型描述的形式化方法通过构造一个数学模型来直接描述系统或程序：
> 性质描述的形式化方法通过对目标软件系统中不同性质的描述来间接描述系统或程序。

(2)根据表达能力，可将形式化方法大致分为**模型方法、代数方法、进程代数方法、逻辑方法和网络模型方法**5类。

> **模型方法**对系统状态和改变系统状态的动作直接给出抽象定义，并进行显式描述。该方法的缺陷是不能显式地表示并发。
> **代数方法**通过定义不同操作系统的关系，隐式地描述操作。代数方法也不能显式地表示并发。
> **进程代数方法**通过一个显式模型来描述并发过程，将并发性归为非确定性，通过交错语义来表示系统行为。
> **逻辑方法**通过描述程序状态规范和时间状态规范的逻辑方法来描述系统特性，如CSS、CSP和ACP等。
> **网络模型方法**通过独立描述网络中每一个结点，显式地给出系统的并发模型。如Petri网。

**3)形式化方法的开发过程**

按照软件工程“自顶向下、逐步求精”的原则，软件生命周期可分为**可行性分析、需求分析、体系结构设计、详细设计、编码和测试发布6个阶段**，形式化方法贯穿软件工程整个生命周期。

**(1)可行性分析。**可行性分析是对待开发系统提供一种综合性的分析方法。综合各方面因素论证待开发系统是否可行，为开发过程提出综合评价和决策依据。由于形式化方法的符号演算系统仍不能完全表达自然语言，所以在此阶段的应用仍是一项巨大挑战。
**(2)需求分析。**需求分析是在软件开发过程的早期阶段，将用户需求转换为说明文档。一般非形式化的描述可能导致描述的不明确和需求的不一致，可能导致编程错误，影响程序的使用和可靠性。形式化方法则要求明确描述用户需求。
**(3)体系结构设计。**体系结构设计阶段的根本目的是将用户需求转换为计算机可以实现的目标系统。本阶段侧重描述软件系统的接口、功能和结构。形式化方法对于软件需求描述的优点同样适用于软件设计的描述。由于需求阶段功能描述并不能完全实现，所以形式化方法在此阶段的应用仍存在问题。使用者可采用**半形式化方法**来完成此阶段的工作。
**(4)详细设计。**详细设计阶段的形式化是以体系结构规范为基础进行精化描述的过程。通过此阶段的形式化描述能够检验需求描述和用户需求是否一致。为使形式化方法更适用于详细设计和精化过程，可将各种形式的规范联系起来。
**(5)编码。**自动代码生成器目前能将一些规模较小软件系统的形式化描述直接转换成可执行程序。在简化软件开发过程的同时不仅节约了资源，还增强了软件的可靠性。
**(6)测试发布。**软件开发的最后阶段是测试发布。在软件投入运行前，需要对软件开发各阶段的文档以及程序源代码进行检查。对于测试来讲，形式化方法可用于测试用例的自动生成，保证测试用例的覆盖率。

**4)形式化规格语言一Z语言**

Z语言是一种形式化语言，它是具有“状态一操作”风格的形式化规格说明语言，在很多大型软件项目中获得成功应用。它以一阶逻辑和集合论作为形式语义基础，将函数、映射、关系等教学方法用于规格说明。

Z语言借助模式来表达系统结构，它提供了一种能独立于实现的、可推理的系统数学模型，具有精确、简洁、无二义性的优点，有利于保证程序的正确性，尤其是适用于无法进行现场调试的高安全性系统的开发。

Z语言最主要的结构是模式，一个模式**由变量说明和谓词约束两部分组成**，可用来描述系统状态和操作。
Z语言建立于**集合论和数理逻辑**的基础上。

集合论包括标准的**集合运算符、笛卡尔积和幂集**，数理逻辑包括**一阶谓词演算，二者合二为一**，形成了一个易学易用的数学语言。

Z语言具备将数学进行结构化的方式。数学对象与它上面的操作结合起来形成构型(Schema)。构型语言可被用来描述系统的状态及改变系统的性质，对一个设计的可能求精细化进行推理。

Z语言是一个强类型系统。数学语言中的每个对象都有唯一的类型，类型作为当前的规格说明中一个最大集合来表示。类型在程序设计实践中是非常有用的概念，据此可以检查一个规格说明中每个对象的类型的一致性。

Z语言可以使用自然语言。人们用数学陈述问题，发掘解法，证明所做的设计满足规格说明的要求。同时，人们可以使用自然语言将数学与现实世界中的对象相关联，因为人们可以选择富有含义的变量名和辅以注文。一个好的规格说明应当是读者一看就懂的白话文。

Z语言可以进行求精。通过构造一项设计的模型，利用简单的数学类型标识所需的行为，可以开发一个系统。通过构造关于一个系统设计决策的另一个模型，作为第1个模型的一个实现，就是一次求精。这种求精的过程可以一直继续到产生可执行的代码。

Z语言是具有强大构造机构的数学语言，同自然语言结合起来，它可被用来产生形式化的规格说明。利用数理逻辑的证明技术，可以对执行规格说明进行推理。对一个规格说明进行求精，得到接近于可执行代码的另一个描述。但是，Z语言没有提供关于计时的或并发的行为的描述，而有些语言适于做这样的描述，如CSP和CCS。可以将Z语言与这些形式化方法结合起来，产生含并发行为的系统的规格说明。

### 2.7 多媒体

#### 2.7.1 多媒体概述

媒体(Media)是承载信息的载体，即信息的表现形式（或者传播形式），如文字、声音、图像、动画和视频等。按照ITU-T建议的定义，媒体可分为感觉媒体、表示媒体、显示媒体存储媒体和传输媒体。

**(1)感觉媒体(Perception Medium)**,指的是用户接触信息的感觉形式，如视觉、听觉和触觉等。
**(2)表示媒体(Representation Medium)**,指的是信息的表示形式，如图像、声音、视频等。
**(3)表现媒体(Presentation Medium)也称为显示媒体**，指表现和获取信息的物理设备，如键盘、鼠标、扫描仪、话筒和摄像机等为输入媒体：显示器、打印机和音箱等为输出媒体。
**(4)存储媒体(Storage Medium)**,指用于存储表示媒体的物理介质，如硬盘、软盘、磁盘、光盘、ROM及RAM等。
**(5)传输媒体(Transmission Medium)**,指传输表示媒体的物理介质，如电缆、光缆和电磁波等。

多媒体(Multimedia)就是指<u>利用计算机技术把文本、图形、图像、声音、动画和电视等多种媒体综合起来，使多种信息建立逻辑连接，并能对它们进行获取、压缩、加工处理和存储，集成为一个具有交互性的系统</u>。当前，多媒体技术已被广泛应用于工业、医疗、军事、轨道交通、办公、教学、娱乐和智能家电等领域。

1. 多媒体的重要特征

多媒体有4个重要的特征。
**(1)多维化。**多维化是指媒体的多样化。它提供了多维化信息空间下的交互能力和获得多维化信息空间的方法，如输入、输出、传输、存储和处理的手段与方法等。
**(2)集成性。**集成性不仅指多媒体设备集成，而且指多媒体信息集成或表现集成。
**(3)交互性。**交互性是人们获取和使用信息时变被动为主动的最重要的标志。交互性可向用户提供更有效地控制和使用信息的手段，可增加人们对信息的注意和理解。
**(4)实时性。**实时性是指多媒体技术中涉及的一些媒体。例如，音频和视频信息具有很强的时间特性，会随着时间的变化而变化。

多媒体技术主要包括感觉媒体的**表示技术、数据压缩技术、多媒体存储技术、多媒体数据库技术、超文本与超媒体技术、多媒体信息检索技术、多媒体通信技术、人机交互技术以及多媒体计算机及外部设备**等。

2. 多媒体系统的基本组成

多媒体系统通常由硬件和软件组成。其中，多媒体硬件主要包括计算机主要配置和外部设备以及与各种外部设备的控制接口。多媒体软件主要包括**多媒体驱动软件、多媒体操作系统、多媒体数据处理软件、多媒体创作工具软件和多媒体应用软件**等。图2-35给出了多媒体系统的基本组成。

![image-20230220上午103846018](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230220%E4%B8%8A%E5%8D%88103846018.png)

3. 多媒体技术应用

目前，多媒体技术主要涉及以下几个方面，且在这些方面具有非常广阔的应用前景。首先是对图像信息的处理，通过多媒体的压缩功能，能够将图像信息进行各种形式的转换，从而保证图像信息的传递性。其次是对音频信息的处理，多媒体技术能够通过音频的合成产生人们需要的一些特定语音信息。此外，当前非常流行的语音转换功能能够实现语音信息和文本信息之间的良好转换，从而极大地方便人们的生活和工作。

#### 2.7.2 多媒体系统的关键技术

1. 视音频技术

视频技术包括**视频数字化**和**视频编码技术**两个方面。视频数字化是将模拟视频信号经模数转换变换为计算机可处理的数字信号，使计算机可以显示和处理视频信号。

> **视频编码技术**是将数字化的视频信号经过编码成为视频信号，从而可以录制或播放。
> **音频技术**包括**音频数字化、语音处理、语音合成及语音识别**4个方面。随着计算机的普及，如何给不熟悉计算机的人提供一个友好的人机交互手段，是人们感兴趣的问题，而语音识别技术就是其中自然的一种交流手段。

**1)视音频编码**

编解码器指的是能够对一个信号或者一个数据流进行变换的设备或者程序。视音频编码的目的是对视音频数据进行传输和存储，在很多多媒体数据流中，往往需要同时包含音频数据和视频数据，这时通常会加入一些用于音频和视频数据同步的元数据（如字幕）。通常，这种编码后的封装是通过视频文件格式来实现的，如常见的*.mpg、*.avi、*.mov、*.mp4、*.m、*.ogg和*.ta等。

**2)视音频压缩方法**

目前，视音频压缩方法有上百种，这些方法总体上可归类为**有损(Lossy)压缩和无损(Lossless)压缩**两类。无损压缩也即压缩前和解压缩后的数据完全一致。多数的无损压缩都采用RLE行程编码算法。而有损压缩意味着解压缩后的数据与压缩前的数据不一致，在压缩的过程中要丢失一些人眼和人耳不敏感的图像或音频信息，这些丢失的信息是不可恢复的。

无损压缩常见的格式有WAV、PCM、TTA、FLAC、AU、APE、TAK和WavPack(WV)等；

有损压缩常见的格式有MP3、Windows Media Audio(WMA)、Ogg Vorbis(OGG)等。

2. 通信技术

通信技术是多媒体系统中的一项关键技术，是指将信息从一个地点传送到另一个地点所采取的方法和措施。这里所说的通信技术仅仅涵盖多媒体系统采用的通信方法。

通信技术通常包括了**数据传输信道技术**和**数据传输技术**。

**数据传输信道**是指通信的物理介质，包括同轴电缆、双绞线、光纤、越洋海底电缆、微波信道、短波信道、无线通信和卫星通信等。

**数据传输技术**是指在物理介质上如何组织、传送数据的方法，包括基带传输、频带传输及调制技术、同步技术、多路复用技术、数据交换技术、编码、加密、差错控制技术和数据通信网、设备、协议等。

3. 数据压缩技术

在多媒体系统中，由于所涉及的各种媒体信息主要是非常规数据类型，如图形、图像、视频和音频等，这些数据所需要的存储空间是十分巨大的。为了使多媒体技术达到实用水平，除了采用新技术手段增加存储空间和通信带宽外，对数据进行有效压缩将是多媒体发展中必须解决的最关键技术之一。

**数据压缩的算法**非常多，不同特点的数据有不同的数据压缩算法（也就是编码方式），按类别分主要存在以下3类。

> **(1)即时压缩和非即时压缩。**即时/非即时压缩的区别在于信息在传输过程中被压缩还是信息压缩后再传输。即时压缩一般应用在影像、声音数据的传送中。即时压缩常用到专门的硬件设备，如压缩卡等。
> **(2)数据压缩和文件压缩。**数据压缩是专指一些具有时间性的数据，这些数据常常是即时采集、即时处理或传输的。而文件压缩是指对将要保存在磁盘等物理介质的数据进行压缩。
> **(3)无损压缩与有损压缩。**无损压缩是利用数据的统计冗余进行压缩，通常无损压缩的压缩比比较低。而有损压缩是利用了人类对视觉、听觉对图像、声音中的某些频率成分不敏感的特性，允许压缩的过程中损失一定的信息。

国际上已广泛使用数据压缩技术处理各类图形、图像、视频数据，比较流行的几种编码格式已形成国际编码标准。

**(1)静态图像压缩编码的国际标准。**

联合图像专家小组标准(Joint Photographic Experts Group,JPEG)是一种对静态图像压缩的编码算法。“联合”的含义是：国际电报电话咨询委员会(Consultative Committee on International Telephone and Telegraph,CCITT)和国际标准化协会联合组成的图像专家小组。静态图像压缩标准有JPEG、JPEG2000。

**(2)动态图像视频编码标准(MPEG)。**

运动图像专家组(Moving Picture Experts Group,MPEG)是专门制定多媒体领域内的国际标准的一个组织。该组织成立于1988年，由全世界大约300名多媒体技术专家组成。MPEG标准是面向运动图像压缩的一个系列标准。目前有MPEG-1、MPEG-2、MPEG-4、MPEG-7、MPEG-21、DVI.

**(3)视频编解码器标准(H.26L)。**

H.26L标准最初是由ITU-T的VCEG(Video Coding Experts Group)在1997年制定的一个视频编码标准，ISO/IEC MPEG和ITU-T VCEG联合组成了新的组织Joint Video Team(JVT)的H.26L研究，在2002年第H.26L标准正式确定。H.26L旨在提供更高的压缩效率和更灵活的网络适应性，以及增强对于差错的健壮性，适用于可视电话和视频会议等实时视频通信应用。

4. 虚拟现实(VR)/增强现实(AR)技术

虚拟现实(Virtual Reality,VR)又称人工现实、临境等，是近年来十分活跃的技术领域，是多媒体发展的更高境界，VR技术涵盖了传统多媒体技术的所有内容。VR是一种可以创建和体验虚拟世界的计算机仿真系统，它利用计算机生成一种模拟环境，使用户沉浸到该环境中，让人有种身临其境的感觉。

VR采用计算机技术生成一个逼真的视觉、听觉、触觉、味觉及嗅觉的感知系统，用户可以用人的自然技能与这个生成的虚拟实体进行交互操作，其概念包含3层含义。

* 虚拟实体是用计算机生成的一个逼真的实体。
* 用户可以通过人的自然技能（头部转动、眼动、手势或其他身体动作）与该环境交互。
* 要借助一些三维传感设备来完成交互动作，常用的有头盔立体显示器、数据手套、数据
  服装和三维鼠标等。

增强现实(Augmented Reality,AR)技术是指把原本在现实世界的一定时间和空间范围内很难体验到的实体信息（视觉信息、声音、味道和触觉等），通过模拟仿真后，再叠加到现实世界中被人类感官所感知，从而达到超越现实的感官体验。增强现实的出现与计算机图形图像技术、空间定位技术和人文智能(Humanistic Intelligence)等技术的发展密切相关。

> **(1)计算机图形图像技术。**增强现实的用户可以戴上透明的护目镜，透过它看到整个世界，连同计算机生成而投射到这一世界表面的图像，从而使物理世界的景象超出用户的日常经验之外。这种增强的信息可以是在真实环境中与之共存的虚拟物体，也可以是实际存在的物体的非几何信息。
> **(2)空间定位技术。**为了改善效果，增强现实所投射的图像必须在空间定位上与用户相关。当用户转动或移动头部时，视野变动，计算机产生的增强信息随之做相应的变化。
> **(3)人文智能。**该技术以将处理设备和人的身心能力结合起来为特点，并非仿真人的智能，而是试图发挥传感器、可穿戴计算等技术的优势，使人们能够捕获自己的日常经历、记忆及所见所闻，并与他人进行更有效的交流。

随着计算机图形学、人机接口技术、多媒体技术、传感技术和网络技术等快速发展，虚拟现实和增强现实技术已进入应用阶段，开始对教育、工业生产、旅游、建筑、医疗等领域带来颠覆性影响。
VR/AR技术主要分为**桌面式、分布式、沉浸式和增强式**4种。表2-7给出了这4类VR/AR的具体定义和特点。

![image-20230220上午112723757](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230220%E4%B8%8A%E5%8D%88112723757.png)

VR/AR技术发展至今，虽然被广泛应用，其主要关键技术还有待深入研究，这些关键技术主要包括：

**(1)数据采集与优化传输技术。**数据采集主要解决如何获取光照、火焰、动态地形等自然现象的数据问题，通常用3种设备获取，即全向相机、高速摄像机和激光设备。优化数据传输技术是要满足低功耗、低延时、高效率等特点，保证数据传输的可靠性。
**(2)交互与情形实时再现技术。**交互技术的接触方式可分为**力觉反馈**和触觉反馈两种。

> 力觉反馈是指借助操作控制杆的反作用力效果将虚拟物体的运动轨迹转换成真实物体的机械运动：
>
> 触觉反馈是指通过手戴3D数据手套获取手掌和手指的形态和温度等信息，来满足用户对虚拟物体的移动、抓取和触摸等操作。

情形实时再现包含了跟踪定位技术、高效可靠的渲染技术和逼真的显示技术等。

### 2.8 系统工程

**系统工程是一种组织管理技术。**所谓系统，首先是把要研究的对象或工程管理问题看作一个由很多相互联系、相互制约的组成部分构成的总体，然后运用运筹学的理论和方法以及电子计算机技术，对构成系统的各组成部分进行分析、预测和评价，最后进行综合，从而使该系统达到最优。

#### 2.8.1 系统工程概述

系统工程产生于第二次世界大战期间，在1950年有了初步发展。1960年，美国的阿波罗登月计划成功地运用了系统工程的科学方法，按预定目标第一次把人送到了月球。以此为转机，系统工程受到了世界各国的高度重视，获得迅速发展，被广泛应用到自然科学和社会科学的各个领域，开创了系统工程发展的新时期。近年来，我国对系统工程非常重视，在许多重大项目中得到广泛应用。

系统工程是运用系统方法，对系统进行**规划、研究、设计、制造、试验和使用的组织管理技术**。IS0/IEC 15288:2008中对系统工程做了进一步说明，系统是人造的，被创建用于在定义明确的环境中提供产品或服务，使用户和其他利益攸关者受益。

这些系统可配置有一个或多个系统元素：硬件、软件、数据、人员、流程、程序或指令、设施、材料和自然界存在的实体。

系统是由交互的元素组织起来的组合，用以实现一个或多个特定的目的。一个特指的系统及其架构和对系统元素的理解和定义取决于观察者的兴趣和职责。一个人感兴趣的系统可能是另一个人感兴趣系统的系统元素。此外，一个人感兴趣的系统也可能是另一个人感兴趣系统的运行环境的一部分。

系统是一组综合的元素、子系统或组件，用以完成一个确定的目标。这些元素包括产品(硬件、软件或固件)、流程、人员、信息、技术、设施、服务和其他支持元素。例如，航空运输系统是系统的一个实例。

系统之系统(System of System,SoS)适用于其系统元素本身也是系统的情况。这些系统之系统带来了大规模跨学科问题，涉及多重、混合和分布式的系统。这些部件系统的互操作集合通常能产生单个系统无法单独达成的结果。例如，全球定位系统(GPS)是飞机机载导航系统的基本组成部分，作为一个子系统其自身的复杂性不亚于航空运输系统。SoS的另一个特点是部件系统可以是其他无关系统的一部分。例如，GPS也是汽车导航系统的基本组成部分。

系统工程是一个视角、一个流程或一门专业，从其出现到现在，系统工程有多种不同的定义和说明。

系统工程是为了最好地实现系统的目的，对系统的组成要素、组织结构、信息流、控制机构等进行分析研究的科学方法。它运用各种组织管理技术，使系统的整体与局部之间的关系协调和相互配合，实现总体的最优运行。

系统工程不同于一般的传统工程学，它所研究的对象不限于特定的工程物质对象，而是任何一种系统。它是在现代科学技术基础之上发展起来的一门跨学科的边缘学科。

系统工程是从整体出发，合理开发、设计、实施和运用系统科学的工程技术。它根据总体协调的需要，综合应用自然科学和社会科学中有关的思想、理论和方法，利用电子计算机作为工具，对系统的结构、要素、信息和反馈等进行分析，以达到最优规划、最优设计、最优管理和最优控制的目的。

系统工程从系统观念出发，以最优化方法求得系统整体最优的、综合化的组织、管理、技术和方法的总称。钱学森教授在1978年指出：“‘系统工程’是组织管理‘系统’的规划、研究、设计、制造、试验和使用的科学方法，是一种对所有“系统’都具有普遍意义的科学方法。”

国际系统工程学会(INCOSE)认为，系统工程(SE)是一种使系统能够成功实现的跨学科的方法和手段。系统工程专注于：在开发周期的早期阶段，就定义客户需求与所要求的功能，将需求文件化：然后再考虑完整问题，即运行、成本、进度、性能、培训、保障、实验、制造和退出问题，并进行设计综合和系统确认。SE以提供满足用户需求的高质量产品为目的，同时考虑了所有用户的业务和技术需求。

这些定义中出现了一些关键词，比如跨学科、技术和整体性等。SE视角基于系统思维，系统思维来自于感知、建模以及探讨真实世界以更好地理解和定义与之一起工作的系统的过程中的发现、学习、诊断和对话。

系统思维是对现实的一种独特的视角，提高了人们的整体意识，从而理解整体内的各部分是如何相互关联的。

总之，系统工程是人们用科学方法解决复杂问题的一门技术。它的核心集中在分析和设计与其部分截然不同的整体。它坚持全面看问题，考虑所有的侧面和一切可变因素，并且把问题的社会方面与技术方面联系起来。采用系统工程方法的主要步骤包括：

**对系统提出要求：根据要求设计系统，评价设计方案：修改要求，再设计。**如此反复，经过若干循环，求得
最佳方案，即最后综合成一个技术上合理、经济上合算、研制周期短并能协调运转的工程系统。

#### 2.8.2 系统工程方法

系统工程方法是一种现代的科学决策方法，也是一门基本的决策技术。系统工程方法**分门别类**地处理将要解决的问题及相关情况并确定边界，又强调把握各门类之间和各门类内部诸因素之间的内在联系的完整性与整体性，否定片面和静止的观点和方法。

在此基础上，它针对主要问题、主要情况和全过程，运用有效工具进行全面的分析和处理。

系统工程方法的特点是**整体性、综合性、协调性、科学性和实践性**。系统工程方法是人类在自然科学和社会科学领域，不断实践中产生的一系列科学处理问题的方法，它包括**整体观念、综合观念、科学观念和创新观念**等。

1. 霍尔的三维结构

霍尔三维结构又称霍尔的系统工程，是美国系统工程专家霍尔(A.D.HaII)等人在大量工程实践的基础上，于1969年提出的一种系统工程方法论。后人将其与软系统方法论对比，称为硬系统方法论(Hard System Methodology,HSM)。其内容可以直观展示在系统工程各项工作内容的三维结构图中。霍尔三维结构集中体现了系统工程方法的系统化、综合化、最优化、程序化和标准化等特点，是系统工程方法论的重要基础内容。

霍尔三维结构是将系统工程整个活动过程分为前后紧密衔接的7个阶段和7个步骤，同时还考虑了为完成这些阶段和步骤所需要的各种专业知识和技能。这样，就形成了由时间维、逻辑维和知识维组成的三维空间结构。

**时间维**表示系统工程活动从开始到结束按时间顺序排列的全过程，分为规划、拟订方案、研制、生产、安装、运行、更新7个时间阶段。

**逻辑维**是指时间维的每个阶段内所要进行的工作内容和应该遵循的思维程序，包括明确问题、确定目标、系统综合、系统分析、优化、决策、实施7个逻辑步骤。

**知识维**需要运用包括工程、医学、建筑、商业、法律、管理、社会科学、艺术等各种知识和技能。三维结构体系形象地描述了系统工程研究的框架，对其中任意一个阶段和步骤又可进一步展开，形成了分层次的树状体系。
霍尔的三维结构模式的出现，为解决大型复杂系统的规划、组织、管理问题提供了一种统一的思想方法，因而在世界各国得到了广泛应用。

2. 切克兰德方法

20世纪40一60年代，系统工程主要用来寻求各种“战术”问题的最优策略，或用来组织和管理大型工程建设项目，最适合应用霍尔方法论。

进入20世纪70年代以来，系统工程越来越多地用于研究社会经济发展战略和组织管理问题，涉及的人、信息和社会等因素相当复杂，使得系统工程的对象系统软化，并导致其中的许多因素难以量化。从70年代中期开始，许多学者在霍尔方法论基础上，进一步提出了各种软系统工程方法论。80年代中前期由英国P. 切克兰德(P.Checkland)提出的方法比较系统且具有代表性。

P. 切克兰德认为完全按照解决工程问题的思路来解决社会问题或“软科学”问题，会碰到许多困难，尤其在设计价值系统、模型化和最优化等步骤方面，有许多因素很难进行定量分析。

P.切克兰德把霍尔方法论称为“硬科学”的方法论，他提出了自己的方法论，并把它称之为“软科学”方法论。

社会经济系统中的问题往往很难和工程技术系统中的问题一样，事先将需求确定清楚，难以按价值系统的评价准则设计出符合这种需求的最优系统方案。

切克兰德方法论的核心**不是“最优化”而是“比较”与“探寻”**。从模型和现状的比较中来学习改善现状的途径。“比较”这一步骤，含有组织讨论、听取各方面有关人员意见的意思，不拘泥于非要进行定量分析的要求，能更好地反映人的因素和社会经济系统的特点。

**切克兰德方法将工作过程分为7个步骤。**

> **(1)认识问题。**收集与问题有关的信息，表达问题现状，寻找构成和影响因素及其关系，以便明确系统问题结构、现存过程及其相互之间的不适应之处，确定有关的行为主体和利益主体。
>
> **(2)根底定义。**初步弄清、改善与现状有关的各种因素及其相互关系。根底定义的目的是弄清系统问题的关键要素以及关联因素，为系统的发展及其研究确立各种基本的看法，并尽可能选择出最合适的基本观点。
>
> **(3)建立概念模型。**在不能建立精确数学模型的情况下，用结构模型或语言模型来描述系统的现状。概念模型来自于根底定义，是通过系统化语言对问题抽象描述的结果，其结构及要素必须符合根底定义的思想，并能实现其要求。
>
> **(4)比较及探寻。**将现实问题和概念模型进行对比，找出符合决策者意图且可行的方案或途径。有时通过比较，需要对根底定义的结果进行适当修正。
>
> **(5)选择。**针对比较的结果，考虑有关人员的态度及其他社会、行为等因素，选出现实可行的改善方案。
>
> **(6)设计与实施。**通过详尽和有针对性的设计，形成具有可操作性的方案，并使得有关人员乐于接受和愿意为方案的实现竭尽全力。
>
> **(7)评估与反馈。**根据在实施过程中获得的新认识，修正问题描述、根底定义及概念模型等。

3. 并行工程方法

并行工程(Concurrent Engineering)是对产品及其相关过程（包括制造过程和支持过程）进行并行、集成化处理的系统方法和综合技术。它要求产品开发人员从设计开始就考虑产品生命周期的全过程，不仅考虑产品的各项性能，如质量、成本和用户要求，还应考虑与产品有关的各工艺过程的质量及服务的质量。

它通过提高设计质量来缩短设计周期，通过优化生产过程来提高生产效率，通过降低产品整个生命周期的消耗，如产品生产过程中原材料消耗、工时消耗等，以降低生产成本。

并行工程的目标是提高质量、降低成本、缩短产品开发周期和产品上市时间。

并行工程的具体做法是：**在产品开发初期，组织多种职能协同工作的项目组，使有关人员从一开始就获得对新产品需求的要求和信息，积极研究涉及本部门的工作业务，并将相应的要求提供给设计人员，使许多问题在开发早期就得到解决，从而保证了设计的质量，避免了大量的返工浪费。**

并行工程强调以下3点。

(1)在产品的设计开发期间，将概念设计、结构设计、工艺设计、最终需求等结合起来，保证以最快的速度按要求的质量完成。
(2)各项工作由与此相关的项目小组完成。进程中小组成员各自安排自身的工作，但可以随时或定期反馈信息，并对出现的问题协调解决。
(3)依据适当的信息系统工具，反馈与协调整个项目的进行。利用现代CIM技术，在产品的研制与开发期间，辅助项目进程的并行化。

4. 综合集成法

1990年初，钱学森等首次把处理开放的复杂巨系统的方法命名为从定性到定量的综合集成法。综合集成是从整体上考虑并解决问题的方法论。钱学森指出，这个方法不同于近代科学一直沿用的培根式的还原论方法，是现代科学条件下认识方法论上的一次飞跃。
开放的复杂巨系统，是由我国科学家钱学森于1990年提出的概念，并认为复杂性问题实际上是开放复杂巨系统的动力学特性问题。

钱学森等提出从系统的本质出发对系统进行分类的新方法，并首次公布了“开放的复杂巨系统”这一新的科学领域及其基本观点。从系统的本质出发，根据组成子系统及子系统种类的多少和它们之间关联关系的复杂程度，可以把系统分为**简单系统和巨系统两大类**。

> (1)如果组成系统的子系统数量比较少，它们之间的关系比较单纯的系统称为简单系统，如一台测量仪器。
> (2)如果子系统数量非常巨大（如成千上万)，则称作巨系统。
> (3)如巨系统中子系统种类不太多（几种、几十种），且它们之间的关联关系又比较简单，就称作简单巨系统，如激光系统。
> (4)如果子系统种类很多并有层次结构，它们之间的关联关系又很复杂，这就是复杂巨系统，如果这个系统又是开放的，就称作开放的复杂巨系统(Open Complex Giant Systems.)。

开放的复杂巨系统的一般基本原则与一般系统论的原则相一致：

**一是整体论原则：二是相互联系的原则：三是有序性原则；四是动态原则。**

开放的复杂巨系统的主要性质可以概括为：

> **(1)开放性。**系统对象及其子系统与环境之间有物质、能量、信息的交换。
> **(2)复杂性。**系统中子系统的种类繁多，子系统之间存在多种形式、多种层次的交互作用。
> **(3)进化与涌现性。**系统中子系统或基本单元之间的交互作用，从整体上演化、进化出一些独特的新性质，如通过自组织方式形成某种模式。
> **(4)层次性。**系统部件与功能上具有层次关系。
> **(5)巨量性。**数目极其巨大。

钱学森教授在1992年又提出**建设从定性到定量的综合集成研讨厅体系的设想**。指出研究和解决开放的复杂巨系统的方法应以系统论为指导。综合集成研讨厅体系就其实质而言，是将专家群体（各方面的专家）、数据和各种信息与计算机、网络等信息技术有机结合起来，把各种学科的科学理论和人的认识结合起来，由这三者构成的系统，这个系统是基于网络的。

应用综合集成法对开放的复杂巨系统进行探索研究，成为系统科学发展的里程碑，开辟了系统科学新的发展方向和研究领域。综合集成方法的主要特点有：

> (1)定性研究与定量研究有机结合，贯穿全过程。
> (2)科学理论与经验知识结合，把人们对客观事物的知识综合集成解决问题。
> (3)应用系统思想把多种学科结合起来进行综合研究。
> (4)根据复杂巨系统的层次结构，把宏观研究与微观研究统一起来。
> (5)必须有大型计算机系统支持，不仅有管理信息系统、决策支持系统等功能，而且还要有综合集成的功能。

5. WSR系统方法

WSR是**物理(Wuli)-事理(Shili)-人理(Renli)方法论**的简称，是中国著名系统科学专家顾基发教授和朱志昌博士于1994年在英国 HULL 大学提出的。它既是一种方法论，又是一种解决复杂问题的工具（三力方法论）。

在观察和分析问题时，尤其是观察分析具备复杂特性的系统时，WSR体现其独特性，并具有中国传统哲学的思辨思想，是多种方法的综合统一。根据具体情况，WSR将多种方法条理化、层次化，起到化繁为简之功效：属于定性与定量分析综合集成的东方系统思想。

顾名思义，WSR是**物理、事理和人理**三者如何巧妙配置、有效利用以解决问题的一种系统方法论。“懂物理、明事理、通人理”就是WSR方法论的实践准则，形容一个人的“通情达理”，就是对其成功实践了WSR的概括。
WSR系统方法论的内容易于理解，而具体实践方法与过程应按实践领域与考察对象而灵活调整。WSR方法论一般工作过程可理解为这样的7步：**理解意图、制定目标、调查分析、构造策略、选择方案、协调关系和实现构想。**
这些步骤不一定严格依照顺序，协调关系始终贯穿于整个过程。协调关系不仅仅是协调人与人的关系，实际上协调关系可以是协调每一步实践中物理、事理和人理的关系；协调意图、目标、现实、策略、方案、构想间的关系：协调系统实践的投入、产出与成效的关系。

这些协调都是由人完成的，着眼点与手段应根据协调对象的不同而有所不同。
有关处理物理的方法主要应用自然科学中的各种科学方法。而事理主要使用各种运筹学、系统工程、管理科学、控制论和一些数学方法。

特别是近年来软计算方法（进化计算、模糊计算和网络计算等)，各种模型和仿真技术等，还有一些定性方法以及定性和定量结合的方法，如特尔斐法、层次分析法都是经常采用的。

人理可以细分为关系、感情、习惯、知识、利益、斗争、和解、和谐和管理等。

> (1)关系。人之间都有相互关系，需要去深入了解，并将它们适当表示出来。
> (2)感情。人之间是有感情的，可以用各种方法直接或间接地找出来。
> (3)习惯。人们在待人、处世、办事和做决策时都有一定的习惯，就像物体运动时会有惯性。人们可以从一个人过去的习惯去判断这个人会怎样做事，也可以改造一些不好的习惯，建立一些好的习惯。
> (4)知识。人能拥有知识和创造知识的能力，因此找到知识的表达，特别是把隐性知识如何变成更多人可以掌握的显性知识。
> (5)利益。不同人有不同的利益，如何去协调，争取利益。
> (6)在协调管物、管事中人的管理。例如，在计划协调技术和统筹法中，要安排好项目中的时间、设备，同时还要考虑人的资源。

#### 2.8.3 系统工程的生命周期

按照ISO/IEC 15288:2008的定义：生命周期根据系统的本质属性、目的、用途和当时环境而变化。每个阶段都具有不同的目的和对全生命周期的贡献，并且在计划和执行该系统生命周期时保持不变，因此，这些阶段为组织提供了一个框架，在该框架内，组织管理对于项目和技术流程有着高层级的**可见性和可控性**。

定义系统生命周期的目的是以有序而且高效的方式建立一个满足利益攸关者需求的框架。一般通过定义生命周期阶段，并使用一些决策来确定是否处于就绪状态，以便从一个阶段进入下一个阶段来实现这一目的。跳过某些阶段和省去一些“耗时”的决策可能会大幅度增加风险(成本和进度)，减少系统工程的投入程度也可能对技术开发造成不利影响。

系统工程的任务通常集中在生命周期的初期，但商业组织和政府组织都认识到贯穿系统生命跨度的系统工程的需求，因为往往系统产品或服务进入生产阶段或运行阶段后还经常被修改或改变。进而，系统工程成为所有生命周期阶段的重要部分。

1. 生命周期阶段

下面是系统工程流程的7个一般生命周期阶段。

**1)探索性研究阶段**

探索性研究阶段的目的是识别利益攸关者的需求，探索创意和技术。许多行业使用探索性研究阶段来研究诸多新的创意或使能技术和能力，然后使其发展进入到一个新项目的启动阶段。
大量的创造性系统工程在该阶段中完成，领导这些研究的系统工程师，作为项目推动者，有可能将一个新创意引入到概念阶段。

**2)概念阶段**

概念阶段的目的是细化利益攸关者的需求，探索可行概念，提出有望实现的解决方案。概念阶段是对探索性研究阶段所开展的研究、实验和工程模型的细化与拓展。需要对利益攸关者的需求进行识别、明确并文档化。若没有探索性研究阶段，则在概念阶段完成该项工作。

**3)开发阶段**

开发阶段的目的是细化系统需求，创建解决方案的描述，构建系统，验证并确认系统。

开发阶段包括详细计划、开发和验证与确认(V&V)活动。该阶段可以完全自主地选择开发模型，并不局限于瀑布或其他计划驱动的方法。开发阶段与所有阶段一样，组织将选择最适合项目需求的流程和活动。

**4)生产阶段**

生产阶段的目的是生产系统并进行检验和验证。

生产阶段是系统被生产或制造的阶段。该阶段可能需要产品更改以解决生产问题，以降低生产成本，或提高产品或系统的能力。上述任何一点均可能影响系统需求，且需要系统重新验证或重新确认。所有这些变化都需要在被批准前进行系统工程评估。

**5)使用阶段**

使用阶段的目的是运行系统以满足用户需求。
使用阶段是系统在预期环境中运行以交付预期服务的阶段。该阶段通常在系统运行期间有计划地引入产品更改，这样的升级能提高系统的能力。这些变化应由系统工程师评估以确保其与运行的系统能顺利融合，对应的技术流程是运行流程。

**6)保障阶段**

保障阶段的目的是提供持续的系统能力。
保障阶段是为系统提供服务，使之能持续运行的阶段。该阶段可建议进行更改以解决保障性问题，降低运行成本或延长系统寿命。这些变化需要进行系统工程评估以避免运行时丧失系统性能，对应的技术流程是维护流程。

**7)退役阶段**

退役阶段的目的是存储、归档或退出系统。退役阶段是系统及其相关服务从运行中移除的阶段。这一阶段中的SE活动主要集中于确保退出需求被满足。实际上，退出计划是在概念阶段系统定义的一部分。在21世纪早期，许多国家已经更改了它们的法律，强制系统的创建者负责系统生命终止时恰当地退出。

2. 生命周期方法

**1)计划驱动方法**

需求、设计、构建、测试、部署范式被认为是构建系统的传统方式。在一些需要协调多家公司人员参与的大型团队项目中，计划驱动方法提供一种基础的框架，为生命周期流程提供规程。计划驱动方法的特征在于整个过程始终遵守规定流程的系统化方法。特别关注文档的完整性、需求的可追溯性以及每种表示的事后验证。

**2)渐进迭代式开发**

20世纪60年代以来就已经开始使用渐进迭代式开发(IID)方法。该方法允许为项目提供一个初始能力，随之提供连续交付以达到期望的系统。目标在于快速产生价值并提供快速响应能力。

当需求不清晰不确定或者客户希望在系统中引入新技术时，则使用IID方法。基于一系列最初的假设，开发候选的系统，然后对其进行评估以确定是否满足用户需求。若不满足，则启动另一轮演进，并重复该流程，直到交付的系统满足利益攸关者的要求或直到组织决定终止这项工作。

一般而言，IID方法适用于较小的、不太复杂的系统。这种方法的重点在于灵活性，通过剪裁突出了产品开发的核心活动。

**3)精益开发**

精益思想中的精益开发和更广泛的方法均起源于丰田的“准时化”哲学思想，其目标是“通过彻底消除生产线上的浪费、不一致性及不合理需求，高效率地生产出优质产品”。精益SE是将精益思想应用到SE,以及组织与项目管理的相关方面。SE聚焦于促使复杂技术系统无缺陷开发的规程。

精益思想是一种整体性的范式，聚焦于向客户交付最大价值并使浪费活动最小化。精益思想已成功地应用于制造、飞机库管、行政管理、供应链管理、健康医疗、产品开发和工程等领域。

精益思想是一个动态的、知识驱动的、以客户为中心的过程，通过这一过程使特定企业的所有人员以创造价值为目标不断地消除浪费。

精益系统工程是将精益原则、实践和工具应用到系统工程，以提升对系统利益攸关者的价值交付。

**4)敏捷开发**

敏捷联盟致力于开发迭代和敏捷的方法，寻求更快、更好的软件和系统开发方法，挑战更多的传统模型。敏捷的关键目标在于灵活性，当风险可接受时允许从序列中排除选定的事件。

适用于系统工程的敏捷原则如下：

* 最高的优先级是通过尽早地和持续地交付有价值的软件来满足客户。
* 欢迎需求变更，即使是在项目开发后期。敏捷流程利用需求变更帮助客户获得竞争优势。
* 不断交付可用的软件，周期从几周到几个月不等，且越短越好。
* 在项目中业务人员与开发人员每天在一起工作，业务人员始终参与到开发工作中。
* 在开发团队内部和团队之间，传递信息最有效的方法是面对面交谈。
* 工作软件是进展的主要度量。
* 对技术的精益求精以及对设计的不断完善将提升敏捷性。
* 简单性（尽最大可能减少不必要的工作的艺术）是精髓。
* 最佳的架构、需求和设计出自于自组织的团队。
* 团队要定期反省如何能够做到更加高效，并相应地调整团队的行为。

#### 2.8.4 基于模型的系统工程

2007年，国际系统工程学会(INCOSE)在《系统工程2020年愿景》中，正式提出了基于模型的系统工程(Model-Based Systems Engineering,MBSE)的定义：MBSE是建模方法的形式化应用，以使建模方法支持系统需求、分析、设计、验证和确认等活动，这些活动从概念性设计阶段开始，持续贯穿到设计开发以及后来的所有生命周期阶段。

MBSE仍然还是系统工程，其层层分解、综合集成的思路并没有变化，核心就是采用形式、图形化、关联化的建模语言及相应的建模工具，改造系统工程的技术过程，充分利用计算机、信息技术的优势，开展建模（含分析、优化、仿真）工作，为系统实现、验证奠定更为坚实的基础，从而提升整个研制过程的效率。

系统工程过程的三个阶段分别产生三种图形：

> 在需求分析阶段，产生需求图、用例图及包图：

> 在功能分析与分配阶段，产生顺序图、活动图及状态机(State Machine)图；

> 在设计综合阶段，产生模块定义图、内部块图及参数图等。

MBSE的三大支柱分别是建模语言、建模工具和建模思路。

**1)建模语言**

对象管理组织OMG在对UML2.0的子集进行重用和扩展的基础上，提出了一种新的系统建模语言SysML(Systems Modeling Language),作为系统工程的标准建模语言。SysML的目的是统一系统工程中使用的建模语言。

系统建模语言在知识的表示和处理方面有若干优点：

一是相当于在现有的各个学科之间、各类人员之间建立了一门新的通用语言，各门学科的知识都可以“翻译”转换成系统建模语言的形式：

二是可以对知识进行图形化、可视化的表示，便于读者的理解；

三是便于计算机的处理（由于系统建模语言形式化、关联化的特点）。

因此，系统建模语言便于系统研制中对知识的理解、继承、重用和集成，便于各方的技术沟通。

**2)建模工具**

MBSE的建模工具主要就是支持系统建模语言画图的计算机和网络环境，当然核心是支持系统建模语言的软件。建模者使用屏幕上给出的系统建模语言的各种符号建模，底层利用系统建模语言的语法对相关数据进行关联，并形成模型库。人们可以构建分布式的建模环境，方便研制团队的协同设计。

同时，国际系统工程界已经制定了相关数据转换标准，能够和已有的各种软件分析工具进行数据交换，如专业的热学分析软件、力学分析软件，可以从系统建模语言构建的系统模型中读取数据，进行分析、计算、优化后再把数据写回系统模型中，不断地迭代优化，大幅度提高工程分析的效率。

**3)建模思路**

建模思路就是设计团队如何利用系统建模语言的各种图形来建立系统模型，也就是工作流程。目前主要的方法包括IBM Telelogic Harmony-SE、Weilkiens System Modeling(SYSMOD) method,INCOSE Object-Oriented Systems Engineering Method (OOSEM).

目前，国内许多大型企业，如航空、航天企业等，使用MBSE方法进行项目的研制工作。

在使用MBSE时，建模思路以及工作流程的研究、探索、试用，应该是重点工作和前置性工作，因为系统建模语言是统一的，不同的建模工具虽然各有特点，但本质是一样的，因此，关键就在于根据组织机构的特点，研究适合自身的建模思路和工作流程，这需要在试点型号中探索应用，然后进行推广。

### 2.9 系统性能

系统性能是一个系统提供给用户的所有性能指标的集合。它既包括硬件性能（如处理器主频、存储器容量、通信带宽等)和软件性能（如上下文切换、延迟、执行时间等），也包括部件性能指标和综合性能指标。系统性能包含性能指标、性能计算、性能设计和性能评估4个方面的内容。

#### 2.9.1 性能指标

性能指标是**软、硬件的性能指标的集成**。

在硬件中，包括计算机、各种通信交换设备、各类网络设备等；

在软件中，包括操作系统、数据库、网络协议以及应用程序等。

1. 计算机的性能指标

评价计算机的主要性能指标**有时钟频率（主频）、运算速度、运算精度、内存的存储容量、存储器的存取周期、数据处理速率(Processing Data Rate,PDR)、吞吐率、各种响应时间、各种利用率、RASIS特性（即可靠性(Reliability)、可用性(Availability)、可维护性(Serviceability)、完整性和安全性(Integrity and Security))、平均故障响应时间、兼容性、可扩充性和性能价格比**。

2. 路由器的性能指标

评价路由器的主要性能指标有**设备吞吐量、端口吞吐量、全双工线速转发能力、背靠背帧数、路由表能力、背板能力、丢包率、时延、时延抖动、VPN支持能力、内部时钟精度、队列管理机制、端口硬件队列数、分类业务带宽保证、RSVP、IP DiffServ、CAR支持、冗余、热插拔组件、路由器冗余协议、网管、基于Wb的管理、网管类型、带外网管支持、网管粒度、计费能力/协议、分组语音支持方式、协议支持、语音压缩能力、端口密度、信令支持。**

3. 交换机的性能指标

评价交换机所依据的性能指标有**交换机类型、配置、支持的网络类型、最大ATM端口数、最大SONET端口数、最大FDDI端口数、背板吞吐量、缓冲区大小、最大MAC地址表大小最大电源数、支持协议和标准、路由信息协议(RP)、RP2、开放式最短路径优先第2版、边界网关协议(BGP)、无类别域间路由(CDR)、互联网成组管理协议(IGMP)、距离矢量多播路由协议(DVMRP)、开放式最短路径优先多播路由协议(MOSPF)、协议无关的多播协议(PIM)、资源预留协议(RSVP)、802.1p优先级标记，多队列、路由、支持第3层交换、支持多层(4~7层)交换、支持多协议路由、支持路由缓存、可支持最大路由表数、VLAN、最大VLAN数量、网管、支持网管类型、支持端口镜像、QoS、支持基于策略的第2层交换、每端口最大优先级队列数、支持基于策略的第3层交换、支持基于策略的应用级QoS、支持最小/最大带宽分配、冗余、热交换组件（管理卡、交换结构、接口模块、电源、冷却系统）、支持端口链路聚集协议、负载均衡。**

4. 网络的性能指标

评价网络的性能指标有设备级性能指标、网络级性能指标、应用级性能指标、用户级性能指标和吞吐量。

5. 操作系统的性能指标

评价操作系统的性能指标有系统上下文切换、系统响应时间、系统的吞吐率（量）、系统资源利用率、可靠性和可移植性。

6. 数据库管理系统的性能指标

衡量数据库管理系统的主要性能指标包括数据库本身和管理系统两部分，有数据库的大小、数据库中表的数量、单个表的大小、表中允许的记录（行）数量、单个记录（行）的大小、表上所允许的索引数量、数据库所允许的索引数量、最大并发事务处理能力、负载均衡能力、最大连接数，等等。

7. Web服务器的性能指标

评价Wb服务器的主要性能指标有最大并发连接数、响应延迟和吞吐量。

#### 2.9.2 性能计算

性能指标计算的主要方法有**定义法、公式法、程序检测法和仪器检测法**。

常用的性能指标的计算过程(Millions of Instructions Per Second,MPS)的计算方法、峰值计算、等效指令速度（吉普森(Gibson)法）。

在实际应用中，往往是对这些常用性能指标的复合计算，然后通过算法加权处理得到最终结果。

#### 2.9.3 性能设计

1. 性能调整

当系统性能降到最基本的水平时，性能调整由查找和消除瓶颈组成。对于数据库系统，性能调整主要包括CPU/内存使用状况、优化数据库设计、优化数据库管理以及进程/线程状态、硬盘剩余空间、日志文件大小等：对于应用系统，性能调整主要包括应用系统的可用性、响应时间、并发用户数以及特定应用的系统资源占用等。

在开始性能调整之前，必须做的准备工作有识别约束、指定负载、设置性能目标。在建立了性能调整的边界和期望值后，就可以开始调整了，这是一系列重复的、受控的性能试验，循环的调整过程为收集、分析、配置和测试。

2. 阿姆达尔解决方案

阿姆达尔(Amdahl)定律是指计算机系统中对某一部件采用某种更快的执行方式所获得的系统性能改变程度，取决于这种方式被使用的频率，或所占总执行时间的比例。

阿姆达尔定律定义了采用特定部件所取得的加速比。假定人们使用某种增强部件，计算机的性能就会得到提高，加速比定义如下：

$$加速比=\frac{不使用增强部件时完成整个任务的时间}{使用增强部件时完成整个任务的时间}$$

加速比反映了使用增强部件后完成一个任务比不使用增强部件完成同一任务加快了多少。

加速比主要取决于两个因素：

> (1)在原有的计算机上，能被改进并增强的部分在总执行时间中所占的比例。这个值称为增强比例，它永远小于等于1。
> (2)通过增强的执行方式所取得的改进，即如果整个程序使用了增强的执行方式，那么这个任务的执行速度会有多少提高，这个值是在原来条件下程序的执行时间与使用增强功能后程序的执行时间之比。

原来的机器使用了增强功能后，执行时间等于未改进部分的执行时间加上改进部分的执行时间。

$$新的执行时间=原来的执行时间*[(1-增强比例)+\frac{增强比例}{增强加速比}]$$

总加速比等于俩中执行时间的比：

$$总加速比=\frac{原来的执行时间}{新的执行时间}=\frac{1}{[(1-增强比例)+\frac{增强比例}{增强加速比}]}$$

#### 2.9.4 性能评估

性能评估是为了一个目的，按照一定的步骤，选用一定的度量项目，通过建模和实验，对一个系统的性能进行各项检测，对测试结果做出解释，并形成一份文档的技术。性能评估的一个目的是为性能的优化提供参考。

1. 基准测试程序

大多数情况下，为测试新系统的性能，用户必须依靠评价程序来评价机器的性能。下面列出了4种评价程序，它们评测的准确程度依次递减：真实的程序、核心程序、小型基准程序和合成基准程序。

把应用程序中用得最多、最频繁的那部分核心程序作为评价计算机性能的标准程序，称为基准测试程序(benchmark)。基准测试程序有整数测试程序Dhrystone、浮点测试程序Linpack、Whetstone基准测试程序、SPEC基准测试程序和TPC基准程序。

2. Web服务器的性能评估

在Web服务器的测试中，反映其性能的指标主要有：最大并发连接数、响应延迟和吞吐量等。

常见的Wb服务器性能评测方法有基准性能测试、压力测试和可靠性测试。

3. 系统监视

进行系统监视的方法通常有3种方式：

> 一是通过系统本身提供的命令，如UNIX/Linux中的W、ps、last,Windows中的netstat等；

> 二是通过系统记录文件查阅系统在特定时间内的运行状态：

> 三是集成命令、文件记录和可视化技术，如Windows的Perfmon应用程序。

## 第3章 信息系统基础知识

信息系统(Information System,IS)一般泛指收集、存储、处理和传播各种信息的具有完整功能的集合体。现代信息系统总是与计算机技术和互联网技术的应用联系在一起，主要是指以计算机为信息处理工具，以网络为信息传输手段的信息系统。本章主要介绍了信息系统的基本概念和发展现状，并就典型的6类信息系统的相关知识进行了详细讲解，最后介绍典型的信息系统架构模型。

### 3.1 信息系统概述

#### 3.1.1 信息系统的定义

信息系统是由计算机硬件、网络和通信设备、计算机软件、信息资源、信息用户和规章制度组成的以处理信息流为目的的人机一体化系统。从技术上可以定义为一系列支持决策和控制的相关要素，这些要素主要包括信息的收集、检索、加工处理和信息服务。除了支持决策、协作和控制外，信息系统还帮助管理人员和生产人员分析问题，使复杂问题可视化，创造产生新的产品和服务。它的任务是对原始数据进行收集、加工、存储，并处理产生各种所需信息，以不同的方式提供给各类用户使用。
信息系统的5个基本功能：**输入、存储、处理、输出和控制**。

* 输入功能。输入功能决定于系统所要达到的目的及系统的能力和信息环境的许可。

* 存储功能。存储功能指的是系统存储各种信息资料和数据的能力。

* 处理功能。它是数据处理工具。处理功能基于数据仓库技术的联机分析处理(OLAP)和数据挖掘(DM)技术。

* 输出功能。信息系统的各种功能都是为了保证最终实现最佳的输出功能。

* 控制功能。控制功能对构成系统的各种信息处理设备进行控制和管理，对整个信息加工、处理、传输、输出等环节通过各种程序进行控制。

从概念上说，任何一个组织都有信息系统的存在，例如，一个工厂的正常运转，离不开计划的执行情况、物资器材的库存情况、流动资金的周转情况以及市场情况等信息。因而，任何企业单位占有信息的数量和质量以及处理信息的能力决定了其工作成效。进一步说，人类社会的发展速度，将取决于人们对信息的利用水平。

信息系统既可以是基于计算机的，又可以是基于手工的。手工的信息系统采用纸笔等手段实现信息的传递和交流，而基于计算机的信息系统则是依赖于计算机硬、软件技术来加工处理和传输信息的。人们通常说的“信息系统”这一术语，是指基于计算机的信息系统，即依赖于计算机技术、规范的、有组织的信息系统。计算机信息系统是利用计算机技术将原始数据处理加工成为有意义的信息，但从某种意义上讲，计算机和信息系统之间仍存在着明显的区别。

计算机只提供了存储、处理信息的设备和现代管理信息系统的技术功能，但信息系统的许多工作，诸如输入数据或使用系统的输出结果等还需要作为用户的人来完成，计算机仅仅是信息系统中的一部分。用户和计算机共同构成了一个整合的系统，提出问题以及对问题的具体解答都是通过计算机和用户之间的一系列交互活动来实现的，这充分体现了信息系统的性质所在，即信息系统是以计算机为基础的人机交互系统。

信息系统的性质影响着系统开发者和系统用户的知识需求。“以计算机为基础”要求系统设计者必须具备计算机及其在信息处理中的应用知识。“人机交互”要求系统设计者还需要了解人作为系统组成部分的能力以及人作为信息使用者的各种行为。

从广域上讲，信息化工作是信息系统发展带来的系统层面上的信息战略规划。所谓信息化(Informationalization)是指在国家宏观信息政策指导下，通过信息技术开发、信息产业的发展、信息人才的配置，最大限度地利用信息资源以满足全社会的信息需求，从而加速社会各个领域的共同发展以推进信息社会的过程。

信息化应该是**以信息资源开发利用为核心，以网络技术、通信技术等高科技技术为依托的一种新技术扩散的过程**。在信息化过程中，信息技术自身和整个社会都发生着质的变化。信息化不仅仅是生产力的变革，而且伴随着生产关系的重大变革。

#### 3.1.2 信息系统的发展

现代信息系统与70年来计算机技术和网络技术的发展保持同步。随着社会的进步和技术的发展，信息系统的内容和形式也都在不断发生着巨大的变化。1979年，美国管理信息系统专家诺兰(Richard L.Nolan)通过对200多个公司、部门发展信息系统的实践和经验做出的总结，提出了著名的信息系统进化的阶段模型，即诺兰模型。

诺兰认为，任何组织由手工信息系统向以计算机为基础的信息系统发展时，都存在着一条客观的发展道路和规律。数据处理的发展涉及**技术的进步、应用的拓展、计划和控制策略的变化以及用户的状况**等4个方面。

诺兰将计算机信息系统的发展道路划分为6个阶段，即：**初始阶段、传播阶段、控制阶段、集成阶段、数据管理阶段和成熟阶段。**

1. 初始阶段

计算机刚进入企业时只作为办公设备使用，应用非常少，通常用来完成一些报表统计工作，甚至大多数时候被当作打字机使用。在这一阶段，IT的需求只被作为简单的办公设施改善的需求来对待，采购量少，只有少数人使用，在企业内没有普及。这一阶段的主要特点是：

> (1)组织中只有个别人具有使用计算机的能力。
> (2)该阶段一般发生在一个组织的财务部门。

2. 传播阶段

企业对计算机有了一定了解，想利用计算机解决工作中的问题，比如进行更多的数据处理，给管理工作和业务带来便利。于是，应用需求开始增加，企业对IT应用开始产生兴趣，并对开发软件热情高涨，投入开始大幅度增加。这一阶段的主要特点是：

> (1)数据处理能力得到迅速发展。  
> (2)出现许多新问题（如数据冗余、数据不一致性、难以共享等）。  
> (3)计算机使用效率不高等。   

3. 控制阶段

在前一阶段盲目购机、盲目定制开发软件之后，企业管理者意识到计算机的使用超出控制，IT投资增长快，但效益不理想，于是开始从整体上控制计算机信息系统的发展，在客观上要求组织协调、解决数据共享问题。

此时，企业IT建设更加务实，对IT的利用有了更明确的认识和目标。在这一阶段，一些职能部门内部实现了网络化，如财务系统、人事系统、库存系统等，但各软件系统之间还存在“部门壁垒”与“信息孤岛”。信息系统呈现单点、分散的特点，系统和资源利用率不高。这一阶段的主要特点是：

> (1)成立了一个领导小组。   
> (2)采用了数据库(DB)技术。   
> (3)这一阶段是计算机管理变为数据管理的关键。  

4. 集成阶段

在控制的基础上，企业开始重新进行规划设计，建立基础数据库，并建成统一的信息管理系统。企业的IT建设开始由分散和单点发展到成体系。企业IT主管开始把企业内部不同的IT机构和系统统一到一个系统中进行管理，使人、财、物等资源信息能够在企业集成共享，更有效地利用现有的T系统和资源。这一阶段的主要特点是：

> (1)建立集中式的DB及相应的IS。  
> (2)增加大量硬件，预算费用迅速增长。  

5. 数据管理阶段

企业高层意识到信息战略的重要，信息成为企业的重要资源，企业的信息化建设也真正进入到数据处理阶段。这一阶段中，企业开始选定统一的数据库平台、数据管理体系和信息管理平台，统一数据的管理和使用，各部门、各系统基本实现资源整合和信息共享。IT系统的规划及资源利用更加高效。

6. 成熟阶段

信息系统已经可以满足企业各个层次的需求，从简单的事务处理到支持高效管理的决策。企业真正把IT与管理过程结合起来，将组织内部、外部的资源充分整合和利用，从而提升了企业的竞争力和发展潜力。

这6个阶段模型反映了企业计算机应用发展的规律性，前3个阶段具有计算机时代的特征，后3个阶段具有信息时代的特征，其转折点是进行信息资源规划的时机。“诺兰模型”的预见性，被其后国际上许多企业的计算机应用发展情况所证实。

#### 3.1.3 信息系统的分类

从信息系统的发展和系统特点来看，传统的信息系统可分为**业务（数据）处理系统、管理信息系统、决策支持系统、专家系统和办公自动化系统等5类**。这5类经历了一个从低级到高级、从局部到全局、从简单到复杂的过程。

1. 业务（数据）处理系统

随着企业业务需求的增长和技术条件的发展，人们逐步将计算机应用于企业局部业务（数据)的管理，如财会管理、销售管理、物资管理和生产管理等，即计算机应用发展到对企业的局部事务的管理，形成了所谓业务（数据）处理系统(Transaction/DATA Processing System,TPS/DPS),但它并未形成对企业全局的、整体的管理。

2. 管理信息系统

管理信息系统(Management Information System,MIS)最早出现在20世纪80年代初，是用系统思想建立起来，以电子计算机为基本信息处理手段，现代通信设备为基本传输工具，且能为管理决策提供信息服务的人机系统。即管理信息系统是一个由人和计算机等组成的，能进行管理信息的收集、传输、存储、加工、维护和使用的系统。在管理信息系统发展过程中，形成了对企业全局性的、整体性的计算机应用。

MIS强调以企业管理系统为背景，以基层业务系统为基础，强调企业各业务系统间的信息联系，以完成企业总体任务为目标，它能提供企业各级领导从事管理需要的信息，但其收集信息的范围还更多地侧重于企业内部。

3. 决策支持系统

决策支持系统(Decision Support System,DSS)是管理信息系统应用概念的深化，是在管理信息的基础上发展起来的系统。DSS是能帮助决策者利用数据和模型去解决**半结构化决策问题和非结构化决策问题**的交互式系统。服务于高层决策的管理信息系统，按功能可分为专用DSS、DSS工具和DSS生成器。专用DSS是为解决某一领域问题的DSS。

DSS工具是指某种语言、某种操作系统、某种数据库系统。DSS生成器是通用决策支持系统，一般DSS包括数据库、模型库、方法库、知识库和会话部件。

4. 专家系统

专家系统(Expert System,ES)是一个智能计算机程序系统，其内部含有某个领域具有专家水平的大量知识与经验，能够利用人类专家的知识和解决问题的方法来处理该领域的问题。也就是说，专家系统是一个具有大量的专门知识与经验的程序系统，它应用人工智能技术和计算机技术，根据某领域一个或多个专家提供的知识和经验，“进行推理和判断，模拟人类专家的决策过程，以便解决那些需要人类专家处理的复杂问题。简而言之，专家系统是一种模拟人类专家解决领域问题的计算机程序系统。

5. 办公自动化系统

办公自动化系统(Office Automation System,OAS)是一个人机结合的综合性的办公事务管理系统，或称办公事务处理系统。该系统将当代各种先进技术和设备包括计算机、文字处理机、声音图形（图像）识别、数值计算、光学、微电子学、通信和管理科学等，应用于办公室的办公活动中，使办公活动实现科学化、自动化，以达到改善工作环境、最大限度地提高办公事务工作质量和工作效率。

6. 综合性信息系统

信息系统之间的关系并不是取代关系，而是互相促进、共同发展的关系。在一个企业里，以上5个类型的信息系统，可能同时都存在，也可能只有其中的1种、2种或3种。更高级的是几种信息系统互相融合成一体。同时，以上这5种信息系统本身也是与时俱进发展的，不断有新的技术、新的方法和新的工具融入其中。

随着各国信息化工程的不断推行，智能制造和信息化技术的融合，为企业带来了丰厚的利益。目前企业主要使用的信息化系统主要**有ERP系统（企业资源管理）、WMS系统（仓储管理系统)、MES系统（也称之为SFC,即制造过程管理系统）和产品数据管理系统(PDM)。**

* ERP系统：主要管理公司的各种资源，负责处理进销存、供应链、生产计划MPS、MRP计算、生产订单、管理会计，是财务数据的强力支撑。
* WMS系统：主要包括库房货位管理，主要有收发料，通过扫码进出库，对库存进行库位、先进先出与盘点：栈板出货管控、库龄管理等内容，主要是立体仓库或大批量仓库数据需求。
* MES系统：负责生产过程和生产过程中防呆、自动化设备集成，是各个客户审核的重点，是生产全流程管控，也有企业称之为SFC,其实大同小异，但是它是生产过程、生产工艺、生产设备、自动化生产直接的核心。
* PDM系统：管理研发阶段的物料、BOM、工程变更数据，负责产品数据为主。PDM系统是产品研发全过程管理，主要涉及协同研发等能力。

#### 3.1.4 信息系统的生命周期

一般来说，信息系统的生命周期分为4个阶段，即产生阶段、开发阶段、运行阶段和消亡阶段。

1. 信息系统的产生阶段

信息系统的产生阶段，也是信息系统的概念阶段或者是信息系统的需求分析阶段。这一阶段又分为两个过程，**一是概念的产生过程**，即根据企业经营管理的需要，提出建设信息系统的初步想法：**二是需求分析过程**，即对企业信息系统的需求进行深入地调研和分析，并形成需求分析报告。

2. 信息系统的开发阶段

信息系统的开发阶段是信息系统生命周期中最重要和关键的阶段。该阶段又可分为5个阶段，即，**总体规划、系统分析、系统设计、系统实施和系统验收阶段**。

**(1)总体规划阶段。**信息系统总体规划是系统开发的起始阶段，它的基础是需求分析。以计算机和互联网为工具的信息系统是企业管理系统的重要组成部分，是实现企业总体目标的重要工具。因此，它必须服从和服务于企业的总体目标和企业的管理决策活动。总体规划的作用主要有：指明信息系统在企业经营战略中的作用和地位：指导信息系统的开发；优化配置和利用各种资源，包括内部资源和外部资源。通过规划过程规范企业的业务流程，一个比较完整的总体规划，应当包括信息系统的开发目标、信息系统的总体架构、信息系统的组织结构和管理流程、信息系统的实施计划、信息系统的技术规范等。

**(2)系统分析阶段。**系统分析阶段的目标是为系统设计阶段提供系统的逻辑模型。系统分析阶段以企业的业务流程分析为基础，规划即将建设的信息系统的基本架构，它是企业的管理流程和信息流程的交汇点。系统分析的内容主要包括组织结构及功能分析、业务流程分析、数据和数据流程分析、系统初步方案等。

**(3)系统设计阶段。**系统设计阶段是根据系统分析的结果，设计出信息系统的实施方案。系统设计的主要内容包括系统架构设计、数据库设计、处理流程设计、功能模块设计、安全控制方案设计、系统组织和队伍设计、系统管理流程设计等。

**(4)系统实施阶段。**系统实施阶段是将设计阶段的结果在计算机和网络上具体实现，也就是将设计文本变成能在计算机上运行的软件系统。由于系统实施阶段是对以前的全部工作的检验，因此，系统实施阶段用户的参与特别重要。系统实施阶段以后，用户逐步变为系统的主导地位。

**(5)系统验收阶段。**信息系统实施阶段结束以后，系统就要进入试运行。通过试运行，系统性能的优劣以及是否做到了用户友好等问题都会暴露在用户面前，这时就进入了系统验收阶段。

3. 信息系统的运行阶段

当信息系统通过验收，正式移交给用户以后，系统就进入了运行阶段。一般来说，一个性能良好的系统，运行过程中会较少出现故障，即使出现故障，也较容易排除：而那些性能较差的系统，运行过程中会故障不断，而且可能会出现致命性故障，有时故障会导致系统瘫痪。因此，长时间的运行是检验系统质量的试金石。

另外，要保障信息系统正常运行，一项不可缺少的工作就是系统维护。在软件工程中，把维护分为4种类型，**即排错性维护、适应性维护、完善性维护和预防性维护**。一般在系统运行初期，排错性维护和适应性维护比较多，而到后来，完善性维护和预防性维护就会比较多。

4. 信息系统的消亡阶段

通常人们比较重视信息系统的开发阶段，轻视信息系统运行阶段，而几乎完全忽视信息系统的消亡阶段。计算机技术和互联网技术的发展迅速，新的技术、新的产品不断出现：同时，由于企业处在瞬息万变的市场竞争的环境之中，在这种情况下，企业开发好一个信息系统想让它一劳永逸地运行下去，是不现实的。企业的信息系统会经常不可避免地会遇到系统更新改造、功能扩展，甚至报废重建的情况。对此，在信息系统建设的初期企业就应当注意系统的消亡条件和时机，以及由此而花费的成本。

#### 3.1.5 信息系统建设原则

为了能够适应开发的需要，在信息系统规划设计以及系统开发的过程中，必须要遵守一系列原则，这是系统成功的必要条件。以下是信息系统开发的常用原则。

1. 高层管理人员介入原则

一个信息系统的建设目标总是为企业的总体目标服务，否则，这个系统就不应当建设。**而真正能够理解企业总体目标的人必然是那些企业的高层管理人员，只有他们才能知道企业究竟需要什么样的信息系统，而不需要什么样的信息系统：也只有他们才知道企业有多大的投入是值得的，而超过了这个界限就是浪费。**

这是那些身处某一部门的管理人员或者是技术人员所无法做到的。因此，信息系统从概念到运行都必须有企业高层管理人员介入。当然，这里的“介入”有着其特定的含义，它可以是直接参加，也可以是决策或指导，还可以是在政治、经济、人事等方面的支持。

这里需要说明的是，高层管理人员介入原则在现阶段已经逐步具体化，那就是企业的“首席信息官”(Chief Information O伍icer,CIO)的出现。

CIO是企业设置的相当于副总裁的一个高级职位，负责公司信息化的工作，主持制定公司信息规划、政策、标准，并对全公司的信息资源进行管理控制的公司行政官员。在大多数企业里，CIO是公司最高管理层中的核心成员之一。

毫无疑问，深度介入信息系统开发建设以及运行是CIO的职责所在。

2. 用户参与开发原则

在我国信息系统开发中流行所谓**“用户第一”或“用户至上”**的原则。当然，这个原则并没有错，一个成功的信息系统，必须把用户放在第一位，这应该是毫无疑义的。用户参与开发原则主要包括以下几项含义：

**一是“用户”有确定的范围。**人们通常把“用户”仅仅理解成为用户单位的领导，其实，这是很片面的。当然，用户单位领导应该包括在用户范围之内，但是，更重要的用户或是核心用户是那些信息系统的使用者，而用户单位的领导只不过是辅助用户或是外围用户。

**二是用户**，特别是那些核心用户，不应是参与某一阶段的开发，而应当是参与全过程的开发，即用户应当参与从信息系统概念规划和设计阶段，直到系统运行的整个过程。而当信息系统交接以后，他们就成为系统的使用者。

**三是用户应当深度参与系统开发**。用户以什么身份参与开发是一个很重要的问题。一般说来，参与开发的用户人员，既要以甲方代表身份出现，又应成为真正的系统开发人员，与其他开发人员融为一体。

3. 自顶向下规划原则

在信息系统开发的过程中，经常会出现信息不一致的问题，这种现象的存在对于信息系统来说往往是致命的，有时一个信息系统会因此而造成报废的结果。研究表明，信息的不一致是由计算机应用的历史性演变造成的，它通常发生在没有一个总体规划的指导就来设计实现一个信息系统的情况之下。因此，坚持自顶向下规划原则对于信息系统的开发和建设来说是至关重要的。自顶向下规划的一个主要目标是达到信息的一致性。同时，自顶向下规划原则还有另外一个方面，那就是这种规划绝不能取代信息系统的详细设计。必须鼓励信息系统各子系统的设计者在总体规划的指导下，进行有创造性的设计。

4. 工程化原则

在20世纪70年代，出现了世界范围内的“软件危机”。所谓软件危机是指一个软件编制好以后，谁也无法保证它能够正确地运行，也就是软件的可靠性成了问题。软件危机曾一度引起人们特别是工业界的恐慌。经过探索人们认识到，之所以会出现软件危机，是因为，软件产品是一种个体劳动产品，最多也就是作坊式的产品。因此，没有工程化是软件危机发生的根本原因。此后，发展成了“软件工程”这门工程学科，在一定程度上解决了软件危机。

信息系统也经历了与软件开发大致相同的经历。在信息系统发展的初期，人们也像软件开发初期一样，只要做出来就行，根本不管实现的过程。这时的信息系统，大都成了少数开发者的“专利”，系统可维护性、可扩展性都非常差。后来，信息工程、系统工程等工程化方法被引入到信息系统开发过程之中，才使问题得到了一定程度的解决。其实，工程化不仅是一种有效的方法，它也应当是信息系统开发的一项重要原则。

5. 其他原则

对于信息系统开发，人们还从不同的角度提出了一系列原则，例如：**创新性原则，用来体现信息系统的先进性；整体性原则，用来体现信息系统的完整性；发展性原则，用来体现信息系统的超前性：经济性原则，用来体现信息系统的实用性。**

#### 3.1.6 信息系统开发方法

企业信息系统对于企业信息化的重要意义是不言而喻的。从实际运行的效果来看，有些信息系统运行得很成功，取得了巨大的经济效益和社会效益：但也有些信息系统效果并不显著，甚至还有个别信息系统开始时还能正常运行，可时间一长，系统就故障不断，最后走上报废之路。这里的原因可能很复杂，但有一个原因是十分重要和关键的，那就是信息系统的开发方法问题。

信息系统是一个极为复杂的 人 - 机 系统，它不仅包含计算机技术、通信技术，以及其他的工程技术，而且，它还是一个复杂的管理系统，还需要管理理论和方法的支持。下面简单介绍几种最常用的信息系统开发方法。

1. 结构化方法

结构化方法是由结构化系统分析和设计组成的一种信息系统开发方法，是目前最成熟、应用最广泛的信息系统开发方法之一。它假定被开发的系统是一个结构化的系统，因而，其基本思想是将系统的生命周期划分为**系统调查、系统分析、系统设计、系统实施、系统维护**等阶段。

这种方法遵循系统工程原理，按照事先设计好的程序和步骤，使用一定的开发工具，完成规定的文档，在结构化和模块化的基础上进行信息系统的开发工作。结构化方法的开发过程一般是先把系统功能视为一个大的模块，再根据系统分析设计的要求对其进行进一步的模块分解或组合。结构化生命周期法主要特点如下：

**(1)开发目标清晰化。**结构化方法的系统开发遵循“用户第一”的原则，开发中要保持与用户的沟通，取得与用户的共识，这使得信息系统的开发建立在可靠的基础之上。  
**(2)工作阶段程式化。**结构化方法的每个阶段的工作内容明确，注重开发过程的控制。每一阶段工作完成后，要根据阶段工作目标和要求进行审查，这使得各阶段工作有条不紊，也避免为以后的工作留下隐患。  
**(3)开发文档规范化**。结构化方法的每一阶段工作完成后，要按照要求完成相应的文档，以保证各个工作阶段的衔接与系统维护工作的便利。  
**(4)设计方法结构化。**结构化方法采用自上而下的结构化、模块化分析与设计方法，使各个子系统间相对独立，便于系统的分析、设计、实现与维护。结构化方法被广泛地应用于不同行业信息系统的开发中，特别适合于那些业务工作比较成熟、定型的系统，如银行、电信、商品零售等行业。

2. 原型法

原型法是一种根据用户需求，利用系统开发工具，快速地建立一个系统模型展示给用户，在此基础上与用户交流，最终实现用户需求的信息系统快速开发的方法。在现实生活中，一个大型工程项目建设之前制作的沙盘，以及大型建筑的模型等都与快速原型法有同样的效果。  
应用快速原型法开发过程包括**系统需求分析、系统初步设计、系统调试、系统检测等阶段**。用户仅需在系统分析与系统初步设计阶段完成对应用系统的简单描述，开发者在获取一组基本需求定义后，利用开发工具生成应用系统原型，快速建立一个目标应用系统的最初版本，并把它提交给用户试用、评价，根据用户提出的意见和建议进行修改和补充，从而形成新的版本再返回给用户。通过这样多次反复，使得系统不断地细化和扩充，直到生成一个用户满意的方案为止。

3. 面向对象方法

面向对象方法是对客观世界的一种看法，它是把客观世界从概念上看成一个由相互配合、协作的对象所组成的系统。信息系统开发的面向对象方法的兴起是信息系统发展的必然趋势。  
数据处理包括数据与处理两部分。但在信息系统的发展过程的初期却是有时偏重这一面，有时偏重那一面。在20世纪70~80年代，偏重数据处理者认识到初期的数据处理工作是计算机相对复杂而数据相对简单。因此，先有结构化程序设计的发展，随后产生面向功能分解的结构化设计与结构化分析。偏重于数据方面人员同时提出了面向数据结构的分析与设计。到了20世纪80年代，兴起了信息工程方法，使信息系统开发发展到了新的阶段。  
信息工程在实际应用中既表现出其优越性的一面，同时，也暴露了一些缺点，例如，过于偏重数据，致使应用开发受到影响。而面向对象方法则集成了以前各种方法的优点，避免了各自的一些缺点。  
面向对象的分析方法是利用面向对象的信息建模概念，如实体、关系、属性等，同时运用封装、继承、多态等机制来构造模拟现实系统的方法。传统的结构化设计方法的基本点是面向过程，系统被分解成若干个过程。而面向对象的方法是采用构造模型的观点，在系统的开发过程中，各个步骤的共同目标是建造一个问题域的模型。在面向对象的设计中，初始元素是对象，然后将具有共同特征的对象归纳成类，组织类之间的等级关系，构造类库。在应用时，在类库中选择相应的类。  

4. 面向服务的方法

面向对象的应用构建在类和对象之上，随后发展起来的建模技术将相关对象按照业务功能进行分组，就形成了构件的概念。对于跨构件的功能调用，则采用接口的形式暴露出来。进一步将接口的定义与实现进行解耦，则催生了服务和面向服务的开发方法。  
从应用的角度来看，组织内部、组织之间各种应用系统的互相通信和互操作性直接影响着组织对信息的掌握程度和处理速度。如何使信息系统快速响应需求与环境的变化，提高系统可复用性、信息资源共享和系统之间的互操作性，成为影响信息化建设效率的关键问题，而面向服务的开发方法的思维方式恰好满足了这种需求。  
目前，面向服务的开发方法是一个较新的领域，许多研究和实践还有待进一步深入。但是，它代表着不拘泥于具体技术实现方式的一种新的系统开发思想，己经成为信息系统建设的大趋势，越来越多的组织开始实施面向服务的信息系统。

### 3.2 业务处理系统（TPS)

业务处理系统(Transaction Processing System,TPS)又可称为电子数据处理系统(Electronic Data Processing System,EDP),是计算机在管理方面早期应用的最初级形式的信息系统。自从1946年世界上第一台电子计算机诞生之后，TPS即开始获得广泛的应用，20世纪50至60年代出现了TPS的应用高潮，随着信息技术及相关学科的发展，TPS的功能越来越强大，应用的范围也越来越广。可以这样说，在当今世界的各行业各领域的管理系统中，几乎都有TPS的存在。  

#### 3.2.1 业务处理系统的概念

企业在经营活动过程中产生各种数据。这些数据利用传票记录、传送和保管，将传票的内容再转记到账目上。企业内建立反映各种活动的账簿，然后对账簿的内容进行统计、分类等处理，整理出各种用于管理决策的报表。这些“传票”“账簿”“报表”按组织体系有机地结合起来反映和支持整个经营管理活动，如图3-1所示。

![image-20230222下午24010551](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8824010551.png)

所谓**事务处理系统**，就是针对管理中具体的事务（如财会、销售、库存等）来辅助管理人员将所发生的数据进行记录、传票、记账、统计和分类，并制成报表等活动，为经营决策提供有效信息的基于计算机的信息系统。

TPS是服务于组织管理层次中最低层、最基础的信息系统。这些系统通常是一种分离式单独处理某一项具体事务的系统，如账务处理系统、工资管理系统、物料进出库管理系统、合同管理系统等。各个子系统有自己专有的软、硬件和专有的数据文件，它们之间一般不交流、不共享某些专用数据库文件。  
在作业层上，要处理的任务、所需的资源及要实现的目标都是预先确定的、高度结构化的。例如，一个公司的订货、发货业务，其处理过程可预先明确规定由如下事务组成。  

> ①接待顾客，商洽订货业务。
> ②将订货内容记入订货台账。
> ③检查库存。
> ④检查顾客的信用度。
> ⑤生成各种传票。
> ⑥按出库传票备货。
> ⑦将出库数量记入出、入库台账。
> ⑧将送货司机带回的收据和销售传票的内容进行核对。
> ⑨将结账单相销售传票进行核对。
> ⑩将结账单内容记入赊销台账。

上述业务大体可分成四个功能：  
第1个功能：由事务①②④构成，它们的主要作用是根据所接受的订货要求，确定是否接受这个要求，这组事务完成了订货受理功能。  
第2个功能：由事务⑤⑥构成，它们的主要作用是根据所接受的订货要求进行发货准备，如检查库存储状况，向仓库发出出库指示等，这组事务完成了发货准备功能。  
第3个功能：由事务⑥⑦构成，是仓库的具体发货工作，称为发货功能。  
第4个功能：由事务⑧⑨⑩构成，主要是对每一笔订货业务进行发货后的检查核对，并进行财务结账，以便向顾客发出付款通知，完成了付款通知各功能。  
构造支持类似上述业务处理过程的TPS的主要目的在于帮助作业层管理人员减轻处理原始数据负担，提高具体事务的处理效率。在某些情况下，甚至可以完全取代业务层的手工操作。因此，TPS主要放置于车间或一般的行政管理办公室，而处于企业系统边界的TPS则能将企业和它的外部环境联系起来。

#### 3.2.2 业务处理系统的功能

由于TPS的主要功能就是对企业管理中日常事务所发生的数据进行输入、处理和输出。因此，如图3-2所示，

![image-20230222下午24800826](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8824800826.png)

TPS的数据处理周期由以下5个阶段构成：**数据输入、数据处理、数据库的维护、文件报表的生成和查询处理**。下面对这5个阶段的工作过程作进一步的阐述。

1. 数据输入

数据输入是TPS工作过程的第1个阶段，该阶段主要解决如何将企业经营活动中产生的大量原始数据准确、迅速地输入到计算机系统中并存储起来，这是信息系统进行信息处理的“瓶颈”。因此，数据的输入方式和进度是这个阶段的关键问题。  
常见的数据输入方式有3种，即**人工、自动及二者结合**。若用人工输入数据，在运行TPS中的数据输入模块时，屏幕上就会显示出与原始数据凭证相似格式的画面，而后由作业层的管理人员通过键盘等输入装置进行数据输入，输入的数据以TPS预先确定好的格式（即数据库结构)存储或由TPS直接使用。这种传统的数据输入方式的缺点是显而易见的，即费时、费力，需要大量存储空间，而且还极易出错。  
随着计算机及相关技术的迅速发展，原始数据的输入也朝着自动化方向发展，只要将自动化数据录入装置，与远程TPS的计算机系统连接起来，就可以实现原始数据的自动化或半自动化输入。常见的自动化输入装置有：  

> (1)POS终端：获取条码或磁卡中的信息。  
> (2)光读机OCR:阅读条码信息。  
> (3)ATM:接收各种信用卡信息。  
> (4)扫描仪：输入图像信息。  
> (5)语音识别系统：输入声音信息。  
> (6)触摸屏：直接接收用户输入的信息。  

2. 数据处理

TPS中常见的数据处理方式有两种，**一种是批处理方式：另一种是联机事务处理方式。**  

**l)批处理(Batch Processing)**.   
这种方式是将事务数据积累到一段时间后进行定期处理（如每日、每周、每月等），批处理的主要作用：  

> (1)收集原始数据文件，如销售合同、发票等，结组成批。  
> (2)转储其他输入介质上的事务数据。   
> (3)将事务文件中数据进行分类，使之与主文件中的数据顺序一致。  
> (4)获取和存储远程的成批事务数据，或又可称为远程作业录入(Remote Job Entry,RJE)。  

一个典型的例子就是银行每日的账目处理，银行总是将白天的所有账目储存成批，等到白天的对外营业停止后再进行一次性处理，这样每个储户的银行平衡表就是每天修改一次，并产生相关的报表，其处理过程如图3-3所示。

![image-20230222下午25736551](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8825736551.png)

**批处理方式的优点是**：当有大量的事务数据需要处理时，使用批处理是一种较经济的方式，因为它可以缩减因频繁修改数据库所需的费用。这种方式适合于在事务发生时无须即时修改数据库以及只须定期产生文件、报表的应用。例如，在每周发放工资的情况下，员工的考勤数据及其他有关的工资数据就可以收集成批之后每周处理一次。  
**批处理方式的缺点**是：**在定期事务处理的间隔期，主文件易过时而且也无法满足实时的查询需求。**

**2)联机事务处理(OnLine Transaction Processing,OLTP)**

这种方式又可称为实时处理，即能对所发生的事务数据进行立即处理，并将处理结果提供给终端用户。事务数据一旦产生，则无须积累成批，也无须经过分类，就直接从联机的终端上输入到计算机系统中并进行处理。因此，这些事务数据总是从联机存储在接存取文件中，有关文件及数据库也立刻得到更新，并能即时响应终端用户的查询需求。

OLIP方式主要依赖于网络来实现事务终端、工作站和其他计算机系统之间的通信。某些实时处理是不能被中断的，如证券的股票交易、航空公司的客户订单等。为保证在硬件系统运行出现故障时这些实时处理仍能继续进行，通常要在TPS中采用有关的容错处理。常用的容错技术有：**双CPU的计算机、后备机、保存冗余数据**等。  
**OLIP方式的优点**是当事务数据产生时能即时更新有关的文件和数据库，并能立刻响应终端用户的查询请求。其缺点是成本高，由于是对数据库进行联机直接存取，为防止数据被非法存取或被偶然破坏，需要有一定授权机制。同时为保证实时处理不被中断，要采用有关的容错技术，这也需要额外的开支。但是，在某些情况下，以费用换取速度、效率和更优质的服务是值得的。  

3. 数据库的维护

一个组织的数据库通过TPS来更新，以确保数据库中的数据能及时、正确地反映当前最新的经营状况，因此数据库的维护是TPS的一项主要功能。这些数据库是一个企业的数据资源，能为支持中、高层管理人员决策的管理信息系统、决策支持系统和专家系统等提供有用的基础信息。对数据库的访问形式基本有4种：**检索、修改、存入和删除。**

4. 文件报表的产生

TPS的输出就是为终端用户提供所需的有关文件和报表，这些文件和报表根据其用途不同可分为以下几类。  

> **(l)行动文件(Action Documents):**即该文件的接收者持有文件后可进行某项事务处理，例如，采购订单交给采购员，采购员即可向有关的供应商购货：工资支票交给银行后，银行便向员工支付工资等。  
> **(2)信息文件(Information Documents):**该类文件向其持有者表明某项业务已发生了，例如订单确认书及客户发票向购货方表明供货方己供货了。这类文件有时也可作为控制文件使用。  
> **(3)周转文件(Turnaround Documents):**这类文件交给接受者之后通常还要返回到发送者手中，故称为周转文件。例如计算机印制的发票（多联）交给客户，客户必须将付款凭证与其中一联发票再一起交回，因此这类文件的信息可通过自动数据录入装置输入到计算机系统中。

TPS还产生一些其他类型的报表，用于记录和监控某段时间内业务发生或处理的结果，它们并不是因管理的需要而特别编制的，例如流水账（即业务日志）等。因此TPS产生的文件、报表是原始数据经简单的分类、汇总之后形成，几乎未经任何分析和概括，无法对中、高层管理人员的决策提供直接支持。  

5. 查询处理

TPS支持终端用户的**批次查询或联机实时查询**，典型的查询方式是用户通过屏幕显示获得查询结果，例如，销售人员可查询客户的合同情况，读者可查询图书馆的借书情况等。这种查询实际上是对数据库进行有条件的检索，因此，为保证数据的安全性和保密性，必须对不同级别的用户授以不同的访问权限。

#### 3.2.3 业务处理系统的特点

业务处理系统(TPS)是信息系统发展的最初级形式，但这并不意味着TPS不重要甚至不需要。实际上，TPS是其他类型信息系统的信息产生器，企业在推进全面信息化的过程中往往是从开发TPS入手的。由于TPS支持的是企业的日常业务管理，TPS一旦出现故障，就有可能导致企业的正常运作发生紊乱，例如航空公司的订票系统、银行的存取款/转账系统、企业的物料进出库系统等。同时，许多TPS是处于企业系统的边界，它是将企业与外部环境联系起来的“桥梁”。因此，TPS性能的好坏将直接影响着组织的整体形象，是提高企业市场竞争力的重要因素。  
由于TPS面对的是结构化程度很高的管理问题，因此可以采用结构化生命周期法来进行开发。而且同行业事务处理的相似性，使得越来越多的TPS都已商品化。所以，许多企业可直接购买现成的TPS,只要再进行一些简单的二次开发，就能投入使用，避免了低水平的重复开发工作。

### 3.3 管理信息系统(MIS)

管理信息系统(Manage Information System,MIS)是由业务处理系统发展而成的，是在TPS基础上引进大量管理方法对企业整体信息进行处理，并利用信息进行**预测、控制、计划、辅助**企业全面管理的信息系统。从MIS应用的历史和现状来看，MIS是一个高度集成化的人机信息系统，它是企业信息系统中职能明确、体系结构较为稳定、处理技术成熟、应用也最为成功的分支。管理信息系统中包含各种模型和方法，数据共享能力更大，能够提供分析、计划和辅助决策功能的系统，并具有改进企业组织的效能。

#### 3.3.1 管理信息系统的概念

从管理信息系统概念出发，管理信息系统由四大部件组成，即**信息源、信息处理器、信息用户和信息管理者**，见图3-4。

![image-20230222下午32123563](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8832123563.png)

首先，根据各部件之间的联系可分为开环和闭环。开环结构是在执行一个决策的过程中不收集外部信息，不根据信息情况改变决策，直至产生本次决策的结果，事后的评价只供以后的决策作参考。闭环结构是在决策过程中不断收集信息，不断发送给决策者，不断调整决策。事实上最后执行的决策已不是当初设想的决策，见图3-5。

![image-20230222下午32252241](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8832252241.png)

**计算机实时处理的系统均属于闭环系统**，而**批处理系统均属于开环系统**，但对于一些较长的决策过程来说批处理系统也能构成闭环系统。其次，根据处理的内容及决策的层次来看，我们可以把管理信息系统看成一个金字塔式的结构，见图3-6。

![image-20230222下午32429073](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8832429073.png)

组织管理均是分层次的，例如分为**战略计划、管理控制和运行控制**3层。由于一般管理均是按职能分条的，信息系统也就可以分为销售与市场、生产、财务与会计、人事及其他。一般来说，下层的系统处理量大，上层的处理量小，组成了纵横交织的金字塔结构。

管理信息系统的结构又可以用子系统及它们之间的连接来描述，所以又有管理信息系统的**纵向综合、横向**
**综合以及纵横综合**的概念。**横向综合是按层划分子系统，纵向综合就是按条划分子系统。**例如，把车间、科室以及总经理层的所有人事问题划分成一个子系统。**纵横综合则是金字塔中任何一部分均可与任何其他部分组成子系统，达到随意组合自如使用的目的。**

#### 3.3.2 管理信息系统的功能

一个管理信息系统从使用者的角度看，它总是有一个目标，具有多种功能，各种功能之间又有各种信息联系，构成一个有机结合的整体，形成一个功能结构。例如，一个企业的内部管理系统可以具有图3-7所示的结构。

![image-20230222下午32816256](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8832816256.png)

由图3-7可以看出，这里子系统的名称所标注的是管理的功能或职称，而不是计算机的名词。它说明管理信息系统能实现哪些管理功能。职能的完成往往是通过“过程”实现，过程是逻辑上相关活动的集合，因而往往把管理信息系统的功能结构表示成**功能-过程结构**，见图3-8。

![image-20230222下午32912106](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8832912106.png)

这个系统标明了企业各种功能子系统怎样互相联系并形成一个全企业的管理系统，是企业各种管理过程的一个缩影。整个流程自左至右展开，这里的企业主生产计划4是根据指令性计划、订货服务以及预测的结果来制订的。

通过库存管理决定需要多少原料、半成品、外购件以及资金，而且确定物料的到达时间及库存水平。要产生这些信息用到的产品数据由系统1得到，根据系统5的安排，系统10决定何时进行采购和订货手续：系统11决定何时何地接收货物：  
系统6决定何时何车间进行何种生产工作：系统6所安排的只是一个计划，只有通过系统7发出命令，一切工作才见行动：系统11在整个工作开始后，不断监视各种工作的完成情况，并进行调整和应急计划安排：最后进行包装并运出。图3-8中的工厂维护系统9的功能是安排大修，系统12是进行成本计划与控制。

#### 3.3.3 管理信息系统的组成

一个管理系统可用一个功能1层次矩阵表示，见图3-9。

![image-20230222下午33247669](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8833247669.png)

图3-9的每一列代表一种管理功能。其实这种功能没有标准的分法，因组织不同而异。图中每一行表示一个管理层次，行列交叉表示每一种功能于系统。各个职能子系统的简要职能如下。  
**(1)销售市场子系统。**它包括销售和推销，在运行控制方面包括雇用和训练销售人员、销售和推销的日常调度，还包括按区域、产品、顾客销售数量的定期分析等。在管理控制方面，包含总的成果和市场计划的比较，它所用的信息有顾客、竞争者、竞争产品和销售力量要求等。  
在战略计划方面包含新市场的开发和战略，它使用的信息包含顾客分析、竞争者分析、顾客评价、收入预测、入口预测和技术预测等。  
**(2)生产子系统。**它包括产品设计、生产设备计划、生产设备的调度和运行、生产人员的雇用和训练、质量控制和检查等。典型的业务处理是生产订货、装配订货、成品票、废品票和工时票等。运行控制要求将实际进度与计划相比较，发现问题环节：管理控制要求进行总进度、单位成本和工事消耗的计划比较：战略计划要考虑加工方法和自动化的方法。  
**(3)后勤子系统。**它包括采购、收货、库存控制和分发。典型的业务包括采购的征收、采购订货、制造订货、收货报告、库存票、运输票和装货票、脱库项目、超库项目、库营业额报告、卖主性能总结、运输单位性能分析等。管理控制包括每一后勤工作的实际与计划的比较，如库存水平、采购成本、出库项目和库存营业额等：战略分析包括信息的分配战略分析、对卖主的新政策、“做或买”的战略、新技术信息、分配方案等。  
**(4)人事子系统。**它包括雇用、培训、考核记录、工资和解雇等。其典型的业务有雇用需求的说明、工作岗位责任说明、培训说明、人员基本情况数据、工资变化、工作小时和离职说明等。运行控制关心的是雇佣、培训、终止、变化工资率、产生效果。管理控制主要进行实情与计划的比较，包括雇用数、招募费用、技术库存成分、培训费用、支付工资、工资率的分配和政府要求符合的情况。战略计划包括雇用战略和方案评价、工资、训练、收益、建筑位置及对留用人员的分析等，把本国的人员流动、工资率、教育情况和世界的情况进行
比较。  
**(5)财务和会计子系统。**按原理说财务和会计有不同的目标，财务的目标是保证企业的财务要求，并使其花费尽可能的低：会计则是把财务业务分类、总结，填入标准财务报告，准备预算、成本数据的分析与分类等。运行控制关心每天的差错和异常情况报告、延迟处理的报告和未处理业务的报告等：管理控制包括预算和成本数据的分析比较，如财务资源的实际成本，处理会计数据的成本和差错率等，战略计划关心的是财务保证的长期计划、减少税收影响的长期计划，成本会计和预算系统的计划。  
**(6)信息处理子系统。**该系统的作用是保证企业的信息需要。典型的任务是处理请求、收集数据、改变数据和程序的请求、报告硬件和软件的故障及规划建议等。运行控制的内容包括日常任务调度、差错率、设备故障。对于新项目的开发还应当包括程序员的进展和调试时间。管理控制关心计划和实际的比较，如设备成本、全体程序员的水平、新项目的进度和计划的对比等。战略计划关心功能的组织是分散还是集中、信息系统总体计划、硬件软件的总体结构。办公室自动化也可算作与信息处理分开的一个子系统或者是合一的系统。当前办公室自动化主要的作用是支持知识工作和文书工作，如字符处理、电子信件、电子文件和数据与声音通信。  
**(7)高层管理子系统。**每个组织均有一个最高领导层，如公司总经理和各职能域的副总经理组成的委员会，这个子系统主要为他们服务。其业务包括查询信息和支持决策，编写文件和信件便笺，向公司其他部门发送指令。运行控制层的内容包括会议进度、控制文件、联系文件。  
管理控制层要求各功能子系统执行计划的总结和计划的比较等。战略计划层关心公司的方向和必要的资源计划。高层战略计划要求广泛而综合的外部信息和内部信息，这里可能包括特级数据检索和分析以及决策支持系统。它所需要的外部信息可能包括：竞争者的信息、区域经济指数、顾客的喜好、提供的服务质量等。  
对应于这个管理系统，在管理信息系统中的软件系统或模块组成一个软件结构，见图3-10。

![image-20230222下午45324898](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8845324898.png)

图3-10中每个方块是一段程序块或是一个文件，每一个纵行是支持某一管理领域的软件系统。

### 3.4 决策支持系统(DSS)

#### 3.4.1 决策支持系统的概念

1. 决策支持系统的发展

20世纪70年代中期，首次提出了决策支持系统(Decision Support System,DSS)一词，标志着利用计算机与信息支持决策的研究与应用进入了一个新的阶段，并形成了决策支持系统新学科。  
20世纪70年代末期，DSS大都由模型库、数据库及人机交互系统3个部件组成。20世纪80年代初，DSS增加了知识库与方法库，构成了三库系统或四库系统。80年代后期，人工智能技术与DSS相结合，充分利用两者优点，形成了智能决策支持系统。提高了DSS支持非结构化决策问题的能力。近年来，DSS与计算机网络技术结合，构成了新型的能供异地决策者共同参与决策的群体决策支持系统。群体决策支持系统利用便捷的网络通信技术在多位决策者之间沟通信息，提供良好的协商与综合决策环境，以支持需要集体做出决定的重要决策。在此基础上，为了支持范围更广的群体，人们又将分布式数据库、模型库与知识库等决策资源有机地集成起来，构建分布式决策支持系统。  
DSS的发展与信息技术、管理科学、人工智能及运筹学等科学技术的发展密切相关。随着DSS研究与应用范围的扩大和层次的提高，新技术、新方法的不断推出与引入，DSS会逐步走向成熟，实用性与有效性会进一步提高。

2. 决策支持系统的定义

对DSS的定义始终存在着不同的观点，但都基本一致认为其定义**必须建立在对象所具有的特征之上**，下面列举几个比较典型的定义。

**1)定义一**

DSS是一个由语言系统、知识系统和问题处理系统3个互相关联的部分组成的，基于计算机的系统。  
DSS应具有的特征是：  

> (1)数据和模型是DSS的主要资源。  
> (2)DSS用来支援用户作决策而不是代替用户作决策。  
> (3)DSS主要用于解决半结构化及非结构化问题。  
> (4)DSS的作用在于提高决策的有效性而不是提高决策的效率。  

**2)定义二**

DSS应当是一个交互式的、灵活的、适应性强的基于计算机的信息系统，能够为解决非结构化管理问题提供支持，以改善决策的质量。DSS使用数据，提供容易使用的用户界面，并可以体现决策者的意图。DSS可以提供即时创建的模型，支持整个决策过程中的活动，并可能包括知识成分。  
DSS应具有的特征是：  

> (1)主要针对上层管理人员经常面临的结构化程度不高、说明不够充分的问题。  
> (2)界面友好，容易被非计算机人员所接受。  
> (3)将模型、分析技术与传统的数据存取与检索技术结合起来。  
> (4)具有对环境及决策方法改变的灵活性与适应性。  
> (5)支持但不是代替高层决策者进行决策。  
> (6)充分利用先进信息技术快速传递和处理信息。  

3. 决策支持系统的基本模式

DSS由若干部件按一定的结构组成，部件不同或结构不同会构成功能略有差异的DSS,但各种DSS的结构都建立在某种基本模式之上。DSS的基本模式反映DSS的形式及其与“真实系统”、人和外部环境的关系，如图3-11所示。其中管理者处于核心地位，运用自己的知识和经验，结合决策支持系统提供的支持，对其管理的“真实系统”进行决策。

![image-20230222下午51422081](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8851422081.png)

4. 决策支持系统的结构

具有不同功能特色的DSS,其系统结构也不相同。DSS的两种基本结构形式是两库结构和基于知识的结构，实际中的DSS由这两种基本结构通过分解或增加某些部件演变而来。  
两库结构由数据库子系统、模型库子系统和对话子系统形成三角形分布的结构，如图3-12所示。

![image-20230222下午51525118](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230222%E4%B8%8B%E5%8D%8851525118.png)

#### 3.4.2 决策支持系统的功能

决策支持系统的总体功能是支持各种层次的人们进行决策。从功能上分解，决策支持系统可细分为以下功能。  
(1)决策支持系统用来整理和提供本系统与决策问题有关的各种数据。各种不同的待决策的问题可能需要不同方面、不同层次的数据，如生产数据、库存数据、财务数据、设备运行数据等。  
(2)决策支持系统要尽可能地收集、存储和及时提供与决策有关的外部信息。外部信息是保证正确决策的重要依据，如市场需求、商品价格、原材料供应、竞争对手的经营状况等。  
(3)决策支持系统能及时收集和提供有关各项活动的反馈信息，包括系统内和与系统相关的信息，如计划完成情况、产品销售情况、用户反映信息等。  
(4)决策支持系统对各种与决策有关的模型具有存储和管理的能力。不同的决策内容需要不同的决策模型的支持，如库存控制模型、生产调度模型、投入产出模型等。  
(5)决策支持系统提供对常用的数学方法、统计方法和运筹方法的存储和管理，如统计检验方法、回归分析方法、线性规划方法等。  
(6)决策支持系统能对各种数据、模型、方法进行有效管理，为用户提供查找、变更、增加、删除等操作功能，以使用户可以对系统所提供的数据、模型和方法进行有效而灵活的运用，如数据的变更、模型的修改、方法的增删等，都可以通过系统来完成。  
(7)决策支持系统运用所提供的模型和方法对数据进行加工，并得出有效支持决策的信息，如对数据进行汇总、分析、预测等。  
(8)决策支持系统具有人-机对话接口和图形加工、输出功能，不仅用户可以对所需要的数据进行查询，而且可以输出相应的图形，如回答“What..if.”等类型的问题和输出各种统计、分析图表。  
(9)决策支持系统应能支持分布使用方式，提供有效的传输功能，以保证分散在不同地点的用户能共享系统所提供的模型、方法和可共享的数据，如系统在局域网的环境中运行，并提供了可共享的数据、模型和方法。由上述功能可见，决策支持系统应是在一种网络环境下，提供对数据、模型和方法进行管理功能的，并具有良好的人·机界面的完整的软件系统。一个实用的决策支持系统，更重要的是它拥有能对决策起辅助作用的丰富的数据和成熟的模型以及有效的方法。

#### 3.4.3 决策支持系统的特点

从决策支持系统的任务和功能，可以归纳出决策支持系统不同于其他计算机信息系统的特点。  
(1)决策支持系统面向决策者，系统在开发中遵循的需求和操作是设计系统的依据和原则。系统的收集、存储和输出的一切信息，都是为决策者服务。  
(2)决策支持系统支持对半结构化问题的决策。半结构化问题的复杂性致使传统的计算机信息系统，如电子数据处理系统、管理信息系统都难以解决，而决策支持系统则可以辅助决策者对决策信息过程和方案进行较系统且全面的分析。  
(3)决策支持系统的作用是辅助决策者、支持决策者。由于决策过程的复杂性和决策过程中的重要作用，系统不可能取代人而做出决策。在整个决策过程中系统不可能也不应该提供答案，也不应该强加给决策者预先规定的决策顺序。  
(4)决策支持系统体现决策过程的动态性。用户或用户通过模型，根据决策层次、决策环境、问题理解、知识积累等多方面变化的情况来动态地确定问题的解答，并在决策的动态运行过程中完善和调整系统。  
(5)决策支持系统提倡交互式处理。通过人·机对话的方式将决策人的经验、观念和判断纳入系统，进而将人们主观的、经验的判断与客观的信息反映相结合，最后确定决策方案。

#### 3.4.4 决策支持系统的组成

1. 数据的重组和确认

与决策支持系统相关的数据库的问题是，获得正确的数据并且可用理想的形式操作这些数据。有时这是非常困难的，因为从事务处理系统收集的数据必须经过重组和确认才能对决策支持有效。这个问题可以通过数据仓库的概念解决。  

2. 数据字典的建立

大多数支持商业信息系统的数据库并不能满足管理者决策支持的需要。现存数据库的问题是数据以特定的格式存储，同一个数据在不同系统中的表示不同。最重要的是，管理者不能得到他们需要的日常问题的答案。例如，去年同期的某一产品的特殊促销手段的影响，将对今年产品的定价产生什么样的影响。  
大多数现存作业层的数据库没有按有利于分析类型和查询应用的方式组织。起初，公司通过产生一些从查询得到的固定的数据析取来解决这样的问题。但这种方法使析取的数据固定在一个时间点上，并随时间的推移很快就不适用了。  
数据仓库是一个与作业层系统分离存在的数据库。通过对数据仓库的存取，管理者可以做出以事实为根据的决策来解决许多业务问题。例如，什么定价策略最有效，什么样的客户能带来更多的利润，什么样的产品有最大利润。  
生成数据仓库的过程十分直接。首先，数据被“提炼”出来，确认它们是有意义的、一致的和准确的，然后载入关系表中以便支持分析及查询应用。通常数据必须从多个生产系统和外部来源获得，这是一个困难的过程，包括识别相应数据、数据混合、提炼数据阶段以保证其有效性。最后数据需要与建立的逻辑数据模型相一致。

3. 数据挖掘和智能体

一旦建成数据仓库，管理者们需要运用工具进行数据存取和查询，这个过程为数据挖掘，使用的工具称为智能体。智能体是管理者用来在关系数据库中搜寻相应数据的软件，用来做趋势分析、异常情况识别和结果跟踪。数据挖掘工具同时也被用来识别数据的模式，从模式中得出规则，并且利用另外的数据检验来精炼这些规则。数据挖掘的结果类型包括：  
**(1)联合：**把各个事件联系在一起的过程。例如，将学生们经常同时选修的两门课程联系起来，以便这两门课程不被安排在同一时间。  
**(2)定序：**识别模式的过程。例如，识别学生们多个学期课程的次序。  
**(3)分类：**根据模式组织数据的过程。例如，以学生完成学业的时间(4年以内，4年以上)为标准分成几个小组。  
**(4)聚类：**推导特定小组与其他小组相区分的判断规则的过程。例如，通过兴趣、年龄、工作经验来划分学生。  
数据仓库的主要优点是向管理者提供所需要的数据和用来分析这些数据的工具。数据仓库的概念使信息系统专业人员从日常定制报告的编程中解脱出来，给决策者提供真正的决策支持工具。此外，许多数据仓库工具还配有图形用户界面，以便用户的使用。 

4. 模型建立

模型管理的目的就是帮助决策者理解与选择有关的现象。例如，在一场广告竞争中，能够知道一种产品对年轻未婚的职业人员或年轻已婚的蓝领工人是否具有吸引力是有益的。大量业务问题需要分析可选的方案设计，模型是建立分析框架的一种有利的工具。  
每种模型都有不同的应用范围，例如，统计模型包括回归分析、方差和指数平滑，会计模型包括折旧、纳税计划和成本分析，人事管理模型包括环境模拟、角色练习，市场营销模型包括广告策略分析、消费者选择倾向及消费者行为转变分析。建立一个决策支持系统的难点在于，必须清楚系统应包括什么样的模型，如何使这些模型对决策者有意义。  
模型也有不同的特点，有一些是经验的，有一些是客观的。经验模型包括判断和专家的意见，例如，一个内科医生使用一个经验模型去诊断心脏的状况，客观模型意味着数据分析独立于决策者的经验。**建立模型的方法有穷枚举法、算法、启发式和模拟法**。  
**(1)神经网络经常支持穷枚举法**。一个神经网络包括许多简单的处理单元，它们结合成网络，每个处理单元基于输入的特性及权重产生一个输出。神经网络可以帮助解决复杂模式匹配、不完全信息和大规模数据的问题。神经网络通过一组例子训练，当网络通过训练样本训练过之后，用另一组例子来测试它的性能。不同于规则推理，训练后神经网络得出的决策标准可能与传统或常规规则相矛盾，但是决策结果是有效的。  
**(2)算法或算法模型是一组可以循环执行以获得结果的过程**。算法支持许多类型的业务决策，包括如何投资，何时对商品进行广告宣传，如何把员工分派到项目中去。  
(3)另外一个建立模型的基础是启发式，启发式是经验法则，用于分析结构化程度低的问题。**启发式模型**经常在专家系统设计中使用，因为这些模型可以使用户应用规则来重复专家解决结构化程度低的技巧。  
(4)第4个建模的方法是**模拟**，模拟的目标是仿真。如模拟工厂的运作、业务的操作或一个国家的政治气候。通过这些，用户能在每个环境中进行策略改变分析。

###  3.5 专家系统(ES)

#### 3.5.1 专家系统的概念

1. 专家系统

基于知识的专家系统简称为**专家系统(Expert System,ES)**是人工智能的一个重要分支。专家系统的能力来自于它所拥有的专家知识，知识的表示及推理的方法则提供了应用的机理。因此这种基于知识的系统设计是以**知识库和推理**机为中心而展开的。 

 $$知识+推理=系统$$  
而传统的软件的结构是：  
$$数据结构+算法=程序$$  
专家系统是一种智能的计算机程序，该程序使用知识与推理过程，求解那些需要资深专家的专门知识才能解决的高难度问题。  
由此定义可以看出，专家系统既不同于传统的应用程序，也不同于其他类型的人工智能问题求解程序。不同点主要表现在以下5个方面。  
(1)专家系统属于人工智能范畴，其求解的问题不是传统程序求解的结构化问题，而是半结构化或非结构化问题，需要应用启发法或弱方法来解决，它不同于传统应用程序的算法。  
(2)传统应用程序通过建立数学模型去模拟问题领域，而专家系统模拟的是人类专家在问题领域的推理，而不是模拟问题领域本身。从模拟对象的不同，足可以区分出专家系统与传统的应用程序。  
(3)专家系统由3个要素组成：**描述问题状态的综合数据库、存放启发式经验知识的知识库和对知识库的知识进行推理的推理机。**三要素分别对应**数据级、知识库级和控制级**三级知识，而传统应用程序只有**数据和程序**两级结构。它将描述算法的过程性计算信息与控制性判断信息合而为一地编码在程序中，缺乏专家系统的灵活性。  
(4)专家系统处理的问题属于现实世界中必须具备人类专家的大量专门知识才能解决的问题，它必须可靠地工作，并在合理的时间内对求解的问题给出可用的解答。所以它面对的往往是实际的问题，而不是纯学术的问题。  
(5)从求解手段来看，专家系统的高性能是通过将问题领域局限在相对狭窄的特定领域内，它更强调该领域中人类专家的专门知识的应用。专家系统所拥有的这种启发式知识的数量和质量，将决定专家系统的性能和效率。从这个方面讲，专家系统的问题求解的通用性是较差的。  
总之，专家系统是使用某个领域内实际专家所拥有的领域知识来求解问题，而不是用那些从数学或计算机科学中导出的与领域关系不大的方法来解决问题。所以专家系统适合于完成那些**没有公认的理论和方法、信息不完整、人类专家短缺或专门知识相对昂贵的工作，诸如规划、设计及决策制定、医疗诊断、质量监控等**。  

2. 人工智能

人工智能(Artificial Intelligence,AI)旨在利用机械、电子、光电或生物器件等制造的装置或机器模仿人类的智能。自古以来，人类对人工智能就有持久、狂热的追求，想用机器来代替人的部分脑力劳动，从而用机器来延伸和扩展人类的智能行为。1956年夏季，在美国的达特茅斯大学(Dartmouth University)的一次学术讨论会上，由当时的年轻数学助教，现为斯坦福大学教授的麦卡锡(J.MeCarthy)首次提出用人工智能来描述具有模仿或复制人脑功能能力的计算机系统，从而开创了人工智能作为一门独立学科的研究方向。麦卡锡因此也被成为人工智能之父。  
**1)人工智能的特点**  
AI研究的重点放在开发具有智能行为的计算机系统上，智能行为表现出以下5个特点。  
(1)从过去的事件或情形中汲取经验，并将从经验中得到的知识应用于新的环境和场景。然而汲取经验并应用知识不是计算机系统的本性，它需要精心为其设计的软件提供支持。  
(2)具有在缺乏重要信息时解决问题的能力。  
(3)具有处理和操纵各种符号、理解形象化图片（图像）的能力。  
(4)想象力和创造力。  
(5)善于启发。  
上面列出的仅是智能行为的部分特征。目前人工智能与人的智能还有巨大的差别。

**2)人工智能的主要分支**  
人工智能是一个极为广泛的领域，AI的主要分支有专家系统、机器人技术、视觉系统、自然语言处理、学习系统和神经网络等，如图3-13所示。各个分支之间的相互密切关联的，一个领域取得的进展往往会引起其他领域的进步。

![image-20230223上午101133450](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230223%E4%B8%8A%E5%8D%88101133450.png)

#### 3.5.2 专家系统的特点

专家系统与一般的计算机系统相比有着特殊的设置，二者的相异之处如表3-1所示。进一步剖析专家系统，可发现它具有以下主要特性：  
![image-20230223上午101631042](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230223%E4%B8%8A%E5%8D%88101631042.png)

1. 超越时间限制

人类专家的工作时间有限，但专家系统是恒久的，一旦开发完成，可随时使用，并可24小时持续运作。

2. 操作成本低廉

人类专家稀少且昂贵，虽然专家系统在起步发展时必须花一笔不小的经费，但日常操作的成本比起人类专家便宜许多。因此在专家不在或经济上请专家不合算的情况下，利用专家系统仍能处理与专家水平相等的工作。

3. 易于传递与复制

专家与专家知识是稀有的资源，在知识密集的工作环境下，新进人员需要做相当多的训练，而关键人物的知识随着人事变动不能储存，在传递起来亦耗时费力但专家系统则不然，它能轻易地将知识传递或复制。

4. 处理手段一致

人类专家判断决策的结果常会因时或因人而异，而专家系统对于所处理的问题则具有一致性的输出。

5. 善于克服难题

由于专家系统具有既定的知识库与严谨的推理程序，因此往往比人类专家还能胜任一些执行起来较费时、复杂度较高的工作，如需要庞大计算量的问题。另外，若工作的内容重复性很高，专家系统比人类专家能有更佳的表现。

6. 适用特定领域

由于建构搜集知识库以及推理规则有一定的困难，因此专家系统通常只使用小范围的特定知识领域。而当问题的知识牵涉较广，或是没有一定的处理程序时，就必须靠人类专家的智慧来处理。  
目前，专家系统和人工智能所关注的是，把数据和信息转换为可使用知识的能力，吸取和分享专家意见，并且把知识管理成一种至关重要的竞争资源。虽然人工智能和专家系统在物流方面的应用还很有限，但是目前己显示出其提高物流生产率和物流质量的能力，许多原型都已取得了很大的收益。作为集物流、商流、信息流、资金流于一身的配送中心，智能系统发挥的作用将愈来愈明显。

#### 3.5.3 专家系统的组成

由于专家系统的应用领域不同，求解问题的类型不同，专家系统的结构也略有差别。但总的来说，专家系统的核心部分基本相同，其一般结构如图3-14所示。

![image-20230223上午102609301](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230223%E4%B8%8A%E5%8D%88102609301.png)

**专家系统的结构与系统的适用性和有效性密切相关**，选择什么样的系统结构，要根据系统的应用环境和所执行任务的特点而定。  

1. 知识库

专家系统的知识库用来存放系统求解实际问题的领域知识。一般来说，知识库中的知识可分成两类：一类为**事实性知识**：另一类是**启发性知识**。这些知识可以从书籍中或亲身实践中获得。

事实通常指的是公共定义的或已经发生的具体事件。事实性知识尽管相对容易获得，但在求解问题时是不可或缺的。

启发性知识是领域专家在长期的工作中获得的经验总结，一般条例性差，较难理解，且适用范围窄，但对求解问题却十分有效，它使专家系统的决策在领域中具有专家的水平。  
知识库中的知识主要供推理机求解问题时使用。知识库要具有知识存储、检索、排序、增删改等管理功能。知识的表示方法和组织结构是设计知识库时必须考虑的问题。知识表示方法要尽量简洁、准确地表达领域专家的知识。知识的组织结构要增强知识的模块性和独立性，便于知识库的管理和维护。

2. 综合数据库

综合数据库是专家系统在执行与推理过程中用以存放所需要和产生的各种信息的工作存储器，通常包括欲解决问题的初始状态描述、中间结果、求解过程的记录、用户对系统提问的回答等信息，因此，**综合数据库又叫动态知识库**，其内容在系统运行过程中是不断变化的。相应地把**专家系统的知识库称为静态知识库**，因为它在一次推理中其内容是保持不变的，只有领域专家或知识工程师通过知识获取模块或系统通过自学习功能才能改变它的内容。可以认为，综合数据库和知识库一起才构成专家系统的完整知识库。在设计专家系统时，一般使综合数据库的数据表示与组织和知识库的知识表示与组织相一致。这样可以方便推理机的推理。

3. 推理机

推理机和知识库一起构成专家系统的核心。甚至有人认为专家系统等于知识库加推理机。推理机也被称为控制结构或规则解释器，通常包括推理机制和控制策略，是一组用来控制系统的运行、执行各种任务、根据知识库进行各种搜索和推理的程序模块。  
专家系统中常用的推理方式有3种：**正向推理或前向推理、反向推理或逆向推理、双向推理或混合推理**。  

正向推理又称数据驱动策略，即从条件出发推出结论。反向推理又称目标驱动策略，即先假设结论正确，再去验证条件是否满足，若诸条件都满足，则证明结论正确：否则，再由另一个假设去推断结论。**正向推理适用于目标解空间很大的问题。反向推理适用于解空间较小的问题。**双向推理是正向推理和反向推理同时进行，以期在某一时刻使正、反向推理过程达到某种一致状态而获得问题的解。**在双向推理中，常常用正向推理来确定各种假设证实的先后次序，一旦确定后，又用反向推理验证假设是否成立。**
推理机的构成与实现依赖于领域问题的性质和知识表示方法及组织结构。在设计专家系统时，一般使知识库和推理机相分离，即求解问题的知识与使用知识的程序相分离，以保证专家系统的模块性、灵活性和可维护性。

4. 知识获取

知识获取模块主要有两方面功能：一是知识的编辑和求精：二是知识自学习。两者相辅相成，负责管理知识库中的知识，根据需要添加、修改或删除知识以及由此产生的一些必要的改动，维护知识库的一致性和完整性。知识的编辑与求精，可使领域专家的经验或书本上的知识转化为系统所需的内部形式，作为新知识移入知识库，同时也可以使领域专家方便地修改知识库。自学习功能可以根据系统运行过程中积累的经验自动地修改和补充知识库的知识，发现求解问题的规律，提高系统的性能和处理效率。

5. 解释程序

解释程序是面向用户服务的，负责解答用户提出的各种问题。这些问题既可以是和系统运行过程有关的，也可以是关于系统性能和行为的。当用户得到一个问题的答案时，可以通过向专家系统提问的方式，验证推理结果的合理性或正确性，了解专家系统对问题求解过程的细节。这时，通过解释程序，专家系统可以针对性地以一种用户易于理解的形式对用户的问题进行解释，回答推导结论的步骤、每个步骤的根据、所用的各种数据和知识等。目前，解释程序的实现方法大多是在推理过程中，把每步推理所用的数据和知识按推理的顺序连接起来，一旦需要解释时，就把这个推理链一步一步地显示给用户，以此作为对用户提问的回答。

6. 人一机接口

人一机接口通常包括两部分：一部分是专家系统与用户的接口：另一部分是专家系统与领域专家和知识工程师的接口。与用户的接口可直接处理用户的操作命令和提出的问题，通过对命令的解释和对问题的分析，将结果传送到推理机、综合数据库和知识库，以启动系统的问题求解过程，同时也将系统对用户的提问以及对问题求解过程的跟踪解释传递给用户，使用户对专家系统的执行动态有所了解。与领域专家和知识工程师的接口可接受领域专家或知识工程师的知识，使领域专家或知识工程师了解系统的性能，并进一步改善和提高系统求解问题的能力。   
不论是哪种接口，都要包括输入和输出，完成系统的内部表示形式和外部表示形式（用户、领域专家和知识工程师易于理解和接受的形式)的相互转换。随着自然语言理解、语音识别、图像处理、文字识别等技术的不断完善和逐步成熟，专家系统将会更多地采用包含图、文、声、像的多媒体接口。  

一般的专家系统通过推理机与知识库和综合数据库的交互作用来求解领域问题。这种求解过程有如下几个步骤。  

> (1)根据用户的问题对知识库进行搜索，寻找有关的知识。  
> (2)根据有关的知识和系统的控制策略形成解决问题的途径，即知识操作算子序列，从而构成一个假设集合。  
> (3)对解决问题的一组可能假设方案进行排序，并挑选其中在某些准则下最优的假设方案。  
> (4)根据挑选的解决方案去求解具体问题。
> (5)如果该方案不能真正解决问题，则追溯到假设方案序列中的下一个假设方案，重复求
> 解问题。
> (6)上述过程循环进行，直至问题己经解决或者所有的求解方案都不能解决问题而宣告“本系统该问题无解”为止。

### 3.6 办公自动化系统(OAS)

#### 3.6.1 办公自动化系统的概念

1. 办公活动

自从人类社会形成以来就存在着办公活动，办公可以说是处理群体公务的活动。具体地说，办公活动就是抄写、打字、发布文件、传达批示、批阅文件、安排日程表、开会、分析、判断、决策等：办公室则是人们管理信息的场所。办公活动所涉及的信息类型十分复杂，通常有以下几种：数据，指各种计算数据和原始数据，以数值型为主：文字，指用各种语言文字所表示的文件、公文、信函、报告、电报等；声音，指用声音形式表达的各种信息、命令、指示、通知、电报等：图形，指静态的图形如各种产品样本、照片、图案、图表、文件上的公章及首长亲笔签字等；图像，指动态的图形如电视转播、电视会议、闭路电视图像等。

在办公室工作的有4类人员：

> 第1类是主管人员即领导：
>
> 第2类是专业人员，从事技术、财务、销售等专门工作：
>
> 第3类是秘书，他们协助主管人员或专业人员，进行一些日常工作处理，如接电话、收发信函、接待来访、约定会晤时间等；
>
> 第4类是办事员，帮秘书做复印文件、邮寄、归档等具体事务工作。

这4类人主要承担的工作有：  

> (1)处理数据：如编制定期的报表，准备会议用的数字材料等，这些工作有的是手工处理，有的是在计算机上处理，其中一部分便是事务处理系统的任务。  
> (2)文字处理：包括起草、修改、审阅分发、收缴文件报告或者函件、通知等。  
> (3)分类归档：不论数据报表还是文字报告文件的存储，都有分类归档保存以备日后查询的需要。一般都设专人管理。  
> (4)沟通：办公室人员要花很多时间在开会和打电话上，个人独自思考和读、写文件时间反而很少。  
> (5)决策：这是主管人员的基本任务，至于专业人员，他们或是自己对具体问题做出决定，或是辅助主管人员做出决定。决策是办公室内关键性的活动。  

从上面5项活动可以看出，越是底层人员则承担前两三项的任务越多，高层人员则集中在后两项工作上。

2. 办公自动化的概念

办公自动化就是办公信息处理手段的自动化。从20世纪50年代电子打字机的出现，70年代文字处理机的出现，直至80年代迅速发展起来的办公自动化系统，表明办公自动化的发展历史虽短，但是办公手段却发生了翻天覆地的变化，经历了从低级到高级、从简单到复杂、从单功能到多功能的发展过程，并逐步向系统化、综合化、数字化、标准化、智能化、网络化方向发展。与业务处理系统和管理信息系统等以数据处理的信息系统有所不同，OAS要解决的是包括数据、文字、声音、图像等信息的一体化处理问题。  
目前，对办公自动化这一概念还没有一个公认的定义。从本质上讲，办公自动化就是以先进的科学技术为基础，利用有关办公自动化设备协助办公人员管理各项办公信息，主要利用资源以提高办公效率和办公质量。它是一个集文字、数据、语言、图像为一体的综合性、跨学科的人机信息处理系统，**计算机技术、通信技术、系统科学和行为科学是它的4大支柱**。其中以行为科学为主导，系统科学为理论基础，结合运用计算机技术和通信技术。

#### 3.6.2 办公自动化系统的功能

OAS的功能就是要能完成办公信息处理各个环节的任务，准确并及时地为有关单位人员提供信息服务，改善办公环境，提高办公效率。从业务性质来看，OAS的主要功能有3项。

1. 事务处理

企业中各个办公部门都有大量的烦琐事情，如发送通知、草拟文件、打字文印、数据汇总、报表合成、日程安排和会议组织等，一般由企业内的文案工作者来完成的。实行OAS可以把这类大量、繁杂、反复性强的事务交由有关的设备及相应的软件来完成，以达到提高工作效率，减轻工作负担和节省人力的目的。这种办公自动化系统称为事务办公系统，它又可分为两种，即单机处理系统和可以支持一个机构内的各办公室的多机处理系统。   
(1)单机系统主要完成以下任务：①文字处理，完成各类文件、报告、通知等书面材料的起草、修改、编辑及存储，并能通过相应的输出设备（如打印机、轻印刷设备等）输出符合需求、排版精美的书面文本：②日程安排，为各级办公人员或某一部门安排活动日程工作计划，具有自动提醒、提示、警告等能力；③文档管理，能对各类文件档案资料收发登录，处理领导批示、检阅登记、分类存储、建立目录、主题词等索引，方便查询，并有行文追踪的随机查询和自动提示的功能：④电子报表，能对各种数据进行报表格式处理并对各种报表格式的数据进行输入、加工、计算及输出：⑤数据处理，能对各种办公数据包括人事、工资、财务、房屋、基、建、车辆和各种办公用品等进行数据采集、计算和存储，主要是利用数据库管理系统来构造小型办公事务处理数据库。  
(2)多机系统具有通信功能，实现信息共享，主要功能有：①电子会议，包括会议日程安排、资料查问、发言记录、会议纪要等：②电子邮件，利用计算机及其网络系统对各种公文、信函、报表和资料进行编辑、加工、收发、存储及传递，实现无纸办公：③语音处理，利用电子设备对语音进行识别、合成、存储并传输，如电话会议、语音信箱等：④图形图像处理，对办公事务中的图形（静态）、图像（动态）进行输入、加工、传输和输出，如电视会议、图形扫描、文字传真等：⑤联机情报检索，对国内、国际上的大型综合情报资料数据库进行联机检索，以获得所需相关领域的信息。  

2. 信息管理

对信息流的控制管理是每个办公部门最本质的工作，主要包括信息的收集、加工、传递、交流、存取、提供、分析、判断、应用和反馈那些办公人员的综合性工作，一般由企业中层管理人员完成。支持这类办公活动的办公自动化系统可称为管理型办公系统，它能将事务型办公系统中各项孤立的事务处理通过信息交换和共享资源联系起来，获得准确、快捷、及时、优质的功效。管理型办公系统是一种分布式的处理系统，具有计算机通信和网络功能。

3. 辅助决策

决策是根据预定目标做出的行动决定，它是办公活动的重要组成部分，一般由企业高层领导人及其“智囊团”（即专业人员）来完成。担任辅助决策的办公自动化系统可称为决策型办公系统，以经理型办公系统提供的大量信息作为决策工作的基础，建立起能综合分析、预测发展、判断利弊的计算机可运行的决策模型，根据原始数据信息，自动做出比较符合实际的决策方案。

#### 3.6.3 办公自动化系统的组成

办公自动化系统是现代企业办公的一类信息系统，OAS的组成包括以下4部分。

1. 计算机设备

计算机设备包括主机系统、终端设备及外部设备。办公自动化系统通常是一个局城网系统，它由主机系统连接各种终端以及远地工作站、远程终端。因此，主机系统至少要由超级微机来担任，它必须具备有高速的处理机，有大容量的存储设备，有各种高低档的外部设备。终端设备是安置在各办公室内供工作人员使用的，一般情况下系统都会为用户提供一个用户界面，如菜单式提示，以方便用户使用。外部设备包括输入设备、输出设备。在办公自动化系统中使用的输入设备除了常用的键盘输入以外，经常使用的还有语音输入、手写输入、图像输入等形式。输出设备有各种类型的打印机，如针式打印机、喷墨打印机、激光打印机等，可以输出各类印制要求较高的公文和报表。

2. 办公设备

办公设备包括电话机、传真机、电传机、复印机和轻印刷设备。各种大容量存储介质（如光盘、缩微胶片等)以及电子会议支持设备（如闭路电视、投影仪等）等。

3. 数据通信及网络设备

数据通信及网络设备应能连接各远程结点，便于快速处理数据，及时上传下达。

4. 软件系统

软件系统体现了办公自动化的全部功能，可分为以下3大类：系统软件，如操作系统软件网络系统软件等，提供应用软运行的系统支持：专用软件，根据实际应用，利用一定的系统开发方法和开发工具进行各项办公信息、事务处理和管理的专用程序：支持软件，辅助专用软件完成相应的管理工作，如文字处理软件、数据库管理系统、电子邮件支持软件、图形图像处理软件等几类软件与系统软件一般都是通过购买而直接使用的。

### 3.7 企业资源规划(ERP)

企业资源规划(Enterprise Resource Planning,ERP)是企业在生产制造过程普遍使用的一种信息系统。它由美国Gartner Group公司于1990年提出。企业资源规划是企业制造资源规划(Manufacturing Resource Planning IⅡ，MRPI)的下一代制造业系统和资源计划系统软件。除了MRPⅡ已有的生产资源计划、制造、财务、销售、采购等功能外，还有质量管理，实验室管理，业务流程管理，产品数据管理，存货、分销与运输管理，人力资源管理和定期报告系统。  
目前，在我国ERP所代表的含义已经被扩大，用于企业的各类软件，已经统统被纳入ERP的范畴。它跳出了传统企业边界，从供应链范围去优化企业的资源，是基于网络经济时代的新一代信息系统。它主要用于改善企业业务流程以提高企业核心竞争力。

#### 3.7.1 企业资源规划的概念

企业的所有资源包括三大流：**物流、资金流和信息流**。ERP也就是对这3种资源进行全面集成管理的管理信息系统。概括地说，ERP是建立在信息技术基础上，利用现代企业的先进管理思想，全面地集成了企业的所有资源信息，并为企业提供决策、计划、控制与经营业绩评估的全方位和系统化的管理平台。ERP系统是一种管理理论和管理思想，不仅仅是信息系统。它利用企业的所有资源，包括内部资源与外部市场资源，为企业制造产品或提供服务创造最优的解决方案，最终达到企业的经营目标。  
ERP理论与系统是从MRPⅡ发展而来的。MRP-Ⅱ的核心是物流，主线是计划，但ERP已将管理的重心转移到财务上，在企业整个经营运作过程中贯穿了财务成本控制的概念。ERP极大地扩展了业务管理的范围及深度，包括质量、设备、分销、运输、多工厂管理、数据采集接口等。ERP的管理范围涉及企业的所有供需过程，是对供应链的全面管理。企业运作的供需链结构，如图3-15所示。

![image-20230223上午105713064](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230223%E4%B8%8A%E5%8D%88105713064.png)

#### 3.7.2 企业资源规划的结构

ERP中的企业资源包括企业的“三流”资源，即**物流资源、资金流资源和信息流资源**。ERP实际上就是对这“三流”资源进行全面集成管理的管理信息系统。  

![image-20230223上午105813931](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230223%E4%B8%8A%E5%8D%88105813931.png)

ERP的结构原理如图3-16所示。由图可知，ERP主要包括了以下11个基本模块。

1)生产预测

市场需求是企业生存的基础，在ERP中首先需要对市场进行较准确的预测。预测主要用于计划，在ERP的5个层次的计划中，前3个层次计划，即经营计划、生产计划大纲和主生产计划的编制都离不开预测。常用的预测方法有**德尔菲(Delphi)方法、移动平移法、指数平滑法和非线性最小二乘曲线拟合法**。

2)销售管理（计划）

销售管理主要是针对企业的销售部门的相关业务进行管理。企业销售部门是企业与市场连接的桥梁，其主要职能是为客户和最终用户提供服务，从而使企业获得利润，实现其经济和社会价值。销售管理从其计划角度来看，属于最高层计划的范畴，是企业最重要的决策层计划之一。

3)经营计划（生产计划大纲）

生产计划大纲(Production Planning,PP)是根据经营计划的生产目标制定的，是对企业经营计划的细化，用以描述企业在可用资源的条件下，在一定时期中的产量计划。生产计划大纲在企业决策层的3个计划中有承上启下的作用，一方面它是企业经营计划和战略规划的细化，另一方面它又用于指导企业编制主生产计划，指导企业有计划地进行生产。

4)主生产计划

主生产计划(Master Production Schedule,MPS)是对企业生产计划大纲的细化，说明在一定时期内的下计划：生产什么，生产多少和什么时候交货。主生产计划的编制以生产大纲为准，其汇总结果应当等同于生产计划大纲，同时，主生产计划又是其下一层计划一物料需求计划的编制依据。主生产计划的编制是ERP的主要工作内容。主生产计划的质量将大大影响企业的生产组织工作和资源的利用。

5)物料需求计划

物料需求计划是对主生产计划的各个项目所需的全部制造件和全部采购件的网络支持计划和时间进度计划。它根据主生产计划对最终产品的需求数量和交货期，推导出构成产品的零部件及材料的需求数量和需求时期，再导出自制零部件的制作订单下达日期和采购件的采购订单发送日期，并进行需求资源和可用能力之间的进一步平衡。物料需求计划是生产管理的核心，它将主生产计划安排生产的产品分解成各自制零部件的生产计划和采购件的采购计划。物料需求计划属于ERP管理层计划。

6)能力需求计划

能力需求计划(Capacity Requirements Planning,CRP)是对物料需求计划所需能力进行核算的一种计划管理方法。旨在通过分析比较MRP的需求和企业现有生产能力，及早发现能力的瓶颈所在，为实现企业的生产任务而提供能力方面的保障。

7)车间作业计划

车间作业计划(Production Activity Control,PAC)是在MRP所产生的加工制造订单（即自制零部件生产计划)的基础上，按照交货期的前后和生产优先级选择原则以及车间的生产资源情况（如设备、人员、物料的可用性、加工能力的大小等），将零部件的生产计划以订单的形式下达给适当的车间。车间作业计划属于EP执行层计划。当前主流的车间作业计划模式是JIT(Just In Time)模式。

8)采购与库存管理

采购与库存管理是ERP的基本模块，其中采购管理模块是对采购工作，即从采购订单产生至货物收到的全过程进行组织、实施与控制，库存管理(Inventory Management,,IM)模块则是对企业物料的进、出、存进行管理。

9)质量与设备管理

质量管理贯穿于企业管理的始终。企业经营活动中的各环节、各项工作以及各种产品都离不开质量，都要讲究质量。全面质量管理(Total Quality Management,TQM)是质量管理的主要实施模式，它要求对企业的全过程进行质量管理，而且明确指出执行质量职能是企业全体人员的责任。  
设备管理是指依据企业的生产经营目标，通过一系列的技术、经济和组织措施，对设备寿命周期内的所有设备物资运动形态和价值运动形态进行的综合管理。

10)财务管理

会计工作是企业管理的重要组成部分，是以货币的形式反映和监督企业的日常经济活动，并对这些经济业务的数据进行分类、汇总，以便为企业管理和决策提供必要的信息支持。企业财务管理是企业会计工作和活动的统称，财务管理是一种综合性的管理，它渗透在企业全面的经济活动之中，哪里有经济活动，哪里就有资金运动，哪里就有财务管理。

I1)ERP有关扩展应用模块

与ERP有关的扩展应用模块，如客户关系管理、分销资源管理、供应链管理和电子商务等。这几个扩展模块本身也是一个独立的系统，在市场上它们常作为独立的软件产品进行出售和实施。

#### 3.7.3 企业资源规划的功能

ERP为企业提供的功能是多层面的和全方位的，主要包括：  
(1)支持决策的功能。ERP在MRPⅡ的基础上扩展了管理范围，给出了新的结构，将企业内部业务流程划分成几个相互协同作业的支持子系统，如财务、市场营销、生产制造、质量控制、服务维护和工程技术等，并在功能上增加了质量控制、运输、分销、售后服务与维护，以及市场开发、人事管理等功能，把企业的制造系统、营销系统、财务系统等都紧密地结合在一起，可以实现全球范围内的多工厂、多地点的跨国经营运作。因而，能够不断地收到来自各个业务过程的运作信息，并且提供了对质量控制、市场变化、客户满意度、经营效绩等关键问题的实时分析，从而有力地支持企业的各个层面上的决策。  
(2)为处于不同行业的企业提供有针对性的IT解决方案。ERP打破了MRPⅡ只局限在传统制造业的格局，把应用扩展到其他行业，并逐渐形成了针对于某种行业的解决方案。有些EP供应商除了传统的制造业解决方案外，还推出了商业与零售业、金融业、能源、公共事业、工程与建筑业等行业的解决方案，以财务、人事、后勤等功能为核心，加入每一行业特殊的需求。  
(3)从企业内部的供应链发展为全行业和跨行业的供应链。当前企业只有联合该行业中其他上下游企业，建立一条业务关系紧密、经济利益相连的供应链实现优势互补，才能适应社会化大生产的竞争环境，共同增强市场竞争实力。因此，供应链的概念就由狭义的企业内部业务流程扩展为广义的全行业供应链及跨行业的供应链，ERP的管理范围亦相应地由企业的内部拓展到整个行业的原材料供应、生产加工、配送环节、流通环节以及最终消费者。在整个行业中建立一个环环相扣的供应链，使多个企业能在一个整体的ERP管理下实现协作经营和协调运作。把这些企业的分散计划纳入整个供应链的计划中，从而大大增强该供应链在大市场环境中的整体优势，同时也使每家企业之间均可实现以最小的个别成本和转换成本来获得成本优势。

### 3.8 典型信息系统架构模型

#### 3.8.1 政府信息化与电子政务

1. 电子政务的概念

电子政务实质上是对现有的、工业时代形成的政府形态的一种改造，即利用信息技术和其他相关技术，将其管理和服务职能进行集成，在网络上实现政府组织结构和工作流程优化重组，超越时间、空间与部门分隔的制约，实现公务、政务、商务、事务的一体化管理与运行。电子政务主要包括3个组成部分：  

> (1)政府部门内部的电子化和网络化办公。  
> (2)政府部门之间通过计算机网络进行的信息共享和实时通信。  
> (3)政府部门通过网络与居民之间进行的双向信息交流。   

电子政务的发展过程实质上是对原有的政府形态进行信息化改造的过程，通过不断地摸索和实践，最终构造出一个与信息时代相适应的政府形态。

2. 电子政务的内容

在社会中，与电子政务相关的行为主体主要有3个，即政府、企（事）业单位及居民。因此，政府的业务活动也主要围绕着这3个行为主体展开。政府与政府，政府与企（事）业，以及政府与居民之间的互动构成了下面5个不同的、却又相互关联的领域。  
(1)政府与政府。  
政府与政府之间的互动包括首脑机关与中央和地方政府组成部门之间的互动：中央政府与各级地方政府之间：政府的各个部门之间、政府与公务员和其他政府工作人员之间的互动。这个领域涉及的主要是政府内部的政务活动，包括国家和地方基础信息的采集、处理和利用，如人口信息：政府之间各种业务流所需要采集和处理的信息，如计划管理：政府之间的通信系统，如网络系统：政府内部的各种管理信息系统，如财务管理：以及各级政府的决策支持系统和执行信息系统，等等。  
(2)政府对企（事）业。  
政府面向企业的活动主要包括政府向企（事）业单位发布的各种方针、政策、法规、行政规定，即企（事）业单位从事合法业务活动的环境：政府向企（事）业单位颁发的各种营业执照、许可证、合格证和质量认证等。  
(3)政府对居民。  
政府对居民的活动实际上是政府面向居民所提供的服务。政府对居民的服务首先是信息服务，让居民知道政府的规定是什么，办事程序是什么，主管部门在哪里，以及各种关于社区公安和水、火、天灾等与公共安全有关的信息。户口、各种证件和牌照的管理等政府面向居民提供的各种服务。政府对居民提供的服务还包括各公共部门，如学校、医院、图书馆和公园等。  
(4)企业对政府。  
企业面向政府的活动包括企业应向政府缴纳的各种税款，按政府要求应该填报的各种统计信息和报表，参加政府各项工程的竞、投标，向政府供应各种商品和服务，以及就政府如何创造良好的投资和经营环境，如何帮助企业发展等提出企业的意见和希望，反映企业在经营活动中遇到的困难，提出可供政府采纳的建议，向政府申请可能提供的援助，等等。  
(5)居民对政府。  
居民对政府的活动除了包括个人应向政府缴纳的各种税款和费用，按政府要求应该填报的各种信息和表格，以及缴纳各种罚款等外，更重要的是开辟居民参政、议政的渠道，使政府的各项工作不断得以改进和完善。政府需要利用这个渠道来了解民意，征求群众意见，以便更好地为人民服务。此外，报警服务（盗贼、医疗、急救、火警等）即在紧急情况下居民需要向政府报告并要求政府提供的服务，也属于这个范围。  
当前，世界各国电子政务的发展就是围绕着上述5个方面展开的，其目标除了不断地改善政府、企业与居民三个行为主体之间的互动，使其更有效、更友好、更精简、更透明之外，更强调在电子政务的发展过程中对原有的政府结构以及政府业务活动组织的方式和方法等进行重要的、根本的改造，从而最终构造出一个信息时代的政府形态。

2. 电子政务的内容

在社会中，与电子政务相关的行为主体主要有3个，即政府、企（事）业单位及居民。因此，政府的业务活动也主要围绕着这3个行为主体展开。政府与政府，政府与企（事）业，以及政府与居民之间的互动构成了下面5个不同的、却又相互关联的领域。

**(1)政府与政府。**  
政府与政府之间的互动包括首脑机关与中央和地方政府组成部门之间的互动：中央政府与各级地方政府之间：政府的各个部门之间、政府与公务员和其他政府工作人员之间的互动。这个领域涉及的主要是政府内部的政务活动，包括国家和地方基础信息的采集、处理和利用，如人口信息：政府之间各种业务流所需要采集和处理的信息，如计划管理：政府之间的通信系统，如网络系统：政府内部的各种管理信息系统，如财务管理：以及各级政府的决策支持系统和执行信息系统，等等。  
**(2)政府对企（事）业。**  
政府面向企业的活动主要包括政府向企（事）业单位发布的各种方针、政策、法规、行政规定，即企（事）业单位从事合法业务活动的环境：政府向企（事）业单位颁发的各种营业执照、许可证、合格证和质量认证等。  
**(3)政府对居民。**  
政府对居民的活动实际上是政府面向居民所提供的服务。政府对居民的服务首先是信息服务，让居民知道政府的规定是什么，办事程序是什么，主管部门在哪里，以及各种关于社区公安和水、火、天灾等与公共安全有关的信息。户口、各种证件和牌照的管理等政府面向居民提供的各种服务。政府对居民提供的服务还包括各公共部门，如学校、医院、图书馆和公园等。  
**(4)企业对政府。**  
企业面向政府的活动包括企业应向政府缴纳的各种税款，按政府要求应该填报的各种统计信息和报表，参加政府各项工程的竞、投标，向政府供应各种商品和服务，以及就政府如何创造良好的投资和经营环境，如何帮助企业发展等提出企业的意见和希望，反映企业在经营活动中遇到的困难，提出可供政府采纳的建议，向政府申请可能提供的援助，等等。  
**(5)居民对政府。**  
居民对政府的活动除了包括个人应向政府缴纳的各种税款和费用，按政府要求应该填报的各种信息和表格，以及缴纳各种罚款等外，更重要的是开辟居民参政、议政的渠道，使政府的各项工作不断得以改进和完善。政府需要利用这个渠道来了解民意，征求群众意见，以便更好地为人民服务。此外，报警服务（盗贼、医疗、急救、火警等）即在紧急情况下居民需要向政府报告并要求政府提供的服务，也属于这个范围。  
当前，世界各国电子政务的发展就是围绕着上述5个方面展开的，其目标除了不断地改善政府、企业与居民三个行为主体之间的互动，使其更有效、更友好、更精简、更透明之外，更强调在电子政务的发展过程中对原有的政府结构以及政府业务活动组织的方式和方法等进行重要的、根本的改造，从而最终构造出一个信息时代的政府形态。

3. 电子政务的技术形式

电子政务在世界范围内的迅速发展经过了近50年的信息化进程，西方发达国家政府内部的管理信息系统和各种决策支持系统已经基本完成。当前，电子政务在世界范围内的发展有2个主要的特征：**第1个特征是以互联网为基础设施，构造和发展电子政务。第2个特征是，就电子政务的内涵而言，更强调政府服务功能的发挥和完善，包括政府对企业、对居民的服务以及政府各部门之间的相互服务。**

电子政务的发展大致经历了以下4个阶段。  

> (1)起步阶段。政府信息网上发布是电子政务发展起步阶段较为普遍的一种形式。大体上是通过网站发布与政府有关的各种静态信息，如法规、指南、手册、政府机构、组织、官员和通信联络等。  
> (2)政府与用户单向互动。在这个阶段，政府除了在网上发布与政府服务项目有关的动态信息之外，还向用户提供某种形式的服务。  
> (3)政府与用户双向互动。在这个发展阶段，政府与用户可以在网上完成双向的互动。一个典型的例子是用户可以在网上取得报税表，在网上填完报税表，然后，从网上将报税表发送至国税局。  
> (4)网上事务处理。沿用上面举过的例子，如果国税局在网上收到企业或居民的报税表并审阅后，向报税人寄回退税支票：或者在网上完成划账，将企业或居民的退税所得直接汇入企业或居民的账户。这样，居民或企业在网上就完成了整个报税过程的事务处理。到了这一步，可以说，电子政务在居民报税方面是趋于成熟了。因为，它是以电子的方式实实在在地完成了项政府业务的处理。  

一般来说，电子政务所要处理的业务流有数百个之多。在电子政务的发展中，这数百个业务流的信息化不可能同时进行，更不可能同时趋于成熟。相反地，只能按照轻重缓急，根据需要和可能，一批一批地开发。因此，建设一个成熟的电子政务可能需要十几年甚至数十年的时间，是一个持续的发展过程。

4. 电子政务的应用领域

按照电子政务的应用结构，我国电子政务的应用领域可以集中在以下6个方面。  

> (1)面向社会的应用，主要包括：政府通过自己的网站向社会发布信息，为社会公众提供查询服务：面向社会的各类信访、建议、反馈以及数据收集和统计系统：各类公共服务性业务的信息发布和实施，如工商管理、税务管理、保险管理、城建管理等：面向社会的各类项目的申报、申请：相关文件、法规的发布。  
> (2)政府部门之间的应用，主要包括：各级政府间的公文信息审核、传递系统：各级政府间的多媒体信息应用平台，如视频会议、多媒体数据交换等；同级政府间的公文传递、信息交换。  
> (3)政府部门内部的各类应用系统，主要包括：政府内部的公文流转、审核、处理系统：政府内部的各类专项业务管理系统，如日程安排、会议管理、机关事务管理等：政府内部面向不同管理层的统计、分析系统。  
> (4)涉及政府部门内部的各类核心数据的应用系统，主要包括：机要、秘密文件及相关管理系统：领导事务管理系统，如日程安排等：涉及重大事件的决策分析、决策处理系统：涉及国家重大事务的数据分析、处理系统。  
> (5)政府电子化采购，也就是政府的电子商务。  
> (6)电子社区，即城市社区管理中信息手段的应用。

#### 3.8.2 企业信息化与电子商务

1. 企业信息化的概念

企业作为国民经济的基本单元，其信息化程度是国家信息化建设的基础和关键。企业信息化就是企业利用现代信息技术，通过信息资源的深入开发和广泛利用，实现企业生产过程的自动化、管理方式的网络化、决策支持的智能化和商务运营的电子化，不断提高生产、经营、管理、决策的效率和水平，进而提高企业经济效益和企业竞争力的过程。  
如果从动态的角度来看，企业信息化就是企业应用信息技术及产品的过程，或者更确切地说，企业信息化是信息技术由局部到全局，由战术层次到战略层次向企业全面渗透，运用于流程管理、支持企业经营管理的过程。这个过程表明，信息技术在企业的应用，在空间上是一个从无到有、由点到面的过程：在时间上具有阶段性和渐进性，起初是战术阶段，经过逐步深化，发展到战略阶段：信息化的核心和本质是企业运用信息技术，进行知识的挖掘和编码，对业务流程进行管理。企业信息化的实施，一般来说，可以沿两个方向进行，**一是自上而下，必须与企业的制度创新、组织创新和管理创新结合：二是自下而上，必须以作为企业主体的业务人员的直接受益和使用水平逐步提高为基础。**

2. 企业信息化的目的

企业信息化的具体目标是优化企业业务活动，使之更加有效，它的根本目的在于提高企业竞争能力，使得企业具有平稳和有效的运作能力，对紧急情况和机会做出快速反应，为企业内外部用户提供有价值的信息。企业信息化涉及对企业管理理念的创新，管理流程的优化，管理团队的重组和管理手段的革新。  
**(1)技术创新。**现实的情况是：一方面，我国企业能够拥有并掌握的技术创新成果甚少，相关信息闭塞：另一方面，又有大量的技术开发成果被沉淀和搁置，造成惊人的浪费。对此，必须运用信息技术，通过在生产工艺设计、产品设计中计算机辅助设计系统的应用，通过互联网及时了解和掌握创新的技术信息，才能加快技术向生产的转化。还有，生产技术与信息技术相结合，能够大幅度地提高技术水平和产品的竞争力。  
**(2)管理创新。**按照市场发展的要求，要对企业现有的管理流程重新整合，从作为管理核心的财务、资金管理，转向技术、物资、人力资源的管理，并延伸到企业技术创新、工艺设计、产品设计、生产制造过程的管理，进而扩展到客户关系管理、供应链的管理乃至发展到电子商务。实现这样的管理目标，就必须借助信息技术，发挥计算机的信息采集、储存功能和网络的传递与共享功能。  
**(3)制度创新。**在建立现代企业制度的过程中，信息化起着重要的作用。特别是在由计划经济体制向市场经济体制转轨的过程中，赋予企业信息化一系列特殊的使命，那些不适应企业信息化的管理体制、管理机制和管理制度必须得到创新。同时，通过计算机网络系统管理，建立起明确的岗位责任和精准的监管体系：借助互联网获取全面、系统、及时的信息，彻底改变企业一直沿用的计划经济体制的资源分配方式和管理方式，注重市场信息的分析和研究，提供准确及时的决策信息：应用科学的方法实施管理。因此，建立在计算机网络技术基础上的管理，才更科学、更有效。我们在倡导企业技术改造、技术创新的同时，还应当倡导企业加快管理改造和管理创新。

3. 企业信息化的规划

企业信息化一定要建立在企业战略规划基础之上，以企业战略规划为基础建立的企业管理模式是建立企业战略数据模型的依据。  
企业信息化就是**技术和业务**的融合。这个“融合”并不是简单地利用信息系统对手工的作业流程进行自动化改造，而是需要从3个层面来实现。  
**(1)企业战略的层面。**在规划中必须对企业目前的业务策略和未来的发展方向作深入分析。通过分析，确定企业的战略对企业内外部供应链和相应管理模式，从中找出实现战略目标的关键要素，分析这些要素与信息技术之间的潜在关系，从而确定信息技术应用的驱动因素，达到战略上的融合。  
**(2)业务运作层面。**针对企业所确定的业务战略，通过分析获得实现这些目标的关键驱动力和实现这些目标的关键流程。这些关键流程的分析和确定要根据它们对企业价值产生过程中的贡献程度来确定。关键的业务需求是从那些关键的业务流程分析中获得的，它们将决定未来系统的主要功能。这一环节非常重要，因为，信息系统如果能够与这些直接创造价值的关键业务流程相融合，这对信息化投资回报的贡献是非常巨大的，也是信息化建设的成败的一个衡量指标。  
**(3)管理运作层面。**虽然这一层面从价值链的角度上来说，是属于辅助流程，但它对企业日常管理的科学性、高效性是非常重要的。另外，在企业战略层面的分析中，我们可以获得适应企业未来业务发展的管理模式，这个模式的实现是离不开信息技术的支撑的。所以，在管理运作层面的规划上，除了提出应用功能的需求外，还必须给出相应的信息技术体系，这些将确保管理模式和组织架构适应信息化的需要。  
企业战略数据模型分为**数据库模型和数据仓库模型**，数据库模型用来描述日常事务处理中数据及其关系；数据仓库模型则描述企业高层管理决策者所需信息及其关系。在企业信息化过程中，数据库模型是基础，一个好的数据库模型应该客观地反映企业生产经营的内在联系。数据库是办公自动化、计算机辅助管理系统、开发与设计自动化、生产过程自动化、Intranet的基础和环境。  
信息技术和网络技术都在飞速发展，企业信息化是多种类、多层次信息系统建设、集成和应用的过程，因而，不是一蹴而就的事情，需要结合企业的实际，全面规划，分步实施。  

4. 企业信息化方法

通过二三十年的发展，人们已经总结出了许多非常实用的企业信息化方法，并且还在探索新的方法。这里只简单介绍几种常用的企业信息化方法。  
**(1)业务流程重构方法。**企业业务流程重构的中心思想是，在信息技术和网络技术迅猛发展的时代，企业必须重新审视企业的生产经营过程，利用信息技术和网络技术，对企业的组织结构和工作方法进行“彻底的、根本性的”重新设计，以适应当今市场发展和信息社会的需求。  
**(2)核心业务应用方法。**任何一家企业，要想在市场竞争的环境中生存发展，都必须有自己的核心业务，否则，必然会被市场所淘汰。当然，不同的企业，其核心业务是不同的。比如，一个石油生产企业，原油的勘探开发生产就是它的核心业务。围绕核心业务应用计算机技术和网络技术是很多企业信息化成功的秘诀。  
**(3)信息系统建设方法。**对大多数企业来说，建设信息系统是企业信息化的重点和关键。因此，信息系统建设成了最具普遍意义的企业信息化方法。  
**(4)主题数据库方法。**主题数据库就是面向企业业务主题的数据库，也就是面向企业的核心业务的数据库。有些企业，特别是在业务数量浩繁，流程错综复杂的大型企业里，建设覆盖整个企业的信息系统往往很难成功。但是，各个部门的局部开发和应用又有很大弊端，会造成系统分割严重，形成许多“信息孤岛”，造成大量的无效或低效投资。在这样的企业里，应用主题数据库方法推进企业信息化无疑是一个投入少、效益好的方法。  
**(5)资源管理方法。**计算机技术和网络技术的应用为企业资源管理提供了强大的能力。目前，流行的企业信息化的资源管理方法有很多，最常见的有企业资源计划(Enterprise Resource Planning,ERP)、供应链管理(Supply Chain Management,SCM)等。  
**(6)人力资本投资方法。**人力资本的概念是经济学理论发展的产物。人力资本与人力资源的主要区别是人力资本理论把一部分企业的优秀员工看作是一种资本，能够取得投资收益。人力资本投资方法特别适用于那些依靠智力和知识而生存的企业，例如，各种咨询服务、软件开发等企业。

## 第4章信息安全技术基础知识

信息是一种重要的战略资源，信息的获取、处理和安全保障能力成为一个国家综合国力的重要组成部分，信息安全事关国家安全和社会稳定。信息安全理论与技术的内容十分广泛，包括**密码学与信息加密、可信计算、网络安全和信息隐藏**等多个方面。

### 4.1 信息安全基础知识
#### 4.1.1 信息安全的概念

信息安全包括5个基本要素：**机密性、完整性、可用性、可控性与可审查性**。  

> (1)机密性：确保信息不暴露给未授权的实体或进程。  
> (2)完整性：只有得到允许的人才能修改数据，并且能够判别出数据是否已被篡改。  
> (3)可用性：得到授权的实体在需要时可访问数据，即攻击者不能占用所有的资源而阻碍授权者的工作。  
> (4)可控性：可以控制授权范围内的信息流向及行为方式。  
> (5)可审查性：对出现的信息安全问题提供调查的依据和手段。  

信息安全的范围包括：**设备安全、数据安全、内容安全和行为安全**。

1)设备安全  
信息系统设备的安全是信息系统安全的首要问题，是信息系统安全的物质基础，它包括3个方面。  

> (1)设备的稳定性：指设备在一定时间内不出故障的概率。  
> (2)设备的可靠性：指设备在一定时间内正常执行任务的概率。  
> (3)设备的可用性：指设备可以正常使用的概率。  

2)数据安全  
数据信息可能泄露，可能被篡改，数据安全即采取措施确保数据免受未授权的泄露、篡改和毁坏，包括以下3个方面。  

> (1)数据的秘密性：指数据不受未授权者知晓的属性。  
> (2)数据的完整性：指数据是正确的、真实的、未被篡改的、完整无缺的属性。  
> (3)数据的可用性：指数据可以随时正常使用的属性。  

3)内容安全  
内容安全是信息安全在政治、法律、道德层次上的要求，包括以下3个方面。  

> (1)信息内容在政治上是健康的。  
> (2)信息内容符合国家的法律法规。  
> (3)信息内容符合中华民族优良的道德规范。

4)行为安全  
信息系统的服务功能是指最终通过行为提供给用户，确保信息系统的行为安全，才能最终确保系统的信息安全。行为安全的特性如下。  
(1)行为的秘密性：指行为的过程和结果不能危害数据的秘密性。  
(2)行为的完整性：指行为的过程和结果不能危害数据的完整性，行为的过程和结果是预期的。  
(3)行为的可控性：指当行为的过程偏离预期时，能够发现、控制和纠正。

#### 4.1.2 信息存储安全

信息的存储安全包括**信息使用的安全（如用户的标识与验证、用户存取权限限制、安全问题跟踪等)、系统安全监控、计算机病毒防治、数据的加密和防止非法的攻击**等。  

1. 信息使用的安全

1)用户的标识与验证  
用户的标识与验证主要是限制访问系统的人员。它是访问控制的基础，是对用户身份的合法性验证。用户的标识与验证方法有两种，**一是基于人的物理特征的识别，包括签名识别法、指纹识别法和语音识别法：二是基于用户所拥有特殊安全物品的识别，包括智能IC卡识别法、磁条卡识别法**。  

2)用户存取权限限制  
用户存取权限限制主要是限制进入系统的用户所能做的操作。存取控制是对所有的直接存取活动通过授权进行控制以保证计算机系统安全的保密机制，是对处理状态下的信息进行保护。  
它一般有两种方法：**隔离控制法和限制权限法**。  
**(1)隔离控制法。**隔离控制法是在电子数据处理成分的周围建立屏障，以便在该环境中实施存取。隔离控制技术的主要实现方式包括**物理隔离方式、时间隔离方式、逻辑隔离方式和密码技术隔离方式**等。  
**(2)限制权限法。**限制权限法是有效地限制进入系统的用户所进行的操作。即对用户进行分类管理，安全密级、授权不同的用户分在不同类别：对目录、文件的访问控制进行严格的权限控制，防止越权操作；放置在临时目录或通信缓冲区的文件要加密，用完尽快移走或删除。

2. 系统安全监控

系统必须建立一套安全监控系统，全面监控系统的活动，并随时检查系统的使用情况，一旦有非法入侵者进入系统，能及时发现并采取相应措施，确定和填补安全及保密的漏洞。还应当建立完善的审计系统和日志管理系统，利用日志和审计功能对系统进行安全监控。管理员还应该经常做以下4方面的工作。  

> (1)监控当前正在进行的进程和正在登录的用户情况。  
> (2)检查文件的所有者、授权、修改日期情况和文件的特定访问控制属性。  
> (3)检查系统命令安全配置文件、口令文件、核心启动运行文件、任何可执行文件的修改情况。  
> (4)检查用户登录的历史记录和超级用户登录的记录，如发现异常应及时处理。

3. 计算机病毒防治

计算机网络服务器必须加装网络病毒自动检测系统，以保护网络系统的安全，防范计算机病毒的侵袭，并且必须定期更新网络病毒检测系统。  
由于计算机病毒具有隐蔽性、传染性、潜伏性、触发性和破坏性等特点，所以需要建立计算机病毒防治管理制度。  

> (1)经常从软件供应商网站下载、安装安全补丁程序和升级杀毒软件。  
> (2)定期检查敏感文件。对系统的一些敏感文件定期进行检查，以保证及时发现已感染的病毒和黑客程序。  
> (3)使用高强度的口令。尽量选择难以猜测的口令，对不同的账号选用不同的口令。  
> (4)经常备份重要数据，要坚持做到每天备份。  
> (5)选择、安装经过公安部认证的防病毒软件，定期对整个硬盘进行病毒检测和清除工作。  
> (6)可以在计算机和因特网之间安装使用防火墙，提高系统的安全性。  
> (7)当计算机不使用时，不要接入因特网，一定要断掉网络连接。  
> (8)重要的计算机系统和网络一定要严格与因特网物理隔离。  
> (9)不要打开陌生人发来的电子邮件，无论它们有多么诱人的标题或者附件，同时要小心处理来自于熟人的邮件附件。  
> (10)正确配置系统和使用病毒防治产品。正确配置系统，充分利用系统提供的安全机制提高系统防范病毒的能力，减少病毒侵害事件。了解所选用防病毒产品的技术特点，正确配置以保护自身系统的安全。

#### 4.1.3 网络安全

1. 网络安全漏洞

通常，入侵者寻找网络存在的安全弱点，从缺口处无声无息地进入网络。因而开发黑客反击武器的思想是找出现行网络中的安全弱点，演示、测试这些安全漏洞，然后指出应如何堵住安全漏洞。当前，信息系统的安全性非常弱，主要体现在操作系统、计算机网络和数据库管理系统都存在安全隐患，这些安全隐患表现在以下方面。  

> (1)物理安全性。凡是能够让非授权机器物理接入的地方都会存在潜在的安全问题，也就是能让接入用户做本不允许做的事情。  
> (2)软件安全漏洞。“特权”软件中带有恶意的程序代码，从而可以导致其获得额外的权限。  
> (3)不兼容使用安全漏洞。当系统管理员把软件和硬件捆绑在一起时，从安全的角度来看，可以认为系统将有可能产生严重安全隐患。所谓的不兼容性问题，即把两个毫无关系但有用的事物连接在一起，从而导致了安全漏洞。一旦系统建立并运行，这种问题很难被发现。  
> (4)选择合适的安全哲理。这是一种对安全概念的理解和直觉。完美的软件，受保护的硬件和兼容部件并不能保证正常而有效地工作，除非用户选择了适当的安全策略和打开了能增加其系统安全的部件。

由于网络传播信息快捷且隐蔽性强，在网络上难以识别用户的真实身份，网络犯罪、黑客攻击、有害信息传播等方面的问题日趋严重，网络安全已成为网络发展中的一个重要课题。网络安全的产生和发展，标志着传统的通信保密时代过渡到了信息安全时代。

2. 网络安全威胁

一般认为，目前网络存在的威胁主要表现在以下5个方面。  
**(1)非授权访问。**没有预先经过同意就使用网络或计算机资源被看作非授权访问，如有意避开系统访问控制机制，对网络设备及资源进行非正常使用或擅自扩大权限，越权访问信息。  
它主要有以下几种形式：假冒、身份攻击、非法用户进入网络系统进行违法操作、合法用户以未授权方式进行操作等。  
**(2)信息泄露或丢失。**信息泄露或丢失指敏感数据在有意或无意中被泄露出去或丢失，它通常包括信息在传输中丢失或泄露、信息在存储介质中丢失或泄露以及通过建立隐蔽隧道等方式窃取敏感信息等。如黑客利用电磁泄露或搭线窃听等方式可截获机密信息，或通过对信息流向、流量、通信频度和长度等参数的分析，推测出有用信息，如用户口令、账号等重要信息。  
**(3)破坏数据完整性。**以非法手段窃得对数据的使用权，删除、修改、插入或重发某些重要信息，以取得有益于攻击者的响应：恶意添加，修改数据，以干扰用户的正常使用。  
**(4)拒绝服务攻击。**它不断对网络服务系统进行干扰，改变其正常的作业流程，执行无关程序使系统响应减慢甚至瘫痪，影响正常用户的使用，甚至使合法用户被排斥而不能进入计算机网络系统或不能得到相应的服务。  
**(5)利用网络传播病毒。**通过网络传播计算机病毒的破坏性大大高于单机系统，而且用户很难防范。  

3. 安全措施的目标

安全措施的目标包括如下几个方面。  

> (1)访问控制。确保会话对方（人或计算机）有权做它所声称的事情。  
> (2)认证。确保会话对方的资源（人或计算机）与它声称的一致。  
> (3)完整性。确保接收到的信息与发送的一致。  
> (4)审计。确保任何发生的交易在事后可以被证实，发信者和收信者都认为交换发生过，即所谓的不可抵赖性。  
> (5)保密。确保敏感信息不被窃听。  

### 4.2 信息系统安全的作用与意义

随着信息产业的空前繁荣，危害信息安全的事件也在不断发生。比如：黑客入侵已经成为一种经常性、多发性事件，每年都有许多黑客入侵的严重事件发生。利用计算机进行经济犯罪已超过普通经济犯罪。目前，钓鱼网站、电信诈骗、QQ诈骗等犯罪活动，已经成为直接骗取民众钱财的常见形式，严重扰乱了社会治安。计算机病毒已超过几万种，而且还在继续增加，追求经济和政治利益、团体作案、形成地下产业链，已经成为计算机病毒的新特点。  
2010年，美国和以色列黑客利用APT(Advanced Persistent Threaten)攻击，物理摧毁了伊朗纳坦兹核工厂上千台铀浓缩离心机，重创伊朗核计划，这一事件表明黑客攻击已经从过去的窃取信息为主的“软打击”，上升到毁坏硬件设备的“硬摧毁”阶段。  
敌对势力的破坏、恶意软件的入侵、黑客攻击、利用计算机犯罪、网络有害信息泛滥、个人隐私泄露等等，对信息安全构成了极大威胁，严重危害人民的身心健康，危害社会的安定团结，危害了国家的主权与发展。我国正处于建设有中国特色社会主义现代化强国的关键时期，必须采取强有力措施确保我国的信息安全。
我国政府高度重视信息安全，2014年中央成立了中央网络安全与信息化领导小组，集中领导与规划我国的信息化发展与信息安全保障，习近平主席亲自担任中央网络安全与信息化领导小组组长。2014年2月，他指出：没有网络安全就没有国家安全，没有信息化就没有现代化。  
网络安全和信息化是事关国家安全和国家发展、事关广大人民群众工作生活的重大战略问题，要从国际国内大势出发，总体布局，统筹各方，创新发展，努力把我国建成为网络强国。

### 4.3 信息安全系统的组成框架

信息系统安全系统框架通常由技术体系、组织机构体系和管理体系共同构建。  
#### 4.3.1 技术体系

从实现技术上来看，**信息安全系统涉及基础安全设备、计算机网络安全、操作系统安全、数据库安全、终端设备安全等多方面技术**。  
(1)基础安全设备包括密码芯片、加密卡、身份识别卡等，此外还涵盖运用到物理安全的物理环境保障技术，建筑物、机房条件及硬件设备条件满足信息系统的机械防护安全，通过对电力供应设备以及信息系统组件的抗电磁干扰和电磁泄漏性能的选择性措施达到相应的安全目的。  
(2)计算机网络安全指信息在网络传输过程中的安全防范，用于防止和监控未经授权破坏更改和盗取数据的行为。通常涉及物理隔离，防火墙及访问控制，加密传输、认证、数字签名摘要，隧道及VPN技术，病毒防范及上网行为管理，安全审计等实现技术。  
(3)操作系统安全是指操作系统的无错误配置、无漏洞、无后门、无特洛伊木马等，能防止非法用户对计算机资源的非法存取，一般用来表达对操作系统的安全需求。操作系统的安全机制包括标识与鉴别机制、访问控制机制、最小特权管理、可信通路机制、运行保障机制、存储保护机制、文件保护机制、安全审计机制，等等。  
(4)数据库安全可粗略划分为数据库管理系统安全和数据库应用系统安全两个部分，主要涉及物理数据库的**完整性、逻辑数据库的完整性、元素安全性、可审计性、访问控制、身份认证、可用性、推理控制、多级保护以及消除隐通道等相关技术**。
(5)终端安全设备从电信网终端设备的角度分为电话密码机、传真密码机、异步数据密码机等。

#### 4.3.2 组织机构体系

**组织机构体系是信息系统安全的组织保障系统**，由**机构、岗位和人事机构**三个模块构成一个体系。机构的设置分为3个层次：**决策层、管理层和执行层**。岗位是信息系统安全管理机关根据系统安全需要设定的负责某一个或某几个安全事务的职位。人事机构是根据管理机构设定的岗位，对岗位上在职、待职和离职的雇员进行素质教育、业绩考核和安全监管的机构。

#### 4.3.3 管理体系

管理是信息系统安全的灵魂。信息系统安全的管理体系由法律管理、制度管理和培训管理3个部分组成。所谓“三分技术，七分管理”。

> (1)法律管理是根据相关的国家法律、法规对信息系统主体及其与外界关联行为的规范和约束。  
> (2)制度管理是信息系统内部依据系统必要的国家、团体的安全需求制定的一系列内部规章制度。  
> (3)培训管理是确保信息系统安全的前提。

### 4.4 信息加解密技术

#### 4.4.1 数据加密

数据加密是防止未经授权的用户访问敏感信息的手段，这就是人们通常理解的安全措施，也是其他安全方法的基础。研究数据加密的科学叫作密码学(Cryptography),它又分为设计密码体制的密码编码学和破译密码的密码分析学。密码学有着悠久而光辉的历史，古代的军事家已经用密码传递军事情报了，而现代计算机的应用和计算机科学的发展又为这一古老的科学注入了新的活力。现代密码学是经典密码学的进一步发展和完善。由于加密和解密此消彼长的斗争永远不会停止，这门科学还在迅速发展之中。  
一般的保密通信模型如图4-1所示。

![image-20230224上午103607865](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8A%E5%8D%88103607865.png)

从图中可以看出，发送端把明文P用加密算法E和密钥K加密，变换成密文C,即C=E(K,P):接收端利用解密算法D和密钥K对C解密得到明文P,即P=D(K,C)。  
这里加/解密函数E和D是公开的，而密钥K(加解密函数的参数)是秘密的。在传送过程中偷听者得到的是无法理解的密文，而他又得不到密钥，这就达到了对第三者保密的目的。需要说明的是，不论偷听者获取了多少密文，但是密文中没有足够的信息，使得可以确定出对应的明文，则这种密码体制叫作是无条件安全的，或称为是理论上不可破解的。在无任何限制的条件下，几乎目前所有的密码体制都不是理论上不可破解的。能否破解给定的密码，取决于使用的计算资源。所以密码专家们研究的核心问题就是要设计出在给定计算费用的条件下，计算上（而不是理论上）安全的密码体制。

#### 4.4.2 对称密钥加密算法

对称密钥加密算法中加密密钥和解密密钥是相同的，称为共享密钥算法或对称密钥算法。

1. DES Data Encryption Standard

I977年1月，美国NSA(National Security Agency)根据IBM的专利技术Lucifer制定了DES。明文被分成64位的块，对每个块进行19次变换（替代和换位），其中16次变换由56位的密钥的不同排列形式控制(IBM使用的是128位的密钥)，最后产生64位的密文块，如图4-2所示。

![image-20230224下午122615361](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8B%E5%8D%88122615361.png)

由于NSA减少了密钥，而且对DES的制定过程保密，甚至为此取消了IEEE计划的一次密码学会议。人们怀疑NSA的目的是保护自己的解密技术，因而对DES从一开始就充满了怀疑和争论。  
I977年，Diffie和Hellman设计了DES解密机。只要知道一小段明文和对应的密文，该机器就可以在一天之内穷试26种不同的密钥（这叫作野蛮攻击）。据估计，这个机器当时的造价为2千万美元。  
三重DES(Triple-DES)是DES的改进算法，它使用两把密钥对报文做三次DES加密，效果相当于将DES密钥的长度加倍，克服了DES密钥长度较短的缺点。本来应该使用3个不同的密钥进行3次加密，这样就可以把密钥的长度加长到3×56=168位。但许多密码设计者认为168位的密钥已经超过了实际需要，所以便在第1层和第3层中使用相同的密钥，产生一个有效长度为112位的密钥。之所以没有直接采用两重DES,是因为第2层DES不是十分安全，它对一种称为“中间可遇”的密码分析攻击极为脆弱，所以最终还是采用了利用两个密钥进行三重DES加密操作。  
假设两个密钥分别是K1和K2,其算法的步骤如下：  

> (1)用密钥K1进行DES加密。  
> (2)用K2对步骤(1)的结果进行DES解密。  
> (3)对步骤(2)的结果使用密钥K1进行DES加密。  

这种方法的缺点是要花费原来3倍的时间，但从另一方面来看，112位密钥长度的三重DES是很“强壮”的加密方式。

2. IDEA （International Data Encryption Algorithm）

1990年，瑞士联邦技术学院的来学嘉和Massey建议了一种新的加密算法。这种算法使用128位的密钥，把明文分成64位的块，进行8轮迭代加密。DEA可以用硬件或软件实现，并且比DES快。在苏黎世技术学院用25MHz的VLSI芯片，加密速率是177Mb/s。  
DEA经历了大量的详细审查，对密码分析具有很强的抵抗能力，在多种商业产品中得到应用，已经成为全球通用的加密标准。

3. 高级加密标准(Advanced Encryption Standard,AES)

1997年1月，美国国家标准与技术局(NIST)为高级加密标准征集新算法。最初从许多响应者中挑选了15个候选算法，经过世界密码共同体的分析，选出了其中的5个。经过用ANSI C和Java语言对5个算法的加/解密速度、密钥和算法的安装时间，以及对各种攻击的拦截程度等进行了广泛的测试后，2000年10月，NIST宣布Rijndael算法为AES的最佳候选算法，并于2002年5月26日发布为正式的AES加密标准。  
AES支持128、192和256位3种密钥长度，能够在世界范围内免版税使用，提供的安全级别足以保护未来20~30年内的数据，可以通过软件或硬件实现。

#### 4.4.3 非对称密钥加密算法

非对称加密算法中使用的加密密钥和解密密钥是不同的，称为不共享密钥算法或非对称密钥算法。1976年，斯坦福大学的Dif伍e和Hellman提出了使用不同的密钥进行加密和解密的公钥加密算法。设P为明文，C为密文，E为公钥控制的加密算法，D为私钥控制的解密算法，这些参数满足下列3个条件：

> (1)D (E (P)) = P。  
> (2)不能由E导出D 。  
> (3)选择明文攻击（选择任意明文-密文对以确定未知的密钥）不能破解E。   

加密时计算 C = E(P),解密时计算 P=D(C)。加密和解密是互逆的。用公钥加密，私钥解密，可实现保密通信：用私钥加密，公钥解密，可实现数字签名。  
RSA(Rivest Shamir and Adleman)这是一种公钥加密算法，方法是按照下面的要求选择公钥和密钥：  

> (1)选择两个大素数 p和 q (大于10<sup>100</sup>)。  
> (2)令$$n=pg、z=(p-1)(q-1)$$。  
> (3)选择 d 与 z 互质。  
> (4)选择e,使$$ed=1(modz)$$。 

明文P被分成 k 位的块，k是满足2k<n的最大整数，于是有0≤P<n。加密时计算

$C = P^{e} \mod N$

这样公钥为(e,n)。解密时计算

$P = C^{d} (\mod N)$

即私钥为(d,n)。

用例子说明这个算法，设$$p=3,q=11,n=33,z=20,d=7,e=3,C=P^3(\mod33),P=C^7(\mod33)$$。  则有

$$C=2^3(\mod33)=8(\mod33)=8$$  
$$P=8^7(\mod33)=2097152(\mod33)=2$$  
RSA算法的安全性基于大素数分解的困难性。如果攻击者可以分解已知的n,得到p和q,然后可得到z,最后用Euclid算法，由e和z得到d。然而要分解200位的数，需要40亿年：分解500位的数，则需要10<sup>25</sup>年。

### 4.5 密钥管理技术

#### 4.5.1 对称密钥的分配与管理

密钥分配一般要解决两个问题：**一是引进自动分配密钥机制，以提高系统的效率：二是尽可能减少系统中驻留的密钥量**。这两个问题也可以同步解决。  

1. 密钥的使用控制

两个用户（主机、进程、应用程序）在进行保密通信时，必须拥有一个共享的并且经常更新的秘密密钥。密钥的分配技术从一定程度上决定着密码系统的强度。  
控制密钥的安全性主要有以下两种技术。  
1)密钥标签  
例如用于DES的密钥控制，将DES中的8个校验位作为控制这个密钥的标签，其中前3位分别代表了该密钥的不同信息：主/会话密钥、加密、解密。但是长度过于限制，且须经解密方能使用，带来了一定的不便性。  
2)控制失量  
被分配的若干字段分别说明不同情况下密钥是被允许使用或者不允许，且长度可变。它在密钥分配中心KDC(Key Distribution Center)产生密钥时加在密钥之中：首先由一杂凑函数将控制矢量压缩到加密密钥等长，然后与主密钥异或后作为加密会话密钥的密钥，即：   

$$H=h(CV)$$

$$K_{in}=Km XOR H$$

$$K_{out}=EKmXOR H[KS]$$

其恢复过程为：$$KS=DKm XOR H[EKm XOR H[KS]]$$

用户只有使用与KDC共享的主密钥以及KDC发送过来的控制矢量才能恢复会话密钥，因此，须保证保留会话密钥和他控制矢量之间的对应关系。

2. 密钥的分配

两个用户A和B在获得共享密钥时可以有4种方式。  

> (1)经过A选取的密钥通过物理手段发送给另一方B。  
> (2)由第3方选取密钥，在通过物理手段分别发送给A和B。  
> (3)A、B事先已有一个密钥，其中一方选取新密钥后，用已有密钥加密该新密钥后发送给另一方。  
> (4)三方A、B、C各有一保密信道，C选取密钥后，分别通过A、B各自的保密信道发送。前两种方法称为人工发送。若网络中N个用户都要求支持加密服务，则任意一对希望通信的用户各需要一个共享密钥，这导致密钥数目多达$$N(N-1)/2$$。第3种方法攻击者一旦获得一个密钥就可获取以后所有的密钥，这就给安全性带来隐患。这3种方法的公共弱点在于当N很大时，密钥的分配代价也变得非常大。但是，这种无中心的密钥控制技术在整个网络的局部范围内却显得非常有用。如图4-3所示，其中N表示随机数。

![image-20230224下午24952013](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8B%E5%8D%8824952013.png)

第4种方法是较常用的。第3方C是为用户分配密钥的KDC,每个用户和KDC有一个共享密钥，即主密钥。主密钥再分配给每对用户会话密钥，用于用户间的保密通信。会话密钥在通信结束后立即销毁。虽然此种方法的会话密钥数目是$$N(N-1)/2$$,但是主密钥的数目却只需要N个，可以通过物理手段进行发送。如图44所示，其中N表示随机数，Ks表示会话密钥。

![image-20230224下午25109733](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8B%E5%8D%8825109733.png)

由于网络中用户数目非常多并且地域分布非常广泛，因此有时需要使用多个KDC的分层结构。可在每个小范围（如一个LAN或一个建筑物）内，建立本地KDC:不同范围的两个本地间可再用一个全局KDC连接。这样建立的两层KDC不但减少了主密钥的分布，更可以将虚假的KDC的危害限制到一个局部的区域。  
另外，应注意会话密钥有效期的设置。会话密钥更换得越频繁，系统的安全性也就越高。但是另一方面，频繁更换会话密钥会造成网络负担，延迟用户之间的交换。因此在决定其有效期时，应权衡矛盾的两个方面。

#### 4.5.2 公钥加密体制的密钥管理

1. 公开发布

公开发布是指用户将自己的公钥发给每一其他用户，或向某一团体广播。例如：PGP(PryGood Privacy)中采用RSA算法，很多用户就可将自己的公钥附加到消息上，发送到公开区域。  
这种方法虽然简单，但有一个非常大的缺点：任何人都可以伪造密钥公开发布。如果某个用户假装是用户A,并以A的名义向另一用户发送或广播自己的公开钥，则在A发现假冒者以前，这一假冒者可解读所有发向A的加密消息，甚至还能用伪造的密钥获得认证。

2. 公用目录表

公用目录表指一个公用的公钥动态目录表，由某个可信的实体或组织（公用目录的管理员）承担该共用目录表的建立、维护以及公钥的分布等。管理员为每个用户在目录表中建立一个目录，其中包括用户名和用户的公开钥两个数据项，并且定期公布和更新目录表。每个用户都亲自或以某种安全的认证通信在管理者那里注册自己的公开钥，可通过电子手段访问目录表，还可随时替换新密钥。但是，这种公用目录表的管理员秘密钥一旦被攻击者获取，同样面临被假冒的危险。

3. 公钥管理机构

与公用目录表类似的，不过用公钥管理机构来为各用户建立、维护动态的公钥目录，这种对公钥分配更加严密的控制措施可以增强其安全性。特别注意的是，每个用户都可靠地知道管理机构的公开钥，但是只有管理机构自己知道相应的秘密钥。  
例如：当用户A向公钥管理机构发送一个请求时，该机构对请求作出应答，并用自己的秘密钥$$SK_{au}$$加密后发送给A,A再用机构的公开钥解密。  
它的缺点在于因为每一用户要想和他人联系都须求助于管理机构，所以容易使管理机构成为系统的瓶颈，并且管理机构维护的公钥目录表也容易被敌手窜扰。

4. 公钥证书

公钥证书可以从一定程度上解决以上策略存在的一些不足之处。公钥证书是由证书管理机构CA(Certificate Authority)为用户建立的，其中的数据项有与该用户的秘密钥相匹配的公开钥及用户的身份和时戳等，所有的数据项经CA用自己的秘密钥签字后就形成证书，即证书的形式为$$CA=ESK_{CA}[T,ID_A,PK_a$$。T是当前的时戳，$$ID_A$$是用户A的身份，$$PK_A$$是A的公钥，$$SK_{CA}$$是CA的秘密钥，CA则是用户A产生的证书。  
用户将自己的公开钥通过公钥证书发给另一用户，而接受方则可用CA的公钥$$PK_A$$对证书加以验证。这样通过证书交换用户之间的公钥而无须再与公钥管理机构联系，从而避免了由统一机构管理所带来的不便和安全隐患。

#### 4.5.3 公钥加密分配单钥密码体制的密钥

公开钥分配完之后，用户可用公钥加密体制进行保密通信。但是，这种加密体制的加密速度比较慢，因此比较适合于单钥密码体制的密钥分配，如图4-5所示。  

![image-20230224下午35819056](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8B%E5%8D%8835819056.png)

假定A、B双方用户已完成公钥交换，则可利用公钥加密体制按照如下步骤建立共享会话密钥。  

> (1)A将用B的公钥加密得到的身份IDA和一个用于唯一标志这个业务的一次性随机数N发往B。  
> (2)预使A确定对方是B,则B用A的公钥加密N,和另一新产生的随机数N2,因为只有B能解读①中的加密。  
> (3)A用B的公钥PKB对N2加密后返回给B,以使B相信对方确是A。  
> (4)A将$$M=E_{PKB}[ESKA[K_g]]$$发送给B,其中Ks为会话密钥，用B的公开钥加密是为保证只有B能解读加密结果，用A的秘密钥加密是保证该加密结果只有A能发送。  
> (S)B以$$D_{PKA}[D_{SKB}[M]]$$恢复会话密钥。

这种分配过程的保密性和认证性均非常强，既可防止被动攻击，又可防止主动攻击。

### 4.6 访问控制及数字签名技术

#### 4.6.1 访问控制技术

互联网络的蓬勃发展，为信息资源的共享提供了更加完善的手段，企业在信息资源共享的同时也要阻止非授权用户对企业敏感信息的访问。访问控制的目的是为了保护企业在信息系统中存储和处理的信息的安全。

1. 访问控制的基本模型

访问控制是指主体依据某些控制策略或权限对客体本身或是其资源进行的不同授权访问。  
访问控制包括3个要素，即**主体、客体和控制策略**。访问控制模型是一种从访问控制的角度出发，描述安全系统，建立安全模型的方法。

(1)主体(Subject):是可以对其他实体施加动作的主动实体，简记为S。有时我们也称为用户(User)或访问者（被授权使用计算机的人员），记为U。主体的含义是广泛的，可以是用户所在的组织（以后我们称为用户组）、用户本身，也可是用户使用的计算机终端、卡机、手持终端（无线）等，甚至可以是应用服务程序程序或进程。  
(2)客体(Object):是接受其他实体访问的被动实体，简记为O。客体的概念也很广泛，**凡是可以被操作的信息、资源、对象都可以认为是客体**。在信息社会中，客体可以是信息、文件和记录等的集合体，也可以是网路上的硬件设施，无线通信中的终端，甚至一个客体可以包含另外一个客体。  
(3)控制策略：是主体对客体的操作行为集和约束条件集，简记为KS。简单讲，控制策略是主体对客体的访问规则集，这个规则集直接定义了主体对可以的作用行为和客体对主体的条件约束。访问策略体现了一种授权行为，也就是客体对主体的权限允许，这种允许不超越规则集，由其给出。  
访问控制的实现首先要考虑对合法用户进行验证，然后是对控制策略的选用与管理，最后要对没有非法用户或是越权操作进行管理。所以，访问控制包括认证、控制策略实现和审计3方面的内容：  

> **(1)认证。**主体对客体的识别认证和客体对主体的检验认证。主体和客体的认证关系是相互的，当一个主体受到另外一个客体的访问时，这个主体也就变成了客体。一个实体可以在某一时刻是主体，而在另一时刻是客体，这取决于当前实体的功能是动作的执行者还是动作的被执行者。  
> **(2)控制策略的具体实现**。如何设定规则集合从而确保正常用户对信息资源的合法使用，既要防止非法用户，也要考虑敏感资源的泄露，对于合法用户而言，更不能越权行使控制策略所赋予其权利以外的功能：  
> **(3)审计。**审计的重要意义在于，比如客体的管理者即管理员有操作赋予权，他有可能滥用这一权利，这是无法在策略中加以约束的。必须对这些行为进行记录，从而达到威慑和保证访问控制正常实现的目的。

2. 访问控制的实现技术

建立访问控制模型和实现访问控制都是抽象和复杂的行为，实现访问的控制不仅要保证授权用户使用的权限与其所拥有的权限对应，制止非授权用户的非授权行为：还要保证敏感信息的交叉感染。为了便于讨论这一问题，我们以文件的访问控制为例对访问控制的实现做具体说明。通常用户访问信息资源（文件或是数据库），可能的行为有读、写和管理。为方便起见，用Read或是R表示读操作，Write或是W表示写操作，Own或是O表示管理操作。之所以将管理操作从读写中分离出来，是因为管理员也许会对控制规则本身或是文件的属性等做修改。  
**1)访问控制矩阵**  
访问控制矩阵(Access Control Matrix,ACM)是通过矩阵形式表示访问控制规则和授权用户权限的方法。也就是说，对每个主体而言，都拥有对哪些客体的哪些访问权限；而对客体而言，又有哪些主体对他可以实施访问；将这种关联关系加以阐述，就形成了控制矩阵。其中，特权用户或特权用户组可以修改主体的访问控制权限。  
访问矩阵是以主体为行索引，以客体为列索引的矩阵，矩阵中的每一个元素表示一组访问方式，是若干访问方式的集合。矩阵中第i行第j列的元素记录着第i个主体S可以执行的对第j个客体O,的访问方式，比如M,等于表示S,可以对O,进行读和写访问。  
访问控制矩阵的实现很易于理解，但是查找和实现起来有一定的难度，而且，如果用户和文件系统要管理的文件很多，那么控制矩阵将会成几何级数增长。因为在大型系统中访问矩阵很大而且其中会有很多空值，所以目前使用的实现技术都不是保存整个访问矩阵，而是基于访问矩阵的行或者列来保存信息。  
2)访问控制表  
访问控制表ACLs(Access Control Lists)是目前最流行、使用最多的访问控制实现技术。每个客体有一个访问控制表，是系统中每一个有权访问这个客体的主体的信息。这种实现技术实际上是按列保存访问矩阵。访问控制表提供了针对客体的方便的查询方法，通过查询一个客体的访问控制表，很容易决定某一个主体对该客体的当前访问权限。删除客体的访问权限也很方便，把该客体的访问控制表整个替换为空表即可。但是用访问控制表来查询一个主体对所有客体的所有访问权限是很困难的，必须查询系统中所有客体的访问控制表来获得其中每一个与该主体有关的信息。类似地，删除一个主体对所有客体的所有访问权限也必须查询所有客体的访问控制表，删除与该主体相关的信息。  
3)能力表  
能力表(Capabilities)对应于访问控制表，这种实现技术实际上是按行保存访问矩阵。每个主体有一个能力表(Cap-ability Lists),是该主体对系统中每一个客体的访问权限信息。使用能力表实现的访问控制系统可以很方便地查询某一个主体的所有访问权限，只需要遍历这个主体的能力表即可。然而查询对某一个客体具有访问权限的主体信息就很困难了，必须查询系统中所有主体的能力表。20世纪70年代，很多操作系统的访问控制安全机制是基于能力表实现的，但并没有取得商业上的成功，现代的操作系统大多改用基于访问控制表的实现技术，只有少数实验性的安全操作系统使用基于能力表的实现技术。在一些分布式系统中，也使用了能力表和访问控制表相结合的方法来实现其访问控制安全机制。  
4)授权关系表.  
访问矩阵也有既不对应于行也不对应于列的实现技术，那就是对应访问矩阵中每一个非空元素的实现技术一授权关系表(Authorization Relations)。授权关系表的每一行（或者说元组）就是访问矩阵中的一个非空元素，是某一个主体对应于某一个客体的访问权限信息。如果授权关系表按主体排序，查询时就可以得到能力表的效率：如果按客体排序，查询时就可以得到访问控制表的效率。安全数据库系统通常用授权关系表来实现其访问控制安全机制。

#### 4.6.2 数字签名

与人们手写签名的作用一样，数字签名系统向通信双方提供服务，使得A向B发送签名的消息P,以便达到以下几点：  

> (1)B可以验证消息P确实来源于A。  
> (2)A以后不能否认发送过P。   
> (3)B不能编造或改变消息P。  

1. 数字签名的条件  

可用的数字签名应保证以下几个条件：  

> (1)签名是可信的。签名使文件的接收者相信签名者是慎重地在文件上签字的。   
> (2)签名不可伪造。签名证明是签字者而不是其他人慎重地在文件上签字。  
> (3)签名不可重用。签名是文件的一部分，不法之徒不可能将签名移到不同的文件上。  
> (4)签名的文件是不可改变的。在文件签名后，文件不能改变。  
> (5)签名是不可抵赖的。签名和文件是物理的东西。签名者事后不能声称他没有签过名。  

在现实生活中，关于签名的这些特性没有一个是完全真实的。签名能够被伪造，签名能够从文章中盗用移到另一篇文章中，文件在签名后能够被改变。在计算机上做这种事情，同样存在一些问题。首先计算机文件易于复制。即使某人的签名难以伪造（例如，手写签名的图形），但是从一个文件到另一个文件剪切和粘贴有效的签名都是很容易的。这种签名并没有什么意义：  
其次文件在签名后也易于修改，并且不会留下任何修改的痕迹。为解决这些问题，数字签名技术就应运而生。

2.对 称密钥签名

基于对称密钥的签名如图4-6所示。

![image-20230224下午45616536](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8B%E5%8D%8845616536.png)

设BB是A和B共同信赖的仲裁人。$$K_A$$和$$K_B$$分别是A和B与BB之间的密钥，而$$K_{BB}$$是只有BB掌握的密钥，P是A发给B的消息，t是时间戳。BB解读了A的报文${A,K_A(B,R_A,t,P)}$$以后产生了一个签名的消息$$K_{BB}(A,t,P)$$,并装配成发给B的报文$${K_B(A,R_A,t,P,K_{BB}(A,t,P)}$$。B可以解密该报文，阅读消息P,
并保留证据$$K_{BB}(A,t,P)$$。由于A和B之间的通信是通过中间人BB的，所以不必怀疑对方的身份。又由于证据$$K_{BB}(A,t,P)$$的存在，A不能否认发送过消息P,B也不能改变得到的消息P,因为BB仲裁时可能会当场解密$$K_{BB}(A,1,P)$$,得到发送人、发送时间和原来的消息P。

3. 公开密钥签名

在对称密码体制中由于加密密钥和解密密钥是可以相互推导的。密钥暴露会使系统变得不安全。而公钥密码体制可以很容易地解决密钥交换问题。在公钥密码系统中，解密密钥和加密密钥是不同的，并且很难从一个推导出另外一个。

利用公钥加密算法的数字签名系统如图4-7所示。如果A方否认，B可以拿出$$D_A (P)$$,并用A的公钥$$E_A$$解密得到P,从而证明P是A发送的。如果B篡改消息P,当A要求B出示原来的$$D_A (P)$$时，B拿不出来。

![image-20230224下午50119265](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8B%E5%8D%8850119265.png)

在实践中，对长文件签名采用公钥密码算法效率太低。为了节约时间，数字签名协议经常和单向Hash函数一起使用，即并不对整个文件签名，只对文件的Hash值签名。基于消息摘要大大地提高了数字签名的计算速度。此外该协议还有其他优点：首先，签名和文件可以分开保存。其次，接收者对文件和签名的存储量要求大大降低。档案系统可用这类协议来验证文件的存在而不需保存它们的内容。用户将文件的Hash值传给数据库，数据库加上时间标记并保存，如果对某文件的存在发生争执，数据库可通过找到文件的Hash值来解决争端。

### 4.7 信息安全的抗攻击技术
#### 4.7.1 密钥的选择

密钥在概念上被分成两大类：**数据加密密钥(DK)和密钥加密密钥(KK**)。前者直接对数据进行操作，后者用于保护密钥，使之通过加密而安全传递。算法的安全性在于密钥。如果密钥由脆弱的密码程序生成，那么整个系统都将处于极其脆弱的环境中，当攻击者能够分析密钥生成算法时，也就无须分析密码算法了。为对抗攻击者的攻击，密钥生成需要考虑3个方面的因素。

1. 增大密钥空间

一个密码算法的密钥若设为N位，那么该密钥空间为2<sup>n</sup>。显然，若某加密程序限制了密钥的位数，那么密钥空间随之减小，特别是当密钥生成程序比较脆弱的话，将导致密钥能够轻易被破译。例如，采用各种专用蛮力攻击硬件和并行技术，无论是对于一台机器甚至是多台机器并行处理，只要每秒测试100万个密钥，破译8字节以下小写字母和小写字母与数字构成的密钥、7字节以下字母数字密钥、6字节以下可打印字母密钥和ASCⅡ字符密钥以及5字节以下8位的ASCⅡ字符密钥都是可以的。另外随着计算机设备的不断改进，对破译的时间和条件要求也越来越少。  
加长密钥位数，增大密钥空间，对阻止攻击是很有帮助的。例如，采用穷举搜索所有密钥的时间，对于8位ASCII字符(256个)在4字节密钥空间下只需要1.2小时，在6字节密钥空间下需要8.9年，而在8字节情况下需要580000年！明显增加了攻击的难度。  

2. 选择强钥

在实际应用中，人们为了能方便记忆，往往选择较弱的密钥，如选择“Klone”,而不是“*9(hH\A-”。简单的密钥方便了人们的记忆，也方便了攻击者的测试。对于公钥算法，不同的算法对强钥的选择也有不同的规定。

3. 密钥的随机性

好的生成密钥是一个随机位串。会话密钥的产生，用随机数作为会话密钥：公钥密码算法也采用随机数作为密钥。密钥位可从可靠的随机源获得，如一些物理噪声产生器、离子辐射脉冲检测器、气体放电关、漏电容等：也可从安全的伪随机数发生器借助于安全的密码算法来产生，只要设计得好，能通过各种随机性检验就具有伪随机性。

随机数序列需满足随机性和不可预测性的要求。首先，均匀分布和独立性可以用来保证随机数的随机性，数列中每个数的出现频率应基本相等且均不能由其他数推出。在设计密码算法时，经常会使用一种称为伪随机数列的数列。例如在RSA算法中素数的产生。一般情况下，决定一个大数N是否为素数是很困难的。最原始的方法就是用每个比N1/2小的数去除N,如果N很大，比如10 160，这一方法则超出人类的分析能力和计算能力。另外在相互认证和会话密钥的产生等应用中，更要求数列中以后的数是不可预测的。

#### 4.7.2 拒绝服务攻击与防御

拒绝服务攻击DoS(Denial of Service)是由人为或非人为发起的行动，使主机硬件、软件或者两者同时失去工作能力，使系统不可访问并因此拒绝合法的用户服务要求。拒绝服务攻击的主要企图是借助于网络系统或网络协议的缺陷和配置漏洞进行网络攻击，使网络拥塞、系统资源耗尽或者系统应用死锁，妨碍目标主机和网络系统对正常用户服务请求的及时响应，造成服务的性能受损甚至导致服务中断。  
由于目前个人计算机或者服务器系统的性能逐渐在提升，网络带宽也由原来的10M/s逐步提升到1000Mb/s甚至是10kMb/s,个人对其他主机发起攻击行为，要使其性能受损或者服中断，非常困难。目前常见的拒绝服务攻击为分布式拒绝服务攻击DDoS(Distributed Denial of Service)。  
要对服务器实施拒绝服务攻击，有两种思路：  

> (1)服务器的缓冲区满，不接收新的请求。   
> (2)使用IP欺骗，迫使服务器把合法用户的连接复位，影响合法用户的连接。这也是DoS攻击实施的基本思想。

1. 传统拒绝服务攻击的分类

拒绝服务攻击有许多种，网络的内外部用户都可以发动这种攻击。内部用户可以通过长时间占用系统的内存、CPU处理时间使其他用户不能及时得到这些资源，而引起拒绝服务攻击：外部黑客也可以通过占用网络连接使其他用户得不到网络服务。本节主要讨论外部用户实施的拒绝服务攻击。  
外部用户针对网络连接发动拒绝服务攻击主要有以下几种模式：  
(1)消耗资源。计算机和网络需要一定的条件才能运行，如网络带宽、内存、磁盘空间、CPU时间。攻击者利用系统资源有限这一特征，或者是大量地申请系统资源，并长时间地占用：或者是不断地向服务程序发请求，使系统忙于处理自己的请求，而无暇为其他用户提供服务。攻击者可以针对以下几种资源发起拒绝服务攻击。  

* 针对网络连接的拒绝服务攻击：   
* 消耗磁盘空间：
* 消耗CPU资源和内存资源。

(2)破坏或更改配置信息。计算机系统配置上的错误也可能造成拒绝服务攻击，尤其是服务程序的配置文件以及系统、用户的启动文件。这些文件一般只有该文件的属主才可以写入，如果权限设置有误，攻击者（包括已获得一般访问权的黑客与恶意的内部用户）可以修改配置文件，从而改变系统向外提供服务的方式。  
(3)物理破坏或改变网络部件。这种拒绝服务针对的是物理安全，一般来说，通过物理破坏或改变网络部件以达到拒绝服务的目的。其攻击的目标有：计算机、路由器、网络配线室、网络主干段、电源、冷却设备、其他的网络关键设备。   
(4)利用服务程序中的处理错误使服务失效。最近出现了一些专门针对Windows系统的攻击方法，如LAND等等。被这些工具攻击之后，目标机的网络连接就会莫名其妙地断掉，不能访问任何网络资源或者出现莫名其妙的蓝屏，系统进入死锁状况。这些攻击方法主要利用服务程序中的处理错误，发送一些该程序不能正确处理的数据包，引起该服务进入死循环。  

2. 分布式拒绝服务攻击DDoS

分布式拒绝服务DDoS攻击是对传统DoS攻击的发展，攻击者首先侵入并控制一些计算机，然后控制这些计算机同时向一个特定的目标发起拒绝服务攻击。传统的拒绝服务攻击有受网络资源的限制和隐蔽性差两大缺点，而分布式拒绝服务攻击却克服了传统拒绝服务攻击的这两个致命弱点。分布式拒绝服务攻击的隐蔽性更强。通过间接操纵网络上的计算机实施攻击，突破了传统攻击方式从本地攻击的局限性。被DDoS攻击时可能的现象有：  

> (1)被攻击主机上有大量等待的TCP连接。  
> (2)大量到达的数据分组（包括TCP分组和UDP分组）并不是网站服务连接的一部分，往往指向机器的任意端口。  
> (3)网络中充斥着大量无用的数据包，源地址为假。  
> (4)制造高流量的无用数据造成网络拥塞，使受害主机无法正常和外界通信。  
> (5)利用受害主机提供的服务和传输协议上的缺陷，反复发出服务请求，使受害主机无法及时处理所有正常请求。  
> (6)严重时会造成死机。

DDoS引入了分布式攻击和Client/Server结构，使DoS的威力激增。同时，DDoS囊括了已经出现的各种重要的DoS攻击方法，比DoS的危害性更大。现有的DDoS工具一般采用三级结构，如图4-8所示，其中Client(客户端)运行在攻击者的主机上，用来发起和控制DDoS攻击：Handler(主控端)运行在已被攻击者侵入并获得控制的主机上，用来控制代理端；Agent(代理端)运行在已被攻击者侵入并获得控制的主机上，从主控端接收命令，负责对目标实施实际的攻击。

![image-20230224下午54054305](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8B%E5%8D%8854054305.png)

3. 拒绝服务攻击的防御方法

操作系统和网络设备的缺陷在不断地被发现，并被攻击者利用来进行恶意的攻击。如果清楚地认识到这一点，应当使用下面的方法尽量阻止拒绝服务攻击。  
(1)加强对数据包的特征识别，攻击者在传达攻击命令或发送攻击数据时，虽然都加入了伪装甚至加密，但是其数据包中还是有一些特征字符串。通过搜寻这些特征字符串，就可以确定攻击服务器和攻击者的位置。  
(2)设置防火墙监视本地主机端口的使用情况。对本地主机中的敏感端口，如UDP 31335、UDP 27444、TCP 27665进行监视，如果发现这些端口处于监听状态，则系统很可能受到攻击。即使攻击者已经对端口的位置进行了一定的修改，但如果外部主机主动向网络内部高标号端口发起连接请求，则系统也很可能受到侵入。  
(3)对通信数据量进行统计也可获得有关攻击系统的位置和数量信息。例如，在攻击之前，目标网络的域名服务器往往会接收到远远超过正常数量的反向和正向的地址查询。在攻击时，攻击数据的来源地址会发出超出正常极限的数据量。  
(4)尽可能的修正已经发现的问题和系统漏洞。

#### 4.7.3 欺骗攻击与防御
1. ARP欺骗

1)ARP欺骗原理  
ARP原理：某机器A要向主机C发送报文，会查询本地的ARP缓存表，找到C的IP地址对应的MAC地址后，就会进行数据传输。如果未找到，则广播一个ARP请求报文（携带主机A的IP地址Ia一物理地址AA:AA:AA:AA),请求IP地址为Ic的主机C回答物理地址Pc。  
网上所有主机包括C都收到ARP请求，但只有主机C识别自己的IP地址，于是向A主机发回一个ARP响应报文。其中就包含有C的MAC地址CC:CC:CC:CC,A接收到C的应答后，就会更新本地的ARP缓存。接着使用这个MAC地址发送数据（由网卡附加MAC地址）。因此，本地高速缓存的这个ARP表是本地网络流通的基础，而且这个缓存是动态的。  
ARP协议并不只在发送了ARP请求才接收ARP应答。当计算机接收到ARP应答数据包的时候，就会对本地的ARP缓存进行更新，将应答中的IP和MAC地址存储在ARP缓存中。  
因此，局域网中的机器B首先攻击C,使C瘫痪，然后向A发送一个自己伪造的ARP应答，而如果这个应答是B冒充C伪造来的，即IP地址为C的IP,而MAC地址是B的，则当A接收到B伪造的ARP应答后，就会更新本地的ARP缓存，这样在A看来C的IP地址没有变，而它的MAC地址已经变成B的了。由于局域网的网络流通不是根据IP地址进行，而是按照MAC地址进行传输。如此就造成A传送给C的数据实际上是传送到B。这就是一个简单的ARP欺骗，如图4-9所示。

![image-20230224下午54701447](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8B%E5%8D%8854701447.png)

2)ARP欺骗的防范措施  
(1)在Win XP下输入命令：arp -s gate-way-ip gate-way-mac固化ARP表，阻止ARP欺骗。  
(2)使用ARP服务器。通过该服务器查找自己的ARP转换表来响应其他机器的ARP广播。确保这台ARP服务器不被黑。  
(3)采用双向绑定的方法解决并且防止ARP欺骗。  
(4)ARP防护软件一ARP Guard。通过系统底层核心驱动，无须安装其他任何第三方软件（如WinPcap),以服务及进程并存的形式随系统启动并运行，不占用计算机系统资源。无须对计算机进行IP地址及MAC地址绑定，从而避免了大量且无效的工作量。也不用担心计算机
会在重启后新建ARP缓存列表，因为此软件是以服务与进程相结合的形式存在于计算机中，当计算机重启后软件的防护功能也会随操作系统自动启动并工作。

2. DNS欺骗

DNS欺骗是一种比较常见的攻击手段。一个著名的利用DNS欺骗进行攻击的案例是，全球著名网络安全销售商RSA Security的网站所遭到的攻击。其实RSA Security网站的主机并没有被入侵，而是RSA的域名被黑客劫持，当用户连上RSA Security时，发现主页被改成了其他的内容。  
1)DNS欺骗的原理  
DNS欺骗首先是冒充域名服务器，然后把查询的IP地址设为攻击者的IP地址，这样的话，用户上网就只能看到攻击者的主页，而不是用户想要取得的网站的主页了，这就是DNS欺骗的基本原理。DNS欺骗其实并不是真的“黑掉”了对方的网站，而是冒名顶替、招摇撞骗罢了。  
2)DNS欺骗的现实过程  

![image-20230224下午55827049](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230224%E4%B8%8B%E5%8D%8855827049.png)

如图4-10所示，www.xxx.com的IP地址为202.109.2.2，如果www.angel.com向xxx.com的子域DNS服务器查询www.xxx.com的IP地址时，www.heike.com冒充DNS向www.angel.com回复www.xxx.com的IP地址为200.1.1.1，这时www.angel..com就会把200.1.1.1当www.xxx.com的地址了。当www.angel..com连www.xxx.com时，就会转向那个虚假的IP地址了，这样对www.xxx.com来说，就算是给黑掉了。因为别人根本连接不上他的域名。

3)DNS欺骗的检测  
根据检测手段的不同，将其分为被动监听检测、虚假报文探测和交叉检查查询3种。  
**(1)被动监听检测。**该检测手段是通过旁路监听的方式，捕获所有DNS请求和应答数据包，并为其建立一个请求应答映射表。如果在一定的时间间隔内，一个请求对应两个或两个以上结果不同的应答包，则怀疑受到了DNS欺骗攻击，因为DNS服务器不会给出多个结果不同的应答包，即使目标域名对应多个P地址，DNS服务器也会在一个DNS应答包中返回，只是有多个应答域(Answer Section)而已。  
**(2)虚假报文探测**。该检测手段采用主动发送探测包的手段来检测网络内是否存在DNS欺骗攻击者。这种探测手段基于一个简单的假设：攻击者为了尽快地发出欺骗包，不会对域名服务器IP的有效性进行验证。这样如果向一个非DNS服务器发送请求包，正常来说不会收到任何应答，但是由于攻击者不会验证目标IP是否是合法DNS服务器，他会继续实施欺骗攻击，因此如果收到了应答包，则说明受到了攻击。  
**(3)交叉检查查询。**所谓交叉检查即在客户端收到DNS应答包之后，向DNS服务器反向查询应答包中返回的IP地址所对应的DNS名字，如果二者一致说明没有受到攻击，否则说明被欺骗。

3. IP欺骗

1)IP欺骗的原理  
通过编程的方法可以随意改变发出的包的IP地址，但工作在传输层的TCP协议是一种相对可靠的协议，不会让黑客轻易得逞。由于TCP是面向连接的协议，所以在双方正式传输数据之前，需要用“三次握手”来建立一个值得信赖的连接。假设是hosta和hostb两台主机进行通信，hostb首先发送带有SYN标志的数据段通知hosta建立TCP连接，TCP的可靠性就是由数据包中的多位控制字来提供的，其中最重要的是数据序列SYN和数据确认标志ACK。B将TCP报头中的SYN设为自己本次连接中的初始值(ISN)。  
假如想冒充hostb对hosta进行攻击，就要先使hostb失去工作能力。也就是所谓的拒绝服务攻击，让hostb瘫痪。  
2)IP欺骗的防范  
虽然IP欺骗攻击有着相当难度，但这种攻击非常广泛，入侵往往由这里开始。预防这种攻击可以删除UNIX中所有的/etc/hosts.equiv、$HOME/.rhosts文件，修改/etc/inetd.conf文件，使得RPC机制无法应用。另外，还可以通过设置防火墙过滤来自外部而信源地址却是内部IP的报文。

#### 4.7.4 端口扫描

网络中的每一台计算机如同一座城堡，在这些城堡中，有的对外完全开放，有的却是紧锁城门。在网络技术中，把这些城堡的城门称之为计算机的“端口”。端口扫描是入侵者搜集信息的几种常用手法之一，也正是这一过程最容易使入侵者暴露自己的身份和意图，所以利用暴露的信息可以防范此类攻击。一般来说，扫描端口有如下目的。

> (1)判断目标主机上开放了哪些服务。  
> (2)判断目标主机的操作系统。

如果入侵者掌握了目标主机开放了哪些服务，运行何种操作系统，他们就能够使用相应的手段实现入侵。  

1. 端口扫描原理 

端口在计算机网络领域中是个非常重要的概念。它是专门为计算机通信而设计的，它不是硬件，不同于计算机中的“插槽”，可以说是个“软插槽”。如果有需要的话，一台计算机中可以有上万个端口。  
端口是由计算机的通信协议TCP/IP协议定义的。TCP/IP协议规定，用IP地址和端口作为套接字，它代表TCP连接的一个连接端，一般称为Socket。具体来说，就是用[IP:端口]来定位一台主机中的进程。可以做这样的比喻，端口相当于两台计算机进程间的大门，可以随便定义，其目的只是为了让两台计算机能够找到对方的进程。计算机就像一座大楼，这个大楼有好多入口（端口），进到不同的入口中就可以找到不同的公司（进程）。如果要和远程主机A的程序通信，那么只要把数据发向[A:端口]就可以实现通信了。  
端口扫描就是尝试与目标主机的某些端口建立连接，如果目标主机该端口有回复（见三次握手中的第二次)，则说明该端口开放，即为“活动端口”。  

2. 扫描原理分类

**(1)全TCP连接**。这种扫描方法使用三次握手，与目标计算机建立标准的TCP连接。需要说明的是，这种古老的扫描方法很容易被目标主机记录。  
**(2)半打开式扫描(SYN扫描)**。在这种扫描技术中，扫描主机自动向目标计算机的指定端口发送SYN数据段，表示发送建立连接请求。 

* 如果目标计算机的回应TCP报文中SYN=1,ACK=1,则说明该端口是活动的，接着扫描主机传送一个RST给目标主机拒绝建立TCP连接，从而导致三次握手的过程失败。
* 如果目标计算机的回应是RST,则表示该端口为“死端口”，这种情况下，扫描主机不用做任何回应。

由于扫描过程中，全连接尚未建立，所以大大降低了被目标计算机记录的可能性，并且加快了扫描的速度。  
(3)FIN扫描。在前面介绍过的TCP报文中，有一个字段为N,FIN扫描则依靠发送FIN来判断目标计算机的指定端口是否是活动的。  
发送一个FIN=1的TCP报文到一个关闭的端口时，该报文会被丢掉，并返回一个RST报文。但是，如果当FIN报文到一个活动的端口时，该报文只是被简单的丢掉，不会返回任何回应。  
从FIN扫描可以看出，这种扫描没有涉及任何TCP连接部分。因此，这种扫描比前两种都安全，可以称之为秘密扫描。  
(4)第三方扫描。第三方扫描又称“代理扫描”，这种扫描是利用第三方主机来代替入侵者进行扫描。这个第三方主机一般是入侵者通过入侵其他计算机而得到的，该“第三方”主机常被入侵者称之为“肉鸡”。这些“肉鸡”一般为安全防御系数极低的个人计算机。

#### 4.7.5 强化TCP/IP堆栈以抵御拒绝服务攻击

针对TCP/IP堆栈的攻击方式有多种类型，下面分别介绍攻击原理及抵御方法。

1. 同步包风暴(SYN Flooding)

同步包风暴是当前最流行的DoS(拒绝服务攻击)与DDoS(分布式拒绝服务攻击)的方式之一，是应用最广泛的一种DoS攻击方式，它的原理虽然简单，但使用起来却十分有效。   
问题出在TCP连接的三次握手中，假设一个用户向服务器发送了SYN报文后突然死机或掉线，那么服务器在发出SYN+ACK应答报文后是无法收到客户端的ACK报文的（第三次握手无法完成)，这种情况下服务器端一般会重试（再次发送SYN+ACK给客户端），并等待一段时间后丢弃这个未完成的连接，这段时间的长度称为SYN Timeout,一般来说这个时间是分钟的数量级（大约为30秒~2分钟）：一个用户出现异常导致服务器的一个线程等待1分钟并不是什么很大的问题，但如果有一个恶意的攻击者大量模拟这种情况，服务器端将为了维护一个非常大的半连接列表而消耗非常多的资源一数以万计的半连接，即使是简单的保存并遍历也会消耗非常多的CPU时间和内存，何况还要不断对这个列表中的IP进行SYN+ACK的重试。实际上如果服务器的TCP/IP堆栈不够强大，最后的结果往往是堆栈溢出崩溃。即使服务器端的系统足够强大，服务器端也将忙于处理攻击者伪造的TCP连接请求而无暇理睬客户的正常请求（毕竟客户端的正常请求比率非常之小），此时从正常客户的角度看来，服务器失去响应。这种情况被称作：服务器端受到了SYN Flooding攻击。  
如果攻击者盗用的是某台可达主机X的IP地址，由于主机X没有向主机D发送连接请求，所以当它收到来自D的SYN十ACK包时，会向D发送RST包，主机D会将该连接重置。因此，攻击者通常伪造主机D不可达的IP地址作为源地址。攻击者只要发送较少的、来源地址经过伪装，而且无法通过路由达到的SYN连接请求至目标主机提供TCP服务的端口，将目的主机的TCP缓存队列填满，就可以实施一次成功的攻击。实际情况下，攻击者往往会持续不断地发送SYN包，故称为“SYN洪水”。  
可以通过修改注册表防御SYN Flooding攻击，修改键值位于注册表项HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services的下面，如表4-l所示。

![image-20230227上午102907946](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230227%E4%B8%8A%E5%8D%88102907946.png)

2. ICMP攻击

ICMP协议是TCP/IP协议集中的一个子协议，主要用于在主机与路由器之间传递控制信息，包括报告错误、交换受限控制和状态信息等。当遇到IP数据无法访问目标，IP路由器无法按当前的传输速率转发数据包等情况时，会自动发送ICMP消息。我们可以通过Ping命令发送ICMP回应请求消息并记录收到ICMP回应的回复消息，通过这些消息来对网络或主机的故障提供参考依据。  
ICMP协议本身的特点决定了它非常容易被用于攻击网络上的路由器和主机。比如，前面提到的“Ping of Death”攻击就是利用操作系统规定的ICMP数据包的最大尺寸不超过64KB这一规定，达到使TCP/IP堆栈崩溃、主机死机的效果。   
可以通过修改注册表防御ICMP攻击，修改键值位于注册表项HKLM\System\CurrentControlSet\Services\AFD\Parameters的下面，如表4-2所示。

![image-20230227上午102838183](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230227%E4%B8%8A%E5%8D%88102838183.png)

3. SNMP攻击

SNMP是TCP/IP网络中标准的管理协议，它允许网络中的各种设备和软件，包括交换机、路由器、防火墙、集线器、操作系统、服务器产品和部件等，能与管理软件通信，汇报其当前的行为和状态。但是，SNMP还能被用于控制这些设备和产品，重定向通信流，改变通信数据包的优先级，甚至断开通信连接。总之，入侵者如果具备相应能力，就能完全接管你的网络。  
可以通过修改注册表项HKLMSystem\CurrentControlSet Services\Tcpip\Parameters的键值防御SNMP攻击，如表4-3所示。

![image-20230227上午103521664](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230227%E4%B8%8A%E5%8D%88103521664.png)

#### 4.7.6 系统漏洞扫描

系统漏洞扫描指对重要计算机信息系统进行检查，发现其中可能被黑客利用的漏洞。系统漏洞扫描的结果是对系统安全性能的一个评估，指出了哪些攻击是可能的，因此，成为安全方案的一个重要组成部分。目前，从底层技术来划分，可以将系统漏洞扫描分为基于网络的扫描和基于主机的扫描这两种类型。

1. 基于网络的漏洞扫描

基于网络的漏洞扫描器，是通过网络来扫描远程计算机中的漏洞。比如，利用低版本的DNS Bind漏洞，攻击者能够获取root权限，侵入系统或者攻击者能够在远程计算机中执行恶意代码。使用基于网络的漏洞扫描工具，能够监测到这些低版本的DNS Bind是否在运行。一般来说，基于网络的漏洞扫描工具可以看作为一种漏洞信息收集工具，根据不同漏洞的特性，构造网络数据包，发给网络中的一个或多个目标服务器，以判断某个特定的漏洞是否存在。基于网络的漏洞扫描器，一般由以下几个方面组成。  
(1)漏洞数据库模块。漏洞数据库包含了各种操作系统的各种漏洞信息，以及如何检测漏洞的指令。  
(2)用户配置控制台模块。用户配置控制台与安全管理员进行交互，用来设置要扫描的目标系统以及扫描哪些漏洞。  
(3)扫描引擎模块。扫描引擎是扫描器的主要部件。根据用户配置控制台部分的相关设置，扫描引擎组装好相应的数据包，发送到目标系统，将接收到的目标系统的应答数据包与漏洞数据库中的漏洞特征进行比较，来判断所选择的漏洞是否存在。  
(4)当前活动的扫描知识库模块。通过查看内存中的配置信息，该模块监控当前活动的扫描，将要扫描的漏洞的相关信息提供给扫描引擎。  
(5)结果存储器和报告生成工具。报告生成工具，利用当前活动扫描知识库中存储的扫描结果，生成扫描报告。  

基于网络的漏洞扫描器有很多优点：  
(1)基于网络的漏洞扫描器的价格相对来说比较便宜。  
(2)基于网络的漏洞扫描器在操作过程中，不需要涉及目标系统的管理员。  
(3)基于网络的漏洞扫描器在检测过程中，不需要在目标系统上安装任何东西。  
(4)维护简便。当企业的网络发生了变化的时候，只要某个结点能够扫描网络中的全部目标系统，基于网络的漏洞扫描器不需要进行调整。  

2. 基于主机的漏洞扫描

基于主机的漏洞扫描器，扫描目标系统漏洞的原理与基于网络的漏洞扫描器的原理类似，但是两者的体系结构不一样。基于主机的漏洞扫描器通常在目标系统上安装了一个代理(Agent)或者是服务(Services),以便能够访问所有的文件与进程，这也使得基于主机的漏洞扫描器能够扫描更多的漏洞。  
基于主机的漏洞扫描优点：  
(1)扫描的漏洞数量多。  
(2)集中化管理。基于主机的漏洞扫描器通常都有个集中的服务器作为扫描服务器。所有扫描的指令，均从服务器进行控制，这一点与基于网络的扫描器类似。服务器下载到最新的代理程序后，再分发给各个代理。这种集中化管理模式，使得基于主机的漏洞扫描器在部署上能够快速实现。  
(3)网络流量负载小。由于ESM管理器与ESM代理之间只有通信的数据包，漏洞扫描部分都由ESM代理单独完成，这就大大减少了网络的流量负载。当扫描结束后，ESM代理再次与ESM管理器进行通信，将扫描结果传送给ESM管理器。

### 4.8 信息安全的保障体系与评估方法
#### 4.8.1 计算机信息系统安全保护等级

《计算机信息系统安全保护等级划分准则》(GB17859一1999)规定了计算机系统安全保护能力的5个等级。  
(1)第1级：用户自主保护级（对应TCSEC的C1级）。本级的计算机信息系统可信计算基(Trusted Computing Base)通过隔离用户与数据，使用户具备自主安全保护的能力。它具有多种形式的控制能力，对用户实施访问控制，即为用户提供可行的手段，保护用户和用户组信息，避免其他用户对数据的非法读写与破坏。  
(2)第2级：系统审计保护级（对应TCSEC的C2级）。与用户自主保护级相比，本级的计算机信息系统可信计算基实施了粒度更细的自主访问控制，它通过登录规程、审计安全性相关事件和隔离资源，使用户对自己的行为负责。  
(3)第3级：安全标记保护级（对应TCSEC的B1级）。本级的计算机信息系统可信计算基具有系统审计保护级所有功能。此外，还提供有关安全策略模型、数据标记以及主体对客体强制访问控制的非形式化描述：具有准确地标记输出信息的能力：消除通过测试发现的任何错误。  
(4)第4级：结构化保护级（对应TCSEC的B2级）。本级的计算机信息系统可信计算基建立于一个明确定义的形式化安全策略模型之上，它要求将第三级系统中的自主和强制访问控制扩展到所有主体与客体。此外，还要考虑隐蔽通道。本级的计算机信息系统可信计算基必须结构化为关键保护元素和非关键保护元素。计算机信息系统可信计算基的接口也必须明确定义，使其设计与实现能经受更充分的测试和更完整的复审。它加强了鉴别机制：支持系统管理员和操作员的职能：提供可信设施管理；增强了配置管理控制。系统具有相当的抗渗透能力。  
(5)第5级：访问验证保护级（对应TCSEC的B3级）。本级的计算机信息系统可信计算基满足访问监控器需求。访问监控器仲裁主体对客体的全部访问。访问监控器本身是抗篡改的：必须足够小，能够分析和测试。为了满足访问监控器需求，计算机信息系统可信计算基在其构造时，排除了那些对实施安全策略来说并非必要的代码：在设计和实现时，从系统工程角度将其复杂性降低到最小程度。支持安全管理员职能：扩充审计机制，当发生与安全相关的事件时发出信号：提供系统恢复机制。系统具有很高的抗渗透能力。

#### 4.8.2 安全风险管理

信息系统的安全风险，是指由于系统存在的脆弱性，人为或自然的威胁导致安全事件发生所造成的影响。信息安全风险评估，则是指依据国家有关信息安全技术标准，对信息系统及由其处理、传输和存储的信息的保密性、完整性和可用性等安全属性进行科学评价的过程，它要评估信息系统的脆弱性、信息系统面临的威胁以及脆弱性被威胁源利用后所产生的实际负面影响，并根据安全事件发生的可能性和负面影响的程度来识别信息系统的安全风险。信息安全风险评估是信息安全保障体系建立过程中重要的评价方法和决策机制。没有准确及时的风险评估，将使得各个机构无法对其信息安全的状况做出准确的判断。  
风险评估的准备过程是组织进行风险评估的基础，是整个风险评估过程有效性的保证。组织对自身信息及信息系统进行风险评估的结果将受到业务需求及战略目标、文化、业务流程、安全要求、规模和结构的影响。不同组织对于风险评估的实施过程可能存在不同的要求，因此在风险评估实施前，应该考虑如下内容。  
(1)确定风险评估的范围。进行风险评估可能是由于自身的商业要求、战略目标的要求、相关方的要求或其他原因，因此应根据上述原因确定风险评估范围。风险评估的范围可能是组织全部的信息和信息系统，可能是单独的信息系统，可能是组织的关键业务流程，也可能是客户的知识产权。  
(2)确定风险评估的目标。组织应明确风险评估的目标，为风险评估的过程提供导向。支持组织的信息、系统、应用软件和网络是组织重要的资产。资产的保密性、完整性和可用性对于维持竞争优势、现金流动、获利能力、法规要求和组织形象是必要的。组织要面对来自四面八方日益增长的安全威胁，系统、应用软件和网络可能是严重威胁的目标。同时，由于组织的信息化程度的不断提高，对基于信息系统和服务技术的依赖日益增加，一个组织则可能出现更多的脆弱性。组织风险评估的目标基本上来源于组织业务持续发展的需要、满足相关方的要求、满足法律法规的要求等方面。  
(3)建立适当的组织结构。在风险评估过程中，组织应建立适当的组织结构，以支持整个过程的推进，如成立由管理层、相关业务骨干、IT技术人员等组成的风险评估小组。组织结构的建立应考虑其结构和复杂程度，以保证能够满足风险评估的范围、目标。  
(4)建立系统性的风险评估方法。风险评估方法应考虑评估的范围、目的、时间、效果、组织文化、人员素质以及开展程度等因素来确定，使之能够与环境和安全要求相适应。  
(5)获得最高管理者对风险评估策划的批准。上述所有内容应得到组织的最高管理者的批准，并对管理层和员工进行传达。  
根据评估实施者的不同，将风险评估形式分为**自评估和他评估**两大类。**自评估是由被评估信息系统的拥有者依靠自身的力量，对其自身的信息系统进行的风险评估活动。他评估则是被评估信息系统拥有者的上级主管机关或业务主管机关发起的，依据已经颁布的法规或标准进行的具有强制意味的检查活动，是通过行政手段加强信息安全的重要措施。**他评估也是经常提及的检查评估，自评估和他评估都可以通过信息安全风险评估服务机构进行风险评估的咨询、服务、培训以及得到风险评估有关工具。  
风险评估的基本要素为**脆弱性、资产、威胁、风险和安全措施**，与这些要素相关的属性分别为业务战略、资产价值、安全需求、安全事件和残余风险，这些也是风险评估要素的一部分。风险评估的工作是围绕其基本要素展开的，在对这些要素的评估过程中需要充分考虑**业务战略、资产价值、安全事件和残余风险**等与这些基本要素相关的各类因素。这些要素之间存在着以下关系：

业务战略依赖于资产去完成：资产拥有价值，单位的业务战略越重要，对资产的依赖度越高，资产的价值则就越大，风险也越大，并可能演变成安全事件：威胁都要利用脆弱性，脆弱性越大则风险越大：脆弱性使资产暴露，是未被满足的安全需求，威胁要通过利用脆弱性来危害资产，从而形成风险：资产的重要性和对风险的意识会导出安全需求；安全需求要通过安全措施来得以满足，且是有成本的：安全措施可以抗击威胁，降低风险，减弱安全事件的影响：  
风险不可能也没有必要降为零，在实施了安全措施后还会有残留下来的风险—一部分残余风险来自于安全措施可能不当或无效，在以后需要继续控制这部分风险，另一部分残余风险则是在综合考虑了安全的成本与资产价值后，有意未去控制的风险，这部分风险是可以被接受的：残余风险应受到密切监视，因为它可能会在将来诱发新的安全事件，参见图4-11。

![image-20230227上午115339223](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230227%E4%B8%8A%E5%8D%88115339223.png)

在一般的评估体系中，资产大多属于不同的信息系统，业务生产系统的数量还可能会很多，需要将信息系统及其中的信息资产进行恰当的分类，才能进行下一步的风险评估工作。在实际项目中，具体的资产分类方法根据具体环境由评估者来灵活把握。资产赋值是对资产安全价值的估价，而不是以资产的账面价格来衡量。在对资产进行估价时，不仅要考虑资产的成本价格，还要考虑资产对于组织业务的安全重要性，即根据资产损失所引发的潜在商务影响来决定。为确保资产估价时的一致性和准确性，机构应该建立一个资产价值尺度，明确如何对资产进行赋值。资产估价的过程也就是对资产保密性、完整性和可用性影响分析的过程。影响就是由人为或突发性引起的安全事件对资产破坏的后果，这一后果可能毁灭某些资产，危及信息系统并使其丧失保密性、完整性和可用性，最终还会导致财政损失、市场份额或公司形象的损失。特别重要的是，即使每一次影响引起的损失并不大，但长期积累的众多意外事件的影响总和则可造成严重损失。一般情况下，影响主要从以下几方面来考虑。  

> (1)违反了有关法律或（和）规章制度。  
> (2)影响了业务执行。  
> (3)造成了信誉、声誉损失。  
> (4)侵犯了个人隐私。  
> (5)造成了人身伤害。  
> (6)对法律实施造成了负面影响。  
> (7)侵犯了商业机密。  
> (8)违反了社会公共准则。  
> (9)造成了经济损失。  
> (10)破坏了业务活动。  
> (11)危害了公共安全。

资产安全属性的不同通常也意味着安全控制、保护功能需求的不同。通过考察保密性、完整性和可用性3种不同的安全属性，能够基本反映资产的价值。  
**安全威胁是一种对机构及其资产构成潜在破坏的可能性因素或者事件**。无论对于多么安全的信息系统，安全威胁都是一个客观存在的事物，它是风险评估的重要因素之一。产生安全威胁的主要因素可以分为**人为因素和环境因素**。人为因素又可区分为**有意和无意**两种。环境因素包括自然界的不可抗的因素和其他物理因素。威胁作用形式可以是对信息系统直接或间接的攻击，例如非授权的泄露、篡改、删除等，在保密性、完整性或可用性等方面造成损害。也可能是偶发的或蓄意的事件。一般来说，威胁总是要利用网络、系统、应用或数据的弱点才可能成功地对资产造成伤害。安全事件及其后果是分析威胁的重要依据。但是有相当一部分威胁发生时，由于未能造成后果或者没有意识到，而被安全管理人员忽略。这将导致对安全威胁的认识出现偏差。在威肋评估过程中，首先就要对组织需要保护的每一项关键资产进行威胁识别。在威胁识别过程中，应根据资产所处的环境条件和资产以前遭受威胁损害的情况来判断。一项资产可能面临着多个威胁，同样一个威胁可能对不同的资产造成影响。  
脆弱性评估是安全风险评估中的重要内容。弱点包括物理环境、组织、过程、人员、管理、配置、硬件、软件和信息等各种资产的脆弱性。弱点是资产本身存在的，它可以被威胁利用、引起资产或商业目标的损害。值得注意的是，弱点虽然是资产本身固有的，但它本身不会造成损失，它只是一种条件或环境，可能导致被威胁利用而造成资产损失。如果没有相应的威胁发生，单纯的弱点并不会对资产造成损害。那些没有安全威胁的弱点可以不需要实施安全保护措施，但它们必须记录下来以确保当环境、条件有所变化时能随之加以改变。需要注意的是不正确的、起不到应有作用的或没有正确实施的安全保护措施本身就可能是一个安全薄弱环节。脆弱性评估将针对每一项需要保护的信息资产，找出每一种威胁所能利用的脆弱性，并对脆弱性的严重程度进行评估，即对脆弱性被威胁利用的可能性进行评估，最终为其赋相对等级值。在进行脆弱性评估时，提供的数据应该来自于这些资产的拥有者或使用者，来自于相关业务领域的专家以及软硬件信息系统方面的专业人员。

脆弱性评估所采用的方法主要有**问卷调查、人员问询、工具扫描、手动检查、文档审查、渗透测试**等。脆弱性主要从技术和管理两个方面进行评估，涉及**物理层、网络层、系统层、应用层、管理层**等各个层面的安全问题。其中在技术方面主要是通过**远程和本地**两种方式进行系统扫描，对网络设备和主机等进行人工抽查，以保证技术脆弱性评估的全面性和有效性：管理脆弱性评估方面可以按照BS7799等标准的安全管理要求对现有的安全管理制度及其执行情况进行检查，发现其中的管理漏洞和不足。  
风险计算模型包含**信息资产、弱点/脆弱性、威胁等关键要素**。每个要素有各自的属性，信息资产的属性是资产价值，弱点的属性是弱点被威胁利用后对资产带来的影响的严重程度，威胁的属性是威胁发生的可能性。风险计算的过程如下。  

> (1)对信息资产进行识别，并对资产赋值。  
> (2)对威胁进行分析，并对威胁发生的可能性赋值。  
> (3)识别信息资产的脆弱性，并对弱点的严重程度赋值。  
> (4)根据威胁和脆弱性计算安全事件发生的可能性。  
> (5)结合信息资产的重要性和发生安全事件的可能性，计算信息资产的风险值。

## 第5章 软件工程基础知识

本章主要讨论软件工程的基本概念，论述软件工程中基本的软件开发方法。按照常见的软件开发阶段划分，分别讨论需求、分析、设计、编码和测试等环节中的常见方法和技术，并介绍近年来出现的一些新的软件工程开发方法。

### 5.1 软件工程

20世纪60年代以前，计算机刚刚投入实际使用，软件设计往往只是为了一个特定的应用而在指定的计算机上进行设计和编制，采用密切依赖于计算机的机器代码或汇编语言，软件规模比较小，文档资料通常也不存在，很少使用系统化的开发方法，设计软件往往等同于编制程序，基本上是个人设计、个人使用、个人操作、自给自足的私人化的软件生产方式。  
60年代中期，大容量、高速度计算机的出现，使计算机的应用范围迅速扩大，软件开发量急刷增长，软件系统的规模越来越大，复杂程度越来越高，软件可靠性问题也越来越突出。1968年，北大西洋公约组织(NATO)在联邦德国的国际学术会议首次提出了软件危机(Software Crisis)概念。  
软件危机的具体表现为：  

* 软件开发进度难以预测：
* 软件开发成本难以控制：
* 软件功能难以满足用户期望：
* 软件质量无法保证：
* 软件难以维护：
* 软件缺少适当的文档资料。

为了解决软件危机，1968、1969年NAT0连续召开了两次会议，提出了软件工程的概念。

#### 5.1.1 软件工程定义

软件工程一直以来都缺乏一个统一的定义，很多学者和组织机构都分别给出了自己的定义：

* Barry Boehm:运用现代科学技术知识来设计并构造计算机程序及为开发、运行和维护这些程序所必须的相关文件资料。  
* IEEE:软件工程是：①将系统化的、严格约束的、可量化的方法应用于软件的开发、运行和维护，即将工程化应用于软件：②对①中所述方法的研究。  
* Fritz Bauer:在NATO会议上给出的定义，建立并使用完善的工程化原则，以较经济的手段获得能在实际机器上有效运行的可靠软件的一系列方法。
* 《计算机科学技术百科全书》：软件工程是应用计算机科学、数学、逻辑学及管理科学等原理，开发软件的工程。软件工程借鉴传统工程的原则和方法，以提高质量、降低成本和改进算法。其中，计算机科学、数学用于构建模型与算法：工程科学用于制定规范、设计范型(Paradigm)、评估成本及确定权衡：管理科学用于计划、资源、质量、成本等管理。

软件工程过程是指为获得软件产品，在软件工具的支持下由软件工程师完成的一系列软件  工程活动，包括以下4个方面。  

>  (1)P (Plan) — 软件规格说明。规定软件的功能及其运行时的限制。  
>  (2)D (Do) 一 软件开发。开发出满足规格说明的软件。  
>  (3)C (Check)  一  软件确认。确认开发的软件能够满足用户的需求。  
>  (4)A (Action) 一 软件演进。软件在运行过程中不断改进以满足客户新的需求。

#### 5.1.2 软件过程模型

软件要经历从**需求分析、软件设计、软件开发、运行维护**，直至被淘汰这样的全过程，这个全过程称为软件的生命周期。软件生命周期描述了软件从生到死的全过程。  
为了使软件生命周期中的各项任务能够有序地按照规程进行，需要一定的工作模型对各项任务给予规程约束，这样的工作模型被称为软件过程模型，有时也称之为软件生命周期模型。  

1. 瀑布模型

瀑布模型(Waterfall Model)是最早使用的软件过程模型之一，包含一系列活动。这些活动从一个阶段到另一个阶段逐次下降，它的工作流程在形式上很像瀑布，因此被称为瀑布模型，如图5-1所示。

![image-20230227下午122606636](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230227%E4%B8%8B%E5%8D%88122606636.png)

瀑布模型的特点是因果关系紧密相连，前一个阶段工作的输出结果，是后一个阶段工作的输入。每一个阶段都是建筑在前一个阶段正确实施的结果之上。每一个阶段工作完成后都伴随着一个里程碑（一组检查条件），对该阶段的工作进行审查和确认。历史上，瀑布模型起到了重要作用，它的出现有利于人员的组织管理，有利于软件开发方法和工具的研究。  
瀑布模型的主要缺点有：  

> (1)软件需求的完整性、正确性等很难确定，甚至是不可能和不现实的。因为用户不理解计算机和软件系统，无法回答目标系统“做什么”，对系统将来的改变也难以确定，往往用“我不能准确地告诉你”回答开发人员。  
> (2)瀑布模型是一个严格串行化的过程模型，使得用户和软件项目负责人要相当长的时间才能得到一个可以看得见的软件系统。如果出现与用户的期望不一致，或者出现需求变更，将会带来巨大的损失（例如人力、财力、时间等）。  
> (3)瀑布模型的基本原则是在每个阶段一次性地完全解决该阶段的工作，不会出现遗漏错误等情况，而实际上这是不现实或不可能的。

2. 原型化模型

原型模型(Prototype Model).又称快速原型。由于瀑布型的缺点，人们借鉴建筑师、工程师建造原型的经验，提出了原型模型。该模型如图5-2所示。

![image-20230227下午20909466](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230227%E4%B8%8B%E5%8D%8820909466.png)

原型模型主要有以下两个阶段。  
(1)原型开发阶段。软件开发人员根据用户提出的软件系统的定义，快速地开发一个原型。该原型应该包含目标系统的关键问题和反映目标系统的大致面貌，展示目标系统的全部或部分功能、性能等。  
开发原型可以考虑以下3种途径。  

* 利用模拟软件系统的人机界面和人机交互方式。  
* 真正开发一个原型。
* 找来一个或几个正在运行的类似软件进行比较。

(2)目标软件开发阶段。在征求用户对原型的意见后对原型进行修改完善，确认软件系统的需求并达到一致的理解，进一步开发实际系统。但是，在实际工作中，由于各种原因，大多数原型都废弃不用，仅仅把建立原型的过程当作帮助定义软件需要的一种手段。原型模型的使用应该注意以下内容。  

* 用户对系统的认识模糊不清，无法准确回答目标系统的需求。
* 要有一定的开发环境和工具支持。
* 经过对原型的若干次修改，应收敛到目标范围内，否则可能会失败。
* 对大型软件来说，原型可能非常复杂而难以快速形成，如果没有现成的原型模型，就不应考虑用原型法。

原型模型后续也发生了一些演变，按照原型的作用不同，出现了抛弃型原型和演化性原型。

**抛弃型原型是将原型作为需求确认的手段，在需求确认结束后，原型就被抛弃不用，重新采用一个完整的瀑布模型进行开发。**

**演化性原型是在需求确认结束后，不断补充和完善原型，直至形成一个完整的产品。原型的概念也被后续出现的过程模型采纳，如螺旋模型和敏捷方法。**

3. 螺旋模型

螺旋模型(Spiral Model)是在快速原型的基础上扩展而成。也有人把螺旋模型归到快速原型，实际上，它是生命周期模型与原型模型的结合，如图5-3所示。这种模型把整个软件开发流程分成多个阶段，每一个阶段都由4部分组成，它们是：

![image-20230227下午23450297](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230227%E4%B8%8B%E5%8D%8823450297.png)

(1)目标设定。为该项目进行需求分析，定义和确定这一个阶段的专门目标，指定对过程和产品的约束，并且制订详细的管理计划。  
(2)风险分析。对可选方案进行风险识别和详细分析，制定解决办法，采取有效措施避免这些风险。  
(3)开发和有效性验证。风险评估后，可以为系统选择开发模型，并且进行原型开发，即开发软件产品。  
(4)评审。对项目进行评审，以确定是否需要进入螺旋线的下一次回路，如果决定继续，就要制订下一阶段计划。  
螺旋模型的软件开发过程实际是上述4个部分的迭代过程，每迭代一次，螺旋线就增加一圈，软件系统就生成一个新版本，这个新版本实际上是对目标系统的一个逼近。经过若干次的迭代后，系统应该尽快地收敛到用户允许或可以接受的目标范围内，否则也有可能中途夭折。  
该模型支持大型软件开发，适用于面向规格说明、面向过程和面向对象的软件开发方法，也适用于几种开发方法的组合。

#### 5.1.3 敏捷模型
软件开发在20世纪90年代受到两个大的因素影响：对内，面向对象编程开始取代面向过程编程：对外，互联网泡沫导致快速投向市场以及公司的快速发展成为关键商业因素。快速变化的需求需要短的产品交付周期，这与传统软件开发流程并不兼容。  
2001年2月，17位著名的软件开发专家齐聚在美国犹他州雪鸟镇，举行了一次敏捷方法发起者和实践者的聚会。在这次会议上，正式提出了Agil(敏捷)的概念，并共同签署了敏捷宣言。  

1. 敏捷方法的特点

敏捷型方法主要有两个特点，这也是其区别于其他方法，尤其是计划驱动或重型开发方法的最主要的特征。  
敏捷型方法是**“适应性”(adaptive)而非“预设性”(predictive)**的。重型方法试图对一个软件开发项目在很长的时间跨度内做出详细的计划，然后依计划进行开发。这类方法在计划制订完成后拒绝变化，而敏捷型方法欢迎变化。其实，敏捷的目的就是成为适应变化的过程，甚至能允许改变自身来适应变化。  
敏捷型方法是“面向人的”(People-oriented)而非“面向过程的”(Process-oriented)。它们试图使软件开发工作能够充分发挥人的创造能力。它们强调软件开发应当是一项愉快的活动。  下面是对上面两点的详细解释。  
1)适应性和预设性  
传统软件开发方法的基本思路一般是从其他工程领域借鉴而来，比如土木工程等。在这类工程实践中，通常非常强调施工前的设计规划。只要图纸设计得合理并考虑充分，施工队伍可以完全遵照图纸顺利建造，并且可以很方便地把图纸划分为许多更小的部分，交给不同的施工人员分别完成。  
但是，软件开发与上面的土木工程有着显著的不同。软件的设计是难以实现的，并且需要昂贵的有创造性的人员。土木工程师在设计时所使用的模型是基于多年的工程实践，而且一些设计上的关键部分都是建立在坚实的数学分析之上。而在软件设计中，完全没有类似的基础。  
软件开发无法将设计和实施分离开来，一些设计错误只能在编码和测试时才能发现，根本无法做出一个交给程序员就能直接编码的软件设计。  
所以，软件过程不可能照搬其他工程领域原有的方法，需要有适应其特点的新开发方法。软件的设计之所以难以实现，问题在于软件需求的不稳定，从而导致软件过程的不可预测。但是，传统的控制项目的模式都是针对可预测的环境，在不可预测的环境下，往往无法使用这些方法。  
但是，必须对这样的过程进行监控，以使得整个过程能向期望的目标前进。于是Agle方法引入“适应性”方法，该方法使用反馈机制对不可预测过程进行控制。  
2)面向人而非面向过程  
传统计划驱动方法的目标之一是使得一个项目的参与人员成为可替代的部件。这样的一种过程将人看成是一种资源，他们具有不同的角色，如分析员、程序员、测试员及管理人员。个体是不重要的，只有角色才是重要的。这样考虑的一个重要的出发点就是：尽量减少人为因素对开发过程的影响。但是，敏捷型方法则正好相反。  
计划驱动方法是让软件开发人员“服从”一个过程而非“接受”一个过程。但是，一个常见的情况是：软件的开发过程是由管理人员决定的，而管理人员己经脱离实际开发活动相当长的时间了，如此设计出来的开发过程是难以为开发人员所接受的。  
敏捷开发过程还要求开发人员必须有权做技术方面的所有决定。IT行业和其他行业不同，其技术变化速度非常之快。今天的新技术可能几年后就过时了。只有在第一线的开发人员才能真正掌握和理解开发过程中的技术细节。所以技术方面的决定必须由他们来做出。这样一来，就使得开发人员和管理人员在一个软件项目的领导方面有同等的地位，他们共同对整个开发过程负责。  
敏捷方法特别强调开发中相关人员之间的信息交流。Alistair Cockburn在对数十个项目的案例调查分析后得出一个结论，“项目失败的原因最终都可以追溯到信息没有及时准确地传递到应该接受它的人”。在开发过程中，项目的需求是在不断变化的，管理人员之间、开发人员之间以及管理人员和开发人员之间，都必须不断地了解这些变化，对这些变化做出反应，并实施在随后的开发过程中。  
敏捷方法还特别提倡直接的面对面交流。Alistair Cockburn认为面对面交流的成本要远远低于文档交流的成本。因此，敏捷方法一般都按照高内聚、低耦合的原则将项目划分为若干小组，以增加沟通，提高敏捷性及应变能力。

2. 敏捷方法的核心思想

敏捷方法的核心思想主要有下面3点。  
(1)敏捷方法是适应型，而非可预测型。与传统方法不同，敏捷方法拥抱变化，也可以说它的初衷就是适应变化的需求，利用变化来发展，甚至改变自己，最后完善自己。  
(2)敏捷方法是以人为本，而非以过程为本。传统方法以过程为本，强调充分发挥人的特性，不去限制它。并且软件开发在无过程控制和过于严格烦琐的过程控制中取得一种平衡，以保证软件的质量。  
(3)迭代增量式的开发过程。敏捷方法以原型开发思想为基础，采用迭代增量式开发，发行版本小型化。它根据客户需求的优先级和开发风险，制订版本发行计划，每一发行版都是在前一成功发行版的基础上进行功能需求扩充，最后满足客户的所有功能需求。

3. 主要敏捷方法简介

这里简单介绍几种影响比较大的敏捷方法。  
(1)极限编程(Extreme Programming,XP)。在所有的敏捷型方法中，XP是最引人瞩目的。  
极限编程是一个轻量级的、灵巧的软件开发方法：同时它也是一个非常严谨和周密的方法。它的基础和价值观是交流、朴素、反馈和勇气，即任何一个软件项目都可以从4个方面入手进行改善：加强交流：从简单做起：寻求反馈：勇于实事求是。  
XP是一种近螺旋式的开发方法，它将复杂的开发过程分解为一个个相对比较简单的小周期：通过积极的交流、反馈以及其他一系列的方法，开发人员和客户可以非常清楚开发进度、变化、待解决的问题和潜在的困难等，并根据实际情况及时地调整开发过程。  
(2)水晶系列方法。水晶系列方法是由Alistair Cockburn提出的敏捷方法系列。它与XP方法一样，都有以人为中心的理念，但在实践上有所不同。其目的是发展一种提倡“机动性的”方法，包含具有共性的核心元素，每个都含有独特的角色、过程模式、工作产品和实践。  
Crystal家族实际上是一组经过证明、对不同类型项目非常有效的敏捷过程，它的发明使得敏捷团队可以根据其项目和环境选择最合适的Crystal家族成员。  
(3)Scrum。该方法侧重于项目管理。Scrum是迭代式增量软件开发过程，通常用于敏捷软件开发。Scrum包括了一系列实践和预定义角色的过程骨架（是一种流程、计划、模式，用于有效率地开发软件)。  
在Scrum中，使用产品Backlog来管理产品的需求，产品Backlog是一个按照商业价值排序的需求列表。根据Backlog的内容，将整个开发过程被分为若干个短的迭代周期(Sprint)。  
在Sprint中，Scrum团队从产品Backlog中挑选最高优先级的需求组成Sprint backlog。在每个迭代结束时，Scrum团队将递交潜在可交付的产品增量。当所有Sprint结束时，团队提交最终的软件产品。  
(4)特征驱动开发方法(Feature Driven Development,FDD)。FDD是由Jeff De Luca和大师Peter Coad提出来的。FDD是一个迭代的开发模型。FDD认为有效的软件开发需要3个要素：**人、过程和技术。**
FDD定义了6种关键的项目角色：项目经理、首席架构设计师、开发经理、主程序员、程序员和领域专家。根据项目大小，部分角色可以重复。  
FDD有5个核心过程：**开发整体对象模型、构造特征列表、计划特征开发、特征设计和特征构建**。其中，计划特征开发根据构造出的特征列表、特征间的依赖关系进行计划，设计出包含特征设计和特征构建过程组成的多次迭代。

#### 5.1.4 统一过程模型（RUP)

软件统一过程(Rational Unified Process,RUP)是Rational软件公司创造的软件工程方法。RUP描述了如何有效地利用商业的、可靠的方法开发和部署软件，是一种重量级过程。RUP类似一个在线的指导者，它可以为所有方面和层次的程序开发提供指导方针、模版以及事例支持。  

1. RUP的生命周期

RUP软件开发生命周期是一个二维的软件开发模型，RUP中有9个核心工作流，这9个核心工作流如下。  

* 业务建模(Business Modeling)：理解待开发系统所在的机构及其商业运作，确保所有参与人员对待开发系统所在的机构有共同的认识，评估待开发系统对所在机构的影响。
* 需求(Requirements):定义系统功能及用户界面，使客户知道系统的功能，使开发人员理解系统的需求，为项目预算及计划提供基础。
* 分析与设计(Analysis&Design)：把需求分析的结果转化为分析与设计模型。
* 实现(Implementation):把设计模型转换为实现结果，对开发的代码做单元测试，将不同实现人员开发的模块集成为可执行系统。
* 测试(Test):检查各子系统之间的交互、集成，验证所有需求是否均被正确实现，对发现的软件质量上的缺陷进行归档，对软件质量提出改进建议。
* 部署(Deployment)：打包、分发、安装软件，升级旧系统；培训用户及销售人员，并提供技术支持。
* 配置与变更管理(Configuration&Change Management):跟踪并维护系统开发过程中产生的所有制品的完整性和一致性。
* 项目管理(Project Management):为软件开发项目提供计划、人员分配、执行、监控等方面的指导，为风险管理提供框架。
* 环境(Environment):为软件开发机构提供软件开发环境，即提供过程管理和工具的支持。

需要说明的是表示核心工作流的术语Discipline,其的中文意义较多，根据RUP的定义，Discipline是相关活动的集合，这些活动都和项目的某一个方面有关，如这些活动都是和业务建模相关的，或者都是和需求相关的，或者都是和分析设计相关的，等等。  
RUP把软件开发生命周期划分为多个循环(Cycle),每个循环生成产品的一个新的版本，每个循环依次由4个连续的阶段(Phase)组成，每个阶段完成确定的任务。这4个阶段如下。  

* 初始(inception)阶段：定义最终产品视图和业务模型，并确定系统范围。
* 细化(elaboration)阶段：设计及确定系统的体系结构，制订工作计划及资源要求
* 构造(construction)阶段：构造产品并继续演进需求、体系结构、计划直至产品提交。
* 移交(transition)阶段：把产品提交给用户使用。

每一个阶段都由一个或多个连续的迭代(Iteration)组成。迭代并不是重复地做相同的事，而是针对不同用例的细化和实现。每一个迭代都是一个完整的开发过程，它需要项目经理根据当前迭代所处的阶段以及上次迭代的结果，适当地对核心工作流中的行为进行裁剪。  
在每个阶段结束前有一个里程碑(Milestone)评估该阶段的工作。如果未能通过该里程碑的评估，则决策者应该做出决定，是取消该项目还是继续做该阶段的工作。

2. RUP中的核心概念

RUP中定义了如下一些核心概念，理解这些概念对于理解RUP很有帮助：  

* 角色(Role)：Who的问题。角色描述某个人或一个小组的行为与职责。RUP预先定义了很多角色，如体系结构师(Architect)、设计人员(Designer)、实现人员(Implementer)、测试员(tester)和配置管理人员(Configuration Manager)等，并对每一个角色的工作和职责都做了详尽的说明。
* 活动(Activity)：How的问题。活动是一个有明确目的的独立工作单元。
* 制品(Artifact)：What的问题。制品是活动生成、创建或修改的一段信息。也有些书把Artifact翻译为产品、工件等，和制品的意思差不多。
* 工作流(Workf1ow)：When的问题。工作流描述了一个有意义的连续的活动序列，每个工作流产生一些有价值的产品，并显示了角色之间的关系。  

RUP2003对这些概念有比较详细的解释，并用类图描述了这些概念之间的关系，除了角色、活动、制品和工作流这4个核心概念外，还有其他一些基本概念，如工具教程(ToolMentor)、检查点(Checkpoints)、模板(Template)和报告(Report)等。

3. RUP的特点

RUP是用例驱动的、以体系结构为中心的、迭代和增量的软件开发过程。下面对这些特点做进一步的分析。  
1)用例驱动  
RUP中的开发活动是用例驱动的，即需求分析、设计、实现和测试等活动都是用例驱动的。  
2)以体系结构为中心  
RUP中的开发活动是围绕体系结构展开的。软件体系结构的设计和代码设计无关，也不依赖于具体的程序设计语言。软件体系结构是软件设计过程中的一个层次，这一层次超越计算过程中的算法设计和数据结构设计。体系结构层次的设计问题包括系统的总体组织和全局控制、通信协议、同步、数据存取、给设计元素分配功能、设计元素的组织、物理分布、系统的伸缩性和性能等。  
体系结构的设计需要考虑多方面的问题：在功能性特征方面要考虑系统的功能：在非功能性特征方面要考虑系统的性能、安全性和可用性等：与软件开发有关的特征要考虑可修改性、可移植性、可重用性、可集成性和可测试性等；与开发经济学有关的特征要考虑开发时间、费用、系统的生命期等。当然，这些特征之间有些是相互冲突的，一个系统不可能在所有的特征上都达到最优，这时就需要系统体系结构设计师在各种可能的选择之间进行权衡。
对于一个软件系统，不同人员所关心的内容是不一样的。因此，软件的体系结构是一个多维的结构，也就是说，会采用多个视图(View)来描述软件体系结构。

![image-20230228上午101458299](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230228%E4%B8%8A%E5%8D%88101458299.png)

RUP采用如图5-4所示的“4+1”视图模型来描述软件系统的体系结构。在“4+1”视图模型中，分析人员和测试人员关心的是系统的行为，会侧重于用例视图：最终用户关心的是系统的功能，会侧重于逻辑视图；程序员关心的是系统的配置、装配等问题，会侧重于实现视图：系统集成人员关心的是系统的性能、可伸缩性、吞吐率等问题，会侧重于进程视图：系统工程师关心的是系统的发布、安装、拓扑结构等问题，会侧重于部署视图。

3)迭代与增量  
RUP强调采用迭代和增量的方式来开发软件，把整个项目开发分为多个迭代过程。在每次迭代中，只考虑系统的一部分需求，进行分析、设计、实现、测试和部署等过程：每次迭代是在已完成部分的基础上进行的，每次增加一些新的功能实现，以此进行下去，直至最后项目的完成。软件开发采用迭代和增量的方式有以下好处。  

> (1)在软件开发的早期就可以对关键的、影响大的风险进行处理。  
> (2)可以提出一个软件体系结构来指导开发。  
> (3)可以更好地处理不可避免的需求变更。  
> (4)可以较早得到一个可运行的系统，鼓舞发团队的士气，增强项目成功的信心。  
> (5)为开发人员提供一个能更有效工作的开发过程。  

#### 5.1.5 软件能力成熟度模型

软件能力成熟度模型(Capability Maturity Model for Software,CMM)是一个概念模型，模型框架和表示是刚性的，不能随意改变，但模型的解释和实现有一定弹性。CMM模型自20世纪80年代末推出，并于20世纪90年代广泛应用于软件过程的改进以来，极大地促进了软件生产率的提高和软件质量的提高。  
CMM(Capability Maturity Model Integration for Software,软件能力成熟度模型集成)是在CMM的基础上发展而来的。CMMI是由美国卡耐基梅隆大学软件工程研究所(Software Engineering Institute,SEI)组织全世界的软件过程改进和软件开发管理方面的专家历时四年而开发出来的，并在全世界推广实施的一种软件能力成熟度评估标准，主要用于指导软件开发过程的改进和进行软件开发能力的评估。CMMI的推出，为软件产业的发展和壮大做出了巨大的贡献。

CMMI 提供了一个软件能力成熟度的框架，它将软件过程改进的步骤组织成5个成熟度等级，共包括18个关键过程域，52个过程目标，3168种关键时间，它为软件过程不断改进奠定了一个循序渐进的基础。  
l)Level1初始级  
处于成熟度级别1级时，过程通常是随意且混乱的。这些组织的成功依赖于组织内人员的能力与英雄主义。成熟度1级的组织也常常能产出能用的产品与服务，但它们经常超出在计划中记录的预算与成本。  
2)Level2已管理级  
在该等级下，意味着组织要确保策划、文档化、执行、监督和控制项目级的过程，并且需要为过程建立明确的目标，并能实现成本、进度和质量目标等。  
3)Level3已定义级  
在这一等级，企业能够根据自身的特殊情况定义适合自己企业和项目的标准流程，将这套管理体系与流程予以制度化，同时企业开始进行项目积累，企业资产的收集。  
4)Level4量化管理级  
在成熟度4级，组织建立了产品质量、服务质量以及过程性能的定量目标。成熟度级别3级与4级的关键区别在于对过程性能的可预测。  
5)Level5优化级  
在优化级水平上，企业的项目管理达到了最高的境界。成熟度级别5级关注于通过增量式的与创新式的过程与技术改进，不断地改进过程性能。处于成熟度5级时，组织使用从多个项目收集来的数据对整体的组织级绩效进行关注。

有关软件能力成熟度模型的详细介绍，可参考CMM相关专业书籍。

### 5.2 需求工程

软件需求目前并没有统一的定义，但都包含以下几方面的内容。  
(1)用户解决问题或达到目标所需条件或权能(Capability)。  
(2)系统或系统部件要满足合同、标准、规范或其他正式规定文档所需具有的条件或权能。  
(3)一种反映上面(1)或(2)所述条件或权能的文档说明。它包括功能性需求及非功能性需求，非功能性需求对设计和实现提出了限制，比如性能要求、质量标准或者设计限制。  
在经典的瀑布软件过程模型中，将需求分析作为软件开发的第1个阶段，明确指出该阶段的输出成果为用户原始需求说明书和软件需求描述规约。从这点看，需求阶段首先需要定义用户的原始需求，并与用户、客户达成一致：其次，需要这对原始需求进行分析，给出一个初步的软件解决方案，并给出该软件的需求描述规约，以指导后续的软件开发。这两个文档之间存在一个转换过程。  
软件需求包括3个不同的层次：**业务需求、用户需求和功能需求（也包括非功能需求）**。

> (1)业务需求(business requirement)反映了组织机构或客户对系统、产品高层次的目标要求。  
> (2)用户需求(user requirement)描述了用户使用产品必须要完成的任务，是用户对该软件产品的期望。这两种构成了用户原始需求文档的内容。  
> (3)功能需求(functional requirement).定义了开发人员必须实现的软件功能，使得用户能完成他们的任务，从而满足业务需求。

所谓特性(feature)是指逻辑上相关的功能需求的集合，给用户提供处理能力并满足业务需求。作为补充，软件需求规格说明还应包括非功能需求，它描述了系统展现给用户的行为和执行的操作等。它包括产品必须遵从的标准、规范和合约：外部界面的具体细节：性能要求：设计或实现的约束条件及质量属性。所谓约束是指对开发人员在软件产品设计和构造上的限制，常见的有设计约束和过程约束。质量属性是通过多种角度对产品的特点进行描述，从而反映产品功能。多角度描述产品对用户和开发人员都极为重要。

开发软件系统最困难的部分就是准确说明开发什么，因为用户往往很难给出完整正确的原始需求，也很难想象出未来的软件应该提供哪些功能，以解决自己的业务问题。这些都需要软件开发人员协助，通过多次的讨论方能最终确认。而如果前期需求分析不透彻，一旦出错，将最终会给系统带来极大损害，并且以后再对它进行修改也极为困难，容易导致项目失败。  
l987年，Frederick Brooks在“No Silver Bullet:Essence and Accidents of Software Engineering”中，充分说明了需求过程在软件项目中扮演的重要角色。  
20世纪80年代中期，形成了软件工程的子领域，需求工程(Requirement Engineering,RE)。需求工程是随着计算机的发展而发展的，在计算机发展的初期，软件规模不大，软件开发所关注的是代码编写，需求分析很少受到重视。随着软件系统规模的扩大，需求分析与定义在整个软件开发与维护过程中越来越重要，直接关系到软件的成功与否。人们逐渐认识到需求分析活动不再仅限于软件开发的最初阶段，它贯穿于系统开发的整个生命周期。  
需求工程是指应用已证实有效的原理、方法，通过合适的工具和记号，系统地描述待开发系统及其行为特征和相关约束。需求工程覆盖了体系结构设计之前的各项开发活动，主要包括分析客户要求、对未来系统的各项功能性及非功能性需求进行规格说明。需求工程的目标简单明了：确定客户需求，定义设想中系统的所有外部特征。  
需求工程的活动主要被划分为以下几个阶段。  

> (1)需求获取：通过与用户的交流，对现有系统的观察及对任务进行分析，从而开发、捕获和修订用户的需求。  
> (2)需求分析：为系统建立一个概念模型，作为对需求的抽象描述，并尽可能多的捕获现实世界的语义。  
> (3)形成需求规格（或称之为需求文档化）：按照相关标准，生成需求模型的文档描述，用户原始需求书作为用户和开发者之间的一个协约，往往被作为合同的附件：软件需求描述规约作为后续软件系统开发的指南。  
> (4)需求确认与验证：以需求规格说明为输入，通过用户确认、复审会议、符号执行、模拟仿真或快速原型等途径与方法，确认和验证需求规格的完整性、正确性、一致性、可测试性和可行性，包含有效性检查、一致性检查、可行性检查和确认可验证性。
> (5)需求管理：包括需求文档的追踪管理、变更控制、版本控制等管理性活动。

软件需求开发的最终文档经过评审批准后，则定义了开发工作的需求基线(Baseline)。这个基线在客户和开发者之间构筑了计划产品功能需求和非功能需求的一个约定(Agreement)。  
需求约定是需求开发和需求管理之间的桥梁。  
需求管理是一个对系统需求变更、了解和控制的过程。需求管理过程与需求开发过程相互关联，当初始需求导出的同时就启动了需求管理规划，一旦形成了需求文档的初稿，需求管理活动就开始了。需求管理的主要活动如图5-5所示。

![image-20230228下午54922541](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230228%E4%B8%8B%E5%8D%8854922541.png)

需求管理强调的内容如下。  

> (1)控制对需求基线的变动。  
> (2)保持项目计划与需求一致。  
> (3)控制单个需求和需求文档的版本情况。  
> (4)管理需求和联系链，或管理单个需求和其他项目可交付产品之间的依赖关系。  
> (5)跟踪基线中的需求状态。  

由于需求分析的方法有很多种，后面将结合具体的开发方法进行相关论述。

#### 5.2.1 需求获取

用户需求陈述可能由用户单方面写出，也可能由业务分析员、系统分析员配合用户共同写出。需求陈述的内容包括问题范围、功能需求、应用环境及假设条件等。此外，也包含涉及相关软件工程标准、技术方案、将来可能做的扩充及可维护性要求等方面的约束条件。总之，需求陈述应该阐明“做什么”，而不是“怎样做”。  
需求获取是开发者、用户之间为了定义新系统而进行的交流，需求获取是获得系统必要的特征，或者是获得用户能接受的、系统必须满足的约束。如果双方所理解的领域内容在系统分析、设计过程出现问题，通常在开发过程的后期才会被发现，将会使整个系统交付延迟，或上线的系统无法或难以使用，最终导致项目失败。例如，遗漏的需求或理解错误的需求。  

1. 需求获取的基本步骤

对于不同规模及不同类型的项目，需求获取的过程不会完全一样。下面给出需求获取过程的参考步骤。

1)开发高层的业务模型  
所谓应用领域，即目标系统的应用环境，如银行、电信公司等。如果系统分析员对该领域有了充分了解，就可以建立一个业务模型，描述用户的业务过程，确定用户的初始需求。然后通过迭代，更深入地了解应用领域，之后再对业模型进行改进。  
2)定义项目范围和高层需求  
在项目开始之前，应当在所有涉众（项目的利益攸关方）之间建立共同的项目愿景，即定义项目范围和高层需求。项目范围描述系统的边界以及系统与系统交互的参与者之间（包括组织、人、硬件设备、其他软件等)的关系。高层需求不涉及过多的细节，主要表示系统需求的概貌。常见的建模手段包括系统上下文图和系统顶层用例图等。  
3)识别用户角色和用户代表  
涉众不仅包括传统的用户、客户等，还包括测试人员、维护人员、市场人员等，他们也对项目有利益诉求。因此，首先确定所有涉众，然后挑选出每一类涉众并与他们一起工作。  
用户角色可以是人，也可以是与系统打交道的其他应用程序或硬件部件。如果是其他应用程序或硬件部件，则需要以熟悉这些系统或硬件的人员作为用户代表。  
4)获取具体的需求  
确定了项目范围和高层需求，并确定了所有涉众后，就需要获取每个涉众的具体、完整和详细的需求。  
5)确定目标系统的业务工作流  
具体到当前待开发的应用系统，确定系统的业务工作流和主要的业务规则。往往需要采取多重方法来获取所需的信息。  
6)需求整理与总结  
最后对上面步骤取得的需求资料进行整理和总结，确定对软件系统的综合要求，即软件的需求。并提出这些需求的实现条件，以及需求应达到的标准。这些需求包括功能需求、性能需求、环境需求、可靠性需求、安全保密需求、用户界面需求、资源使用需求、软件成本消耗与开发进度需求等。  

2. 需求获取方法

针对不同类型的软件项目，需要采用不同的需求获取方法。常见的需求获取方法如下。  
1)用户面谈  
这是一种最为常见的需求获取方法，是理解用户需求的最有效方法。面谈过程需要认真的计划和准备：面谈之后，需要复查笔记的准确性、完整性和可理解性：把所收集的信息转化为适当的模型和文档：确定需要进一步澄清的问题。  
2)需求专题讨论会  
需求专题讨论会也是需求获取的一种有力技术。在短暂而紧凑的时间段内将相关涉众集中在一起集体讨论，与会者可以在应用需求上达成共识，对操作过程尽快取得统一的意见。参加会议的人员包括主持人、用户、技术人员、项目组人员。  
专题讨论会具有以下优点。  

> (1)协助建立一支高效的团队，围绕项目成功的目标。
> (2)所有的风险承担人都畅所欲言。
> (3)促进风险承担人和开发团队之间达成共识。
> (4)揭露和解决那些妨碍项目成功的行政问题。
> (5)能够很快地产生初步的系统定义。
> (6)可以有效地解决不同涉众之间的需求冲突。

3)问卷调查  
问卷调查可用于确认假设和收集统计倾向数据。存在的问题是：相关问题不能事先决定，问题背后的假设对答案造成偏颇，难以探索一些新领域，难以继续用户的模糊响应。在完成最初的面谈和分析后，问卷调查可作为一项协作技术收到良好效果。  
4)现场观察  
该方法主要是通过观察用户实际执行业务的过程，来直观地了解业务的执行过程，全面了解需求细节。执行业务可能是手工操作，也可能是在原有的业务系统上执行。  
5)原型化方法  
在需求的早期，用户往往在具体的需求定义上存在很多不确定性，尤其是信息系统的人机交互界面和查询报表类的需求上。此时往往可以通过在需求阶段采用原型化方法，通过开发系统原型以及与用户的多次迭代反馈，解决在早期阶段需求不确定的问题，尤其是在人机界面等高度不确定的需求。  
6)头脑风暴法  
在一些新业务拓展的软件项目中，由于业务是新出现的，而且业务流程存在高度的不确定性，例如互联网上的新业务系统、App等，一群人围绕该业务，发散思维，不断产生新的观点，参会者敞开思想使各种设想在相互碰撞中激起大脑的创造性风暴，从而确定具体的需求。

### 5.2.2 需求变更

在当前的软件开发过程中，需求变更已经成为一种常态。需求变更的原因有很多种，可能是需求获取不完整，存在遗漏的需求：可能是对需求的理解产生了误差：也可能是业务变化导致了需求的变化等。一些需求的改进是合理的而且不可避免，要使得软件需求完全不变更，基本上是不可能的。但毫无控制的变更会导致项目陷入混乱，不能按进度完成或者软件质量无法保证。  
事实上，迟到的需求变更会对已进行的工作产生非常大的影响。如果不控制变更的影响范围，在项目开发过程中持续不断地采纳新功能，不断地调整资源、进度或者质量标准是极为有害的。如果每一个建议的需求变更都采用，该项目将有可能永远不能完成。  
软件需求文档应该精确描述要交付的产品，这是一个基本的原则。为了使开发组织能够严格控制软件项目，应该确保以下事项：

* 仔细评估已建议的变更。
* 挑选合适的人选对变更做出判定。
* 变更应及时通知所有相关人员。
* 项目要按一定的程序来采纳需求变更，对变更的过程和状态进行控制。

1. 变更控制过程

变更控制过程用来跟踪已建议变更的状态，使已建议的变更确保不会丢失或疏忽。一旦确定了需求基线，应该使所有已建议的变更都遵循变更控制过程。需求变更管理过程如图5-6所示。

![image-20230228下午65641869](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230228%E4%B8%8B%E5%8D%8865641869.png)

(1)问题分析和变更描述。当提出一份变更提议后，需要对该提议做进一步的问题分析，检查它的有效性，从而产生一个更明确的需求变更提议。  
(2)变更分析和成本计算。当接受该变更提议后，需要对需求变更提议进行影响分析和评估。变更成本计算应该包括对该变更所引起的所有改动的成本，例如修改需求文档、相应的设计、实现等工作成本。一旦分析完成并且被确认，应该进行是否执行这一变更的决策。  
(3)变更实现。当确定执行该变更后，需要根据该变更的影响范围，按照开发的过程模型执行相应的变更。在计划驱动过程模型中，往往需要回溯到需求分析阶段开始，重新作对应的需求分析、设计和实现等步骤：在敏捷开发模型中，往往会将需求变更纳入到下一次迭代的执行过程中。

变更控制过程并不是给变更设置障碍。相反地，它是一个渠道和过滤器，通过它可以确保采纳最合适的变更，使变更产生的负面影响降到最低。  
控制需求变更与项目其他配置的管理决策也有着密切的联系。项目管理应该达成一个策略，用来描述如何处理需求变更，而且策略应具有现实可行性。  
常见的需求变更策略：  

> (1)所有需求变更必须遵循变更控制过程。  
> (2)对于未获得批准的变更，不应该做设计和实现工作。  
> (3)变更应该由项目变更控制委员会决定实现哪些变更。  
> (4)项目风险承担者应该能够了解变更的内容。  
> (5)绝不能从项目配置库中删除或者修改变更请求的原始文档。  
> (6)每一个集成的需求变更必须能跟踪到一个经核准的变更请求，以保持水平可追踪性。

目前存在很多需求变更跟踪工具，这些工具用来收集、存储和管理需求变更。问题跟踪工具也可以随时按变更状态分类报告变更请求的数目。

2. 变更控制委员会

变更控制委员会(Change Control Board,CCB)是项目所有者权益代表，负责裁定接受哪些变更。CCB由项目所涉及的多方成员共同组成，通常包括用户和实施方的决策人员。CCB是决策机构，不是作业机构，通常CCB的工作是通过评审手段来决定项目是否能变更，但不提出变更方案。  
变更控制委员会可能包括如下方面的代表。  

> (1)产品或计划管理部门。  
> (2)项目管理部门。  
> (3)开发部门。  
> (4)测试或质量保证部门。  
> (5)市场部或客户代表。  
> (6)制作用户文档的部门。  
> (7)技术支持部门。  
> (8)帮助桌面或用户支持热线部门。  
> (9)配置管理部门。

变更控制委员会应该有一个总则，用于描述变更控制委员会的目的、授权范围、成员构成、做出决策的过程及操作步骤。总则也应该说明举行会议的频度和事由。管理范围描述该委员会能做什么样的决策，以及有哪一类决策应上报到高一级的委员会。过程及操作步骤如下。  
1)制定决策  
制定决策过程的描述应确认：  

* 变更控制委员会必须到会的人数或做出有效决定必须出席的人数。
* 决策的方法（例如投票，一致通过或其他机制）。
* 变更控制委员会主席是否可以否决该集体的决定。

变更控制委员会应该对每个变更权衡利弊后做出决定。“利”包括节省的资金或额外的收入、增强的客户满意度、竞争优势、减少上市时间：“弊”是指接受变更后产生的负面影响，包括增加的开发费用、推迟的交付日期、产品质量的下降、减少的功能、用户不满意度。  
2)交流情况  
一旦变更控制委员会做出决策，指派的人员应及时更新请求的状态。  
3)重新协商约定  
变更总是有代价的，即使拒绝的变更也因为决策行为（提交、评估、决策）而耗费了资源。当项目接受了重要的需求变更时，为了适应变更情况要与管理部门和客户重新协商约定。协商的内容可能包括推迟交货时间、要求增加人手、推迟实现尚未实现的较低优先级的需求，或者质量上进行折中。

#### 5.2.3 需求追踪
需求跟踪包括编制每个需求同系统元素之间的联系文档，这些元素包括其他需求、体系结构、其他设计部件、源代码模块、测试、帮助文件和文档等，是要在整个项目的工件之间形成水平可追踪性。跟踪能力信息使变更影响分析十分便利，有利于确认和评估实现某个建议的需求变更所必须的工作。  
需求跟踪提供了由需求到产品实现整个过程范围的明确查阅的能力。需求跟踪的目的是建立与维护“需求-设计-编程-测试”之间的一致性，确保所有的工作成果符合用户需求。  
需求跟踪有两种方式：  

> (1)正向跟踪。检查《产品需求规格说明书》中的每个需求是否都能在后继工作成果中找到对应点。  
> (2)逆向跟踪。检查设计文档、代码、测试用例等工作成果是否都能在《产品需求规格说明书》中找到出处。  

正向跟踪和逆向跟踪合称为“双向跟踪”。不论采用何种跟踪方式，都要建立与维护需求跟踪矩阵（即表格）。需求跟踪矩阵保存了需求与后继工作成果的对应关系。  
跟踪能力是优秀需求规格说明书的一个特征，为了实现可跟踪能力，必须统一地标识出每一个需求，以便能明确地进行查阅。  
需求跟踪是个要求手工操作且劳动强度很大的任务，要求组织提供支持。随着系统开发的进行和维护的执行，要保持关联信息与实际一致。跟踪能力信息一旦过时，可能再也不会重建它。在实际项目中，往往采用专门的配置管理工具来实现需求跟踪。

### 5.3 系统分析与设计

系统分析阶段是应用系统思想和方法，把复杂的对象分解为简单的组成部分，找出这些部分的基本属性和彼此之间的关系的过程，其基本任务是系统分析师和用户在充分了解用户需求的基础上，把双方对新系统的理解表达为系统需求规格说明书。  
系统设计的目标是根据系统分析的结果，完成系统的构建过程。其主要目的是绘制系统的蓝图，权衡和比较各种技术和实施方法的利弊，合理分配各种资源，构建新系统的详细设计方案和相关模型，指导系统实施工作的顺利开展。系统设计的主要内容包括概要设计和详细设计。

#### 5.3.1 结构化方法

1978年，E.Yourdon和L.L.Constantine提出了结构化方法，即SASD(Structured Analysis and Structured Design)方法，也可称为面向功能的软件开发方法或面向数据流的软件开发方法。Yourdon方法是20世纪80年代使用最广泛的软件开发方法。  
结构化开发方法提出了一组提高软件结构合理性的准则，如分解与抽象、模块独立性、信息隐蔽等。针对软件生存周期各个不同的阶段，它有结构化分析(SA)、结构化设计(SD)和结构化编程(SP)等方法。

1. 结构化分析

结构化分析方法给出一组帮助系统分析人员产生功能规约的原理与技术。它一般利用图形表达用户需求，使用的手段主要有数据流图、数据字典、结构化语言、判定表以及判定树等。  
结构化分析的步骤如下：  

> (1)分析业务情况，做出反映当前物理模型的数据流图(Data Flow Diagram,DFD):  
> (2)推导出等价的逻辑模型的DFD:  
> (3)设计新的逻辑系统，生成数据字典和基元描述：  
> (4)建立人机接口，提出可供选择的目标系统物理模型的DFD:  
> (5)确定各种方案的成本和风险等级，据此对各种方案进行分析：  
> (6)选择一种方案：  
> (7)建立完整的需求规约。 

结构化分析的常用手段是数据流图(DFD)和数据字典。  
1)数据流图  
DFD需求建模方法，也称为过程建模和功能建模方法。DFD建模方法的核心是数据流，从应用系统的数据流着手以图形方式刻画和表示一个具体业务系统中的数据处理过程和数据流。  
DFD建模方法首先抽象出具体应用的主要业务流程，然后分析其输入，如其初始的数据有哪些，这些数据从哪里来，将流向何处，又经过了什么加工，加工后又变成了什么数据，这些数据流最终将得到什么结果。通过对系统业务流程的层层追踪和分析把要解决的问题清晰地展现及描述出来，为后续的设计、编码及实现系统的各项功能打下基础。  
DFD方法由4种基本元素（模型对象）组成：数据流、处理/加工、数据存储和外部项。  
(1)数据流(Data Flow)。数据流用一个箭头描述数据的流向，箭头上标注的内容可以是信息说明或数据项。  
(2)处理(Process)。表示对数据进行的加工和转换，在图中用矩形框表示。指向处理的数据流为该处理的输入数据，离开处理的数据流为该处理的输出数据。  
(3)数据存储。表示用数据库形式（或者文件形式）存储的数据，对其进行的存取分别以指向或离开数据存储的箭头表示。  
(4)外部项。也称为数据源或者数据终点。描述系统数据的提供者或者数据的使用者，如教师、学生、采购员、某个组织或部门或其他系统，在图中用圆角框或者平行四边形框表示。  
建立DFD图的目的是描述系统的功能需求。DFD方法利用应用问题域中数据及信息的提供者与使用者、信息的流向、处理、存储4种元素描述系统需求，建立应用系统的功能模型。  
具体的建模过程及步骤如下。  
(1)明确目标，确定系统范围。  
首先要明确目标系统的功能需求，并将用户对目标系统的功能需求完整、准确、一致地描述出来，然后确定模型要描述的问题域。虽然在建模过程中这些内容是逐步细化的，但必须自始自终保持一致、清晰和准确。
(2)建立顶层DFD图。  
顶层DFD图表达和描述了将要实现的系统的主要功能，同时也确定了整个模型的内外关系，表达了系统的边界及范围，也构成了进一步分解的基础。  
(3)构建第一层DFD分解图。  
根据应用系统的逻辑功能，把顶层DFD图中的处理分解成多个更细化的处理。  
(4)开发DFD层次结构图。  
对第一层DFD分解图中的每个处理框作进一步分解，在分解图中要列出所有的处理及其相关信息，并要注意分解图中的处理与信息包括父图中的全部内容。分解可采用以下原则：保持均匀的模型深度：按困难程度进行选择：如果一个处理难以确切命名，可以考虑对它重新分解。  
(5)检查确认DFD图。  
按照规则检查和确定DFD图，以确保构建的DFD模型是正确的、一致的，且满足要求。具体规则包括：父图中描述过的数据流必须要在相应的子图中出现：一个处理至少有一个输入流和一个输出流：一个存储必定有流入的数据流和流出的数据流：一个数据流至少有一端是处理端：模型图中表达和描述的信息是全面的、完整的、正确的和一致的。经过以上过程与步骤后，顶层图被逐层细化，同时也把面向问题的术语逐渐转化为面向现实的解法，并得到最终的DFD层次结构图。层次结构图中的上一层是下一层的抽象，下一层是上一层的求精和细化，而最后一层中的每个处理都是面向一个具体的描述，即一个处理模块仅描述和解决一个问题。  
2)数据字典. 
数据字典(Data Dictionary)是一种用户可以访问的记录数据库和应用程序元数据的目录。数据字典是指对数据的数据项、数据结构、数据流、数据存储、处理逻辑等进行定义和描述，其目的是对数据流程图中的各个元素做出详细的说明。简而言之，数据字典是描述数据的信息集合，是对系统中使用的所有数据元素定义的集合。  
数据字典最重要的作用是作为分析阶段的工具。任何字典最重要的用途都是供人查询，在结构化分析中，数据字典的作用是给数据流图上每个元素加以定义和说明。换句话说，数据流图上所有元素的定义和解释的文字集合就是数据字典。数据字典中建立的严密一致的定义，有助于改进分析员和用户的通信与交互。数据字典各部分的描述如下。  
(1)数据项：数据流图中数据块的数据结构中的数据项说明。数据项是不可再分的数据单位。对数据项的描述通常包括以下内容：  
数据项描述={数据项名，数据项含义说明，别名，数据类型，长度，取值范围，取值含义，与其他数据项的逻辑关系}, 其中“取值范围”“与其他数据项的逻辑关系”定义了数据的完整性约束条件，是设计数据检验功能的依据。若干个数据项可以组成一个数据结构。   
(2)数据结构：数据流图中数据块的数据结构说明。数据结构反映了数据之间的组合关系。一个数据结构可以由若干个数据项组成，也可以由若干个数据结构组成，或由若干个数据项和数据结构混合组成。对数据结构的描述通常包括以下内容：  
数据结构描述={数据结构名，含义说明，组成：{数据项或数据结构}  
(3)数据流：数据流图中流线的说明。数据流是数据结构在系统内传输的路径。对数据流的描述通常包括以下内容：  
数据流描述={数据流名，说明，数据流来源，数据流去向，组成：{数据结构}，平均流量，高峰期流量}  
其中“数据流来源”是说明该数据流来自哪个过程，即数据的来源。“数据流去向”是说明该数据流将到哪个过程去，即数据的去向。“平均流量”是指在单位时间（每天、每周、每月等)里的传输次数。“高峰期流量”则是指在高峰时期的数据流量。  
(4)数据存储：数据流图中数据块的存储特性说明。数据存储是数据结构停留或保存的地方，也是数据流的来源和去向之一。对数据存储的描述通常包括以下内容：  
数据存储描述={数据存储名，说明，编号，流入的数据流，流出的数据流，组成：{数据结构}，数据量，存取方式}  
其中“数据量”是指每次存取多少数据，每天（或每小时、每周等）存取几次等信息。“存取方式”包括是批处理，还是联机处理：是检索还是更新：是顺序检索还是随机检索等。另外“流入的数据流”要指出其来源，“流出的数据流”要指出其去向。  
(5)处理过程：数据流图中功能块的说明。数据字典中只需要描述处理过程的说明性信息，通常包括以下内容：  
处理过程描述={处理过程名，说明，输入：{数据流}，输出：{数据流}，处理：{简要说明}  
其中“简要说明”中主要说明该处理过程的功能及处理要求。功能是指该处理过程用来做什么（并不是怎么样做）：处理要求包括处理频度要求，如单位时间里处理多少事务，多少数据量，响应时间要求等，这些处理要求是后面物理设计的输入及性能评价的标准。  

2. 结构化设计

结构化设计(Structured Design,SD)是一种面向数据流的设计方法，它以SRS和SA阶段所产生的数据流图和数据字典等文档为基础，是一个自顶向下、逐步求精和模块化的过程。

SD方法的基本思想是将软件设计成由相对独立且具有单一功能的模块组成的结构，分为概要设计和详细设计两个阶段，其中概要设计的主要任务是确定软件系统的结构，对系统进行模块划分，确定每个模块的功能、接口和模块之间的调用关系：详细设计的主要任务是为每个模块设计实现的细节。  
1)模块结构  
系统是一个整体，它具有整体性的目标和功能，但这些目标和功能的实现又是由相互联系的各个组成部分共同工作的结果。人们在解决复杂问题时使用的一个很重要的原则，就是将它分解成多个小问题分别处理，在处理过程中，需要根据系统总体要求，协调各业务部门的关系。  
在SD中，这种功能分解就是将系统划分为模块，模块是组成系统的基本单位，它的特点是可以自由组合、分解和变换，系统中任何一个处理功能都可以看成一个模块。

(1)信息隐藏与抽象。  
信息隐藏原则要求采用封装技术，将程序模块的实现细节（过程或数据）隐藏起来，对于不需要这些信息的其他模块来说是不能访问的，使模块接口尽量简单。按照信息隐藏的原则，系统中的模块应设计成“黑盒”，模块外部只能使用模块接口说明中给出的信息，例如，操作和数据类型等。模块之间相对独立，既易于实现，也易于理解和维护。  
抽象原则要求抽取事物最基本的特性和行为，忽略非本质的细节，采用分层次抽象的方式可以控制软件开发过程的复杂性，有利于软件的可理解性和开发过程的管理。通常，抽象层次包括过程抽象、数据抽象和控制抽象。  
(2)模块化。  
在SD方法中，模块是实现功能的基本单位，它一般具有功能、逻辑和状态3个基本属性，其中功能是指该模块“做什么”，逻辑是描述模块内部“怎么做”，状态是该模块使用时的环境和条件。在描述一个模块时，必须按模块的外部特性与内部特性分别描述。模块的外部特性是指模块的模块名、参数表和给程序乃至整个系统造成的影响，而模块的内部特性则是指完成其功能的程序代码和仅供该模块内部使用的数据。对于模块的外部环境（例如，需要调用这个模块的上级模块)来说，只需要了解这个模块的外部特性就足够了，不必了解它的内部特性。而软件设计阶段，通常是先确定模块的外部特性，然后再确定它的内部特性。  
(3)耦合。  
耦合表示模块之间联系的程度。紧密耦合表示模块之间联系非常强，松散耦合表示模块之间联系比较弱，非直接耦合则表示模块之间无任何直接联系。模块的耦合类型通常分为7种，根据耦合度从低到高排序如表5-1所示。

![image-20230301下午62206497](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230301%E4%B8%8B%E5%8D%8862206497.png)

对于模块之间耦合的强度，主要依赖于一个模块对另一个模块的调用、一个模块向另一个模块传递的数据量、一个模块施加到另一个模块的控制的多少，以及模块之间接口的复杂程度。  
(4)内聚。  
内聚表示模块内部各代码成分之间联系的紧密程度，是从功能角度来度量模块内的联系，一个好的内聚模块应当恰好做目标单一的一件事情。模块的内聚类型通常也可以分为7种，根据内聚度从高到低的排序如表5-2所示。

![image-20230301下午62504013](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230301%E4%B8%8B%E5%8D%8862504013.png)

一般说来，系统中各模块的内聚越高，则模块间的耦合就越低，但这种关系并不是绝对的。耦合低使得模块间尽可能相对独立，各模块可以单独开发和维护；内聚高使得模块的可理解性和维护性大大增强。因此，在模块的分解中应尽量减少模块的耦合，力求增加模块的内聚，遵循“高内聚、低耦合”的设计原则。  
2)系统结构图  
系统结构图(Structure Chart,SC)又称为模块结构图，它是软件概要设计阶段的工具，反映系统的功能实现和模块之间的联系与通信，包括各模块之间的层次结构，即反映了系统的总体结构。在系统分析阶段，系统分析师可以采用SA方法获取由DFD、数据字典和加工说明等组成的系统的逻辑模型：在系统设计阶段，系统设计师可根据一些规则，从**DFD(数据流图)中导出系统初始的SC(模块结构图)**。  
详细设计的主要任务是设计每个模块的实现算法、所需的局部数据结构。详细设计的目标有两个：实现模块功能的算法要逻辑上正确和算法描述要简明易懂。详细设计必须遵循概要设计来进行。详细设计方案的更改，不得影响到概要设计方案：如果需要更改概要设计，必须经过项目经理的同意。详细设计，应该完成详细设计文档，主要是模块的详细设计方案说明。  
设计的基本步骤如下。  

> (1)分析并确定输入/输出数据的逻辑结构。  
> (2)找出输入数据结构和输出数据结构中有对应关系的数据单元。  
> (3)按一定的规则由输入、输出的数据结构导出程序结构。  
> (4)列出基本操作与条件，并把它们分配到程序结构图的适当位置。  
> (5)用伪码写出程序。  

详细设计的表示工具有图形工具、表格工具和语言工具。  
(1)图形工具。  
利用图形工具可以把过程的细节用图形描述出来。具体的图形有**业务流图、程序流程图、PAD(Problem Analysis Diagram)图、NS流程图（由Nassi和Shneiderman开发，简称NS)**等。  
程序流程图又称为程序框图，是使用最广泛然的一种描述程序逻辑结构的工具。它用方框表示一个处理步骤，菱形表示一个逻辑条件，箭头表示控制流向。其优点是：结构清晰，易于理解，易于修改。缺点是：只能描述执行过程而不能描述有关的数据。  
NS流程图，也称为盒图，是一种强制使用结构化构造的图示工具，也称为方框图。其具有以下特点：功能域明确、不可能任意转移控制、很容易确定局部和全局数据的作用域、很容易表示嵌套关系及模板的层次关系。  
PAD图是一种改进的图形描述方式，可以用来取代程序流程图，相比程序流程图更直观，结构更清晰。最大的优点是能够反映和描述自顶向下的历史和过程。PAD提供了5种基本控制结构的图示，并允许递归使用。PAD的特点如下：  

* 使用PAD符号设计出的程序代码是结构化程序代码：
* PAD所描绘的程序结构十分清晰：
* 用PAD图表现程序的逻辑易读、易懂和易记：
* 容易将PAD图转换成高级语言源程序自动完成：
* 既可以表示逻辑，也可用来描绘数据结构：
* 支持自顶向下方法的使用。

(2)表格工具。  
可以用一张表来描述过程的细节，在这张表中列出了各种可能的操作和相应的条件。  
(3)语言工具。  
用某种高级语言来描述过程的细节，例如伪码和PDL(Program Design Language)等。PDL也可称为伪码或结构化语言，它用于描述模块内部的具体算法，以便开发人员之间比较精确地进行交流。语法是开放式的，其外层语法是确定的，而内层语法则不确定。外层语法描述控制结构，它用类似于一般编程语言控制结构的关键字表示，所以是确定的。内层语法描述具体操作，考虑到不同软件系统的实际操作种类繁多，内层语法因而不确定，它可以按系统
的具体情况和不同的设计层次灵活选用。  

* PDL的优点：可以作为注释直接插在源程序中：可以使用普通的文本编辑工具或文字处理工具产生和管理：已经有自动处理程序存在，而且可以自动由PDL生成程序代码。
* PDL的不足：不如图形工具形象直观，描述复杂的条件组合与动作间对应关系时，不如判定树清晰简单。

3. 结构化编程

结构化程序设计(Structured Programing,SP)思想是最早由E.W.Dijikstra在1965年提出的。“面向结构”的程序设计方法即结构化程序设计方法，是“面向过程”方法的改进，结构上将软件系统划分为若干功能模块，各模块按要求单独编程，再组合构成相应的软件系统。该方法强调程序的结构性，所以容易做到易读易懂。该方法思路清晰，做法规范，程序的出错率和维护费用大大减少。  
结构化程序设计采用自顶向下、逐步求精的设计方法，各个模块通过“顺序、选择、循环”的控制结构进行连接，并且只有一个入口和一个出口。  
结构化程序设计的原则可表示为：程序 =（算法）+（数据结构）。  
算法是一个独立的整体，数据结构（包含数据类型与数据）也是一个独立的整体。两者分开设计，以算法（函数或过程）为主。  
结构化程序设计提出的原则可以归纳为32个字：**自顶向下，逐步细化：清晰第一，效率第二；书写规范，缩进格式；基本结构，组合而成。**

4. 数据库设计

数据库设计是指根据用户的需求，在某一具体的数据库管理系统上，设计数据库的结构和建立数据库的过程。数据库设计的内容包括：需求分析、概念结构设计、逻辑结构设计、物理结构设计、数据库的实施和数据库的运行和维护。本小节主要讨论数据库的概念结构设计，其他内容详见数据库章节。  
1)概念结构设计  
概念结构设计是对用户要求描述的现实世界（可能是一个工厂、商场、学校或企业等），通过对其中实体事物的分类、聚集和概括，建立抽象的概念数据模型。这个概念模型应反映现实世界各部门的信息结构、信息流动情况、信息间的互相制约关系以及各部门对信息储存、查询和加工的要求等。通常采用实体-联系图(Entity Relationship Diagram,E-R图)来表示。  
E-R图提供了表示实体类型、属性和联系的方法，用来描述现实世界的概念模型。它是描述现实世界关系概念模型的有效方法，是表示概念关系模型的一种方式。  
在ER图中有如下成分：矩形框表示实体：菱形框表示联系：椭圆形框表示实体或联系的属性，对于主属性名，则在其名称下画一条下画线。  
(1)实体。一般认为，客观上可以相互区分的事物就是实体，实体可以是具体的人和物，也可以是抽象的概念与联系。关键在于一个实体能与另一个实体相区别，具有相同属性的实体具有相同的特征和性质。用实体名及其属性名集合来抽象和刻画同类实体。在E-R图中用矩形表示，矩形框内写明实体名：比如学生张三、学生李四都是实体对象。  
(2)属性。实体所具有的某一特性，一个实体可由若干个属性来刻画。属性不能脱离实体，属性是相对实体而言的。在E-R图中用椭圆形表示，并用无向边将其与相应的实体连接起来：  
比如学生的姓名、学号、性别都是属性。如果是多值属性的话，在椭圆形外面再套实线椭圆。如果是派生属性则用虚线椭圆表示。  
(3)联系。联系也称关系，信息世界中反映实体内部或实体之间的关联。实体内部的联系通常是指组成实体的各属性之间的联系；实体之间的联系通常是指不同实体集之间的联系。在E-R图中用菱形表示，菱形框内写明联系名，并用无向边分别与有关实体连接起来，同时在无向边旁标上联系的类型(1：1,1：n或m:n)。比如老师给学生授课存在授课关系，学生选课存在选课关系。如果是弱实体的联系则在菱形外面再套菱形。ER图中的联系存在3种一般性约束：一对一约束（联系）、一对多约束（联系）和多对多约束（联系），它们用来描述实体集之间的数量约束。
(1)一对一联系(1：1)。  
对于两个实体集A和B,若A中的每一个值在B中至多有一个实体值与之对应，反之亦然，则称实体集A和B具有一对一的联系。一个学校只有一个正校长，而一个校长只在一个学校中任职，则学校与校长之间具有一对一联系。  
(2)一对多联系(1：N)。
对于两个实体集A和B,若A中的每一个值在B中有多个实体值与之对应，反之B中每一个实体值在A中至多有一个实体值与之对应，则称实体集A和B具有一对多的联系。  
例如，某校教师与课程之间存在一对多的联系“教”，即每位教师可以教多门课程，但是，每门课程只能由一位教师来教，教师与课程之间具有一对多联系。一个专业中有若干名学生，而每个学生只在一个专业中学习，专业与学生之间具有一对多联系。  
(3)多对多联系(M:N)。  
对于两个实体集A和B,若A中每一个实体值在B中有多个实体值与之对应，反之亦然，则称实体集A与实体集B具有多对多联系。实际上，一对一联系是一对多联系的特例，而一对多联系又是多对多联系的特例。  
例如，表示学生与课程间的联系“选修”是多对多的，即一个学生可以学多门课程，而每门课程可以有多个学生来学。联系也可能有属性。例如，学生“选修”某门课程所取得的成绩，既不是学生的属性也不是课程的属性。由于“成绩”既依赖于特定学生又依赖于某门特定的课程，所以它是学生与课程之间的联系“选修”的属性E-R图的基本作图步骤如下。  

> (1)确定所有的实体集合。  
> (2)选择每个实体集应该包含的属性。  
> (3)确定实体集之间的联系。  
> (4)确定实体集的关键字，用下画线在属性上表明关键字的属性组合。  
> (5)确定联系的类型，在用线将表示联系的菱形框联系到实体集时，在线旁注明是1或来表示联系的类型。

### 5.3.2 面向对象方法

面向对象(Object--Oriented,OO)开发方法将面向对象的思想应用于软件开发过程中，指导开发活动，是建立在“对象”概念基础上的方法学。面向对象方法的本质是主张参照人们认识一个现实系统的方法，完成分析、设计与实现一个软件系统，提倡用人类在现实生活中常用的思维方法来认识和理解描述客观事物，强调最终建立的系统能映射问题域，使得系统中的对象，以及对象之间的关系能够如实地反映问题域中固有的事物及其关系。  
面向对象开发方法认为客观世界是由对象组成的，对象由属性和操作组成，对象可按其属性进行分类，对象之间的联系通过传递消息来实现，对象具有封装性、继承性和多态性。面向对象开发方法是以用例驱动的、以体系结构为中心的、迭代的和渐增式的开发过程，主要包括需求分析、系统分析、系统设计和系统实现4个阶段，但是，各个阶段的划分不像结构化开发方法那样清晰，而是在各个阶段之间迭代进行的。  

1. 面向对象分析

面向对象的分析方法(Object-Oriented Analysis,OOA),是在一个系统的开发过程中进行了系统业务调查以后，按照面向对象的思想来分析问题。OOA与结构化分析有较大的区别。  
OOA所强调的是在系统调查资料的基础上，针对OO方法所需要的素材进行的归类分析和整理，而不是对管理业务现状和方法的分析。  
OOA模型由5个层次**（主题层、对象类层、结构层、属性层和服务层）**和5个活动**（标识对象类、标识结构、定义主题、定义属性和定义服务)**组成。在这种方法中定义了两种对象类之间的结构，一种称为分类结构：另一种称为组装结构。分类结构就是所谓的一般与特殊的关系。组装结构则反映了对象之间的整体与部分的关系。  
1)OOA原则  
OOA的基本原则包括如下内容。  
**(1)抽象。**抽象是从许多事物中舍弃个别的、非本质的特征，抽取共同的、本质性的特征。  
抽象是形成概念的必须手段。抽象是面向对象方法中使用最为广泛的原则。抽象原则包括过程抽象和数据抽象两个方面。过程抽象是指，任何一个完成确定功能的操作序列，其使用者都可以把它看作一个单一的实体，尽管实际上它可能是由一系列更低级的操作完成的。数据抽象是根据施加于数据之上的操作来定义数据类型，并限定数据的值只能由这些操作来修改和观察。  
数据抽象是OOA的核心原则。它强调把数据（属性）和操作（服务）结合为一个不可分的系统单位（即对象），对象的外部只需要知道它做什么，而不必知道它如何做。  
**(2)封装。**封装就是把对象的属性和服务结合为一个不可分的系统单位，并尽可能隐蔽对象的内部细节。这个概念也经常用于从外部隐藏程序单元的内部表示或状态。  
**(3)继承。**特殊类的对象拥有其对应的一般类的全部属性与服务，称作特殊类对一般类的继承。在OOA中运用继承原则，在特殊类中不再重复地定义一般类中已定义的东西，但是，在语义上，特殊类却自动地、隐含地拥有一般类（以及所有更上层的一般类）中定义的全部属性和服务。继承原则的好处是：使系统模型比较简练也比较清晰。  
**(4)分类。**分类就是把具有相同属性和服务的对象划分为一类，用类作为这些对象的抽象描述。分类原则实际上是抽象原则运用于对象描述时的一种表现形式。  
**(5)聚合。**聚合又称组装，其原则是：把一个复杂的事物看成若干比较简单的事物的组装体，从而简化对复杂事物的描述。  
**(6)关联。**关联是人类思考问题时经常运用的思想方法：通过一个事物联想到另外的事物。能使人发生联想的原因是事物之间确实存在着某些联系。  
**(7)消息通信**。这一原则要求对象之间只能通过消息进行通信，而不允许在对象之外直接地存取对象内部的属性。通过消息进行通信是由于封装原则而引起的。在OOA中要求用消息连接表示出对象之间的动态联系。  
**(8)粒度控制**。一般来讲，人在面对一个复杂的问题域时，不可能在同一时刻既能纵观全局，又能洞察秋毫。因此需要控制自己的视野：考虑全局时，注意其大的组成部分，暂时不考虑具体的细节；考虑某部分的细节时则暂时撇开其余的部分。这就是粒度控制原则。  
**(9)行为分析**。现实世界中事物的行为是复杂的，由大量的事物所构成的问题域中各种行为往往相互依赖、相互交织。  
2)基本步骤  
OOA大致上遵循如下5个基本步骤。  
**(1)确定对象和类**。这里所说的对象是对数据及其处理方式的抽象，它反映了系统保存和处理现实世界中某些事物的信息的能力。类是多个对象的共同属性和方法集合的描述，它包括如何在一个类中建立一个新对象的描述。  
**(2)确定结构**。结构是指问题域的复杂性和连接关系。类成员结构反映了泛化-特化关系，整体-部分结构反映整体和局部之间的关系。  
**(3)确定主题**。主题是指事物的总体概貌和总体分析模型。  
**(4)确定属性**。属性就是数据元素，可用来描述对象或分类结构的实例，可在图中给出，并在对象的存储中指定。  
**(5)确定方法**。方法是在收到消息后必须进行的一些处理方法：方法要在图中定义，并在对象的存储中指定。对于每个对象和结构来说，那些用来增加、修改、删除和选择的方法本身都是隐含的（虽然它们是要在对象的存储中定义的，但并不在图上给出），而有些则是显示的。  

2. 面向对象设计

面向对象设计方法(Object-Oriented Design,OOD)是OOA方法的延续，其基本思想包括抽象、封装和可扩展性，其中可扩展性主要通过继承和多态来实现。在OOD中，数据结构和在数据结构上定义的操作算法封装在一个对象之中。由于现实世界中的事物都可以抽象出对象的集合，所以OOD方法是一种更接近现实世界、更自然的系统设计方法。  
类封装了信息和行为，是面向对象的重要组成部分，它是具有相同属性、方法和关系的对象集合的总称。在系统中，每个类都具有一定的职责，职责是指类所担任的任务。一个类可以有多种职责，设计得好的类一般至少有一种职责。在定义类时，将类的职责分解为类的属性和方法，其中属性用于封装数据，方法用于封装行为。设计类是OOD中最重要的组成部分，也是最复杂和最耗时的部分。  
在OOD中，类可以分为3种类型："实体类、控制类和边界类。  
1)实体类  
实体类映射需求中的每个实体，是指实体类保存需要存储在永久存储体中的信息，例如在线教育平台系统可以提取出学员类和课程类，它们都属于实体类。实体类通常都是永久性的，它们所具有的属性和关系是长期需要的，有时甚至在系统的整个生存期都需要。  
实体类对用户来说是最有意义的类，通常采用业务领域术语命名，一般来说是一个名词，在用例模型向领域模型的转化中，一个参与者一般对应于实体类。通常可以从SRS中的那些与数据库表（需要持久存储）对应的名词着手来找寻实体类。通常情况下，实体类一定有属性，但不一定有操作。  
2)控制类  
控制类是用于控制用例工作的类，一般是由动宾结构的短语(“动词+名词”或“名词+动词”)转化来的名词，例如，用例“身份验证”可以对应于一个控制类“身份验证器”，它提供了与身份验证相关的所有操作。控制类用于对一个或几个用例所特有的控制行为进行建模，控制对象（控制类的实例）通常控制其他对象，因此，它们的行为具有协调性。  
控制类将用例的特有行为进行封装，控制对象的行为与特定用例的实现密切相关，当系统执行用例的时候，就产生了一个控制对象，控制对象经常在其对应的用例执行完毕后消亡。通常情况下，控制类没有属性，但一定有方法。  
3)边界类  
边界类用于封装在用例内、外流动的信息或数据流。边界类位于系统与外界的交接处，包括所有窗体、报表、打印机和扫描仪等硬件的接口，以及与其他系统的接口。要寻找和定义边界类，可以检查用例模型，每个参与者和用例交互至少要有一个边界类，边界类使参与者能与系统交互。边界类是一种用于对系统外部环境与其内部运作之间的交互进行建模的类。常见的边界类有窗口、通信协议、打印机接口、传感器和终端等。实际上，在系统设计时，产生的报表都可以作为边界类来处理。  
边界类用于系统接口与系统外部进行交互，边界对象将系统与其外部环境的变更（例如，与其他系统的接口的变更、用户需求的变更等)分隔开，使这些变更不会对系统的其他部分造成影响。通常情况下，边界类可以既有属性也有方法。  

3. 面向对象编程

面向对象程序设计(Object Oriented Programming,OOP)是一种计算机编程架构。OOP的一条基本原则是计算机程序由单个能够起到子程序作用的单元或对象组合而成。OOP达到了软件工程的3个主要目标：重用性、灵活性和扩展性。OOP=对象+类+继承+多态+消息，其中核心概念是类和对象。  
面向对象程序设计方法是尽可能模拟人类的思维方式，使得软件的开发方法与过程尽可能接近人类认识世界、解决现实问题的方法和过程，也即使得描述问题的问题空间与问题的解决方案空间在结构上尽可能一致，把客观世界中的实体抽象为问题域中的对象。  
面向对象程序设计以对象为核心，该方法认为程序由一系列对象组成。类是对现实世界的抽象，包括表示静态属性的数据和对数据的操作，对象是类的实例化。对象间通过消息传递相互通信，来模拟现实世界中不同实体间的联系。在面向对象的程序设计中，对象是组成程序的基本模块。  
OOP的基本特点有封装、继承和多态。  
1)封装  
封装是指将一个计算机系统中的数据以及与这个数据相关的一切操作语言（即描述每一个对象的属性以及其行为的程序代码)组装到一起，一并封装在一个有机的实体中，把它们封装在一个“模块”中，也就是一个类中，为软件结构的相关部件所具有的模块性提供良好的基础。  
在面向对象技术的相关原理以及程序语言中，封装的最基本单位是对象，而使得软件结构的相关部件的实现“高内聚、低耦合”的“最佳状态”便是面向对象技术的封装性所需要实现的最基本的目标。对于用户来说，对象是如何对各种行为进行操作、运行、实现等细节是不需要刨根问底了解清楚的，用户只需要通过封装外的通道对计算机进行相关方面的操作即可。  
2)继承  
继承是面向对象技术中的另外一个重要特点，其**主要指的是两种或者两种以上的类之间的联系与区别**。

在面向对象技术中，继承是指一个对象针对于另一个对象的某些独有的特点、能力进行复制或者延续。如果按照继承源进行划分，则可以分为**单继承（一个对象仅仅从另外一个对象中继承其相应的特点)与多继承（一个对象可以同时从另外两个或者两个以上的对象中继承所需要的特点与能力，并且不会发生冲突等现象)**；

如果从继承中包含的内容进行划分，则继承可以分为4类，分别为**取代继承**（一个对象在继承另一个对象的能力与特点之后将父对象进行取代)、**包含继承**（一个对象在将另一个对象的能力与特点进行完全的继承之后，又继承了其他对象所包含的相应内容，结果导致这个对象所具有的能力与特点大于等于父对象，实现了对于父对象的包含)、**受限继承和特化继承**。  
3)多态  
从宏观的角度来讲，多态是指在面向对象技术中，当不同的多个对象同时接收到同一个完全相同的消息之后，所表现出来的动作是各不相同的，具有多种形态：

从微观的角度来讲，多态是指在一组对象的一个类中，面向对象技术可以使用相同的调用方式来对相同的函数名进行调用，即便这若干个具有相同函数名的函数所执行的动作是不同的。  

4. 数据持久化与数据库

在面向对象开发方法中，对象只能存在于内存中，而内存不能永久保存数据，如果要永久保存对象的状态，需要进行对象的持久化(Persistence),对象持久化是把内存中的对象保存到数据库或可永久保存的存储设备中。

在多层软件设计和开发中，为了降低系统的耦合度，一般会引入持久层(Persistence Layer),即专注于实现数据持久化应用领域的某个特定系统的一个逻辑层面，将数据使用者和数据实体相关联，持久层的设计实现了数据处理层内部的业务逻辑和数据逻辑的解耦。  
目前，关系数据库仍I旧是使用最为广泛的数据库，如DB2、Oracle、SQL Server等，因此，将对象持久化到关系数据库中，需要进行对象/关系的映射(Object/Relation Mapping,ORM)。随着对象持久化技术的发展，诞生了越来越多的持久化框架，目前，主流的持久化技术框架包括Hibernate、iBatis和JDO等。  
Hibernate是一个开放源代码的对象关系映射框架，它对JDBC进行了非常轻量级的对象封装，它将POJO与数据库表建立映射关系，是一个全自动的ORM框架，Hibernate可以自动生成SQL语句，自动执行，使得Java程序员可以随心所欲地使用对象编程思维来操纵数据库。  
iBatis提供Java对象到SQL(面向参数和结果集)的映射实现，实际的数据库操作需要通过手动编写SQL实现，与Hibernate相比，iBatis最大的特点就是小巧，上手较快。如果不需要太多复杂的功能，Batis是既可满足要求又足够灵活的最简单的解决方案。  
JDO(Java Data Object,Java数据对象)是SUN公司制定的描述对象持久化语义的标准API,它是Java对象持久化的新规范。JDO提供了透明的对象存储，对开发人员来说，存储数据对象完全不需要额外的代码（例如，JDBC API的使用）。这些烦琐的例行工作已经转移到JDO产品提供商身上，使开发人员解脱出来，从而集中时间和精力在业务逻辑上。  
另外，JDO很灵活，因为它可以在任何数据底层上运行。JDBC只能应用于关系型数据库，而JDO更通用，提供到任何数据底层的存储功能，包括关系型数据库、普通文件、XML文件和对象数据库等，使得应用的可移植性更强。  

### 5.4 软件测试

软件测试是使用人工或自动的手段来运行或测定某个软件系统的过程，其目的在于检验它是否满足规定的需求或弄清预期结果与实际结果之间的差别。  
软件测试的目的就是确保软件的质量、确认软件以正确的方式做了用户所期望的事情，所以软件测试工作主要是发现软件的错误、有效定义和实现软件成分由低层到高层的组装过程、验证软件是否满足任务书和系统定义文档所规定的技术要求、为软件质量模型的建立提供依据。  
软件测试不仅是要确保软件的质量，还要给开发人员提供信息，以方便其为风险评估做相应的准备，重要的是软件测试要贯穿在整个软件开发的过程中，保证整个软件开发的过程是高质量的。  

#### 5.4.1 测试方法

软件测试方法的分类有很多种，以测试过程中程序执行状态为依据可分为静态测试(Static Testing,ST)和动态测试(Dynamic Testing,DT);以具体实现算法细节和系统内部结构的相关情况为根据可分黑盒测试、白盒测试和灰盒测试3类：从程序执行的方式来分类，可分为人工测试(Manual Testing,MT)和自动化测试(Automatic Testing,.AT)。  
**(1)静态测试**。静态测试是被测程序不运行，只依靠分析或检查源程序的语句、结构、过程等来检查程序是否有错误。即通过对软件的需求规格说明书、设计说明书以及源程序做结构分析和流程图分析，从而来找出错误。例如不匹配的参数，未定义的变量等。  
**(2)动态测试**。动态测试与静态测试相对应，是通过运行被测试程序，对得到的运行结果与预期的结果进行比较分析，同时分析运行效率和健壮性能等。这种方法可简单分为3个步骤：构造测试实例、执行程序以及分析结果。  
**(3)黑盒测试**。黑盒测试将被测程序看成是一个黑盒，工作人员在不考虑任何程序内部结构和特性的条件下，根据需求规格说明书设计测试实例，并检查程序的功能是否能够按照规范说明准确无误的运行。其主要是对软件界面和软件功能进行测试。对于黑盒测试行为必须加以量化才能够有效的保证软件的质量。  
**(4)白盒测试**。白盒测试主要是借助程序内部的逻辑和相关信息，通过检测内部动作是否按照设计规格说明书的设定进行，检查每一条通路能否正常工作。白盒测试是从程序结构方面出发对测试用例进行设计。主要用于检查各个逻辑结构是否合理，对应的模块独立路径是否正常以及内部结构是否有效。常用的白盒测试法有控制流分析、数据流分析、路径分析、程序变异等。根据测试用例的覆盖程度，分为语句覆盖、判定覆盖、分支覆盖和路径覆盖等。
**(5)灰盒测试**。灰盒测试介于黑盒与白盒测试之间。灰盒测试除了重视输出相对于输入的正确性，也看重其内部的程序逻辑。但是，它不可能像白盒测试那样详细和完整。它只是简单地靠一些象征性的现象或标志来判断其内部的运行情况，因此在内部结果出现错误，但输出结果正确的情况下可以采取灰盒测试方法。因为在此情况下灰盒比白盒高效，比黑盒适用性广的优势就凸显出来了。  
**(6)自动化测试**。自动化测试就是软件测试的自动化，即在预先设定的条件下自动运行被测程序，并分析运行结果。总的来说，这种测试方法就是将以人驱动的测试行为转化为机器执行的一种过程。

#### 5.4.2 测试阶段

从阶段上划分，软件测试可以分为单元测试、集成测试和系统测试，系统测试中又包含了多种不同的测试种类，例如功能测试、性能测试、验收测试、压力测试等。  

1. 单元测试

主要是对该软件的模块进行测试，通过测试以发现该模块的功能不符合/不满足期望的情况和编码错误。  
由于模块的规模不大，功能单一，结构较简单，且测试人员可通过阅读源程序清楚知道其逻辑结构，首先应通过静态测试方法，比如静态分析、代码审查等，对该模块的源程序进行分析，按照模块的程序设计的控制流程图，以满足软件覆盖率要求的逻辑测试要求。另外，也可采用黑盒测试方法提出一组基本的测试用例，再用白盒测试方法进行验证。若用黑盒测试方法所产生的测试用例满足不了软件的覆盖要求，可采用白盒法增补出新的测试用例，以满足所需的覆盖标准。其所需的覆盖标准应视模块的实际具体情况而定。对一些质量要求和可靠性要求较高的模块，一般要满足所需条件的组合覆盖或者路径覆盖标准。 

2. 集成测试

集成测试通常要对已经严格按照程序设计要求和标准组装起来的模块同时进行测试，明确该程序结构组装的正确性，发现和接口有关的问题。在这一阶段，一般采用白盒测试和黑盒测试结合的方法进行测试，验证这一阶段设计的合理性以及需求功能的实现性。

3. 系统测试

一般情况下，系统测试采用黑盒测试，以此来检查该系统是否符合软件需求。本阶段的主要测试内容包括功能测试、性能测试、健壮性测试、安装或反安装测试、用户界面测试、压力测试、可靠性及安全性测试等。

为了有效保证这一阶段测试的客观性，必须由独立的测试小组来进行相关的系统测试。另外，系统测试过程较为复杂，由于在系统测试阶段不断变更需求造成功能的删除或增加，从而使程序不断出现相应的更改，而程序在更改后可能会出现新的问题，或者原本没有问题的功能由于更改导致出现问题。

所以，测试人员必须进行多轮回归测试。系统测试的结束标志是测试工作已满足测试目标所规定的需求覆盖率，并且测试所发现的缺陷都已全部归零。

4. 性能测试

性能测试是通过自动化的测试工具模拟多种正常、峰值以及异常负载条件来对系统的各项性能指标进行测试。负载测试和压力测试都属于性能测试，两者可以结合进行。通过负载测试，确定在各种工作负载下系统的性能，目标是测试当负载逐渐增加时，系统各项性能指标的变化情况。压力测试是通过确定一个系统的瓶颈或者不能接受的性能点，来获得系统能提供的最大服务级别的测试。  

5. 验收测试

验收测试是最后一个阶段的测试，是软件产品投入正式交付前的测试工作。和系统测试相比，验收测试是要满足用户需求或者与用户签订的合同（包括技术协议、技术协调单以及各个阶段用户参与的评审意见等)的各项要求，此外系统测试是软件开发过程中一项工作，而验收测试是由用户对要交付软件开展的一种测试工作。验收测试的主要目标是为用户展示所开发出来的软件符合预定的要求和有关标准，并验证软件实际工作的有效性和可靠性，确保用户能用该软件顺利完成既定的任务和功能。  
通过了验收测试，该产品就可进行发布。但是，在实际交付给用户之后，开发人员是无法预测该软件用户在实际运用过程中是如何使用该程序的，所以从用户的角度出发，测试人员还应进行Alpha测试或Beta测试。Alpha测试是在软件开发环境下由用户进行的测试，或者模拟实际操作环境进而进行的测试。Alpha测试主要是对软件产品的功能、局域化、界面、可使用性以及性能等等方面进行评价。而Beta测试是在实际环境中由多个用户对其进行测试，并将在测试过程中发现的错误有效反馈给软件开发者。

6. 其他测试

除了上述各种常规的测试种类之外，近年来由于Web应用和App应用的大规模兴起，也出现了一些新型的测试种类，例如AB测试、Web测试中的链接测试、表单测试等。  
**(1)AB测试**是为Web或App界面或流程制作两个(A/B)或多个(A/B/n)版本，在同一时间维度，分别让组成成分相同（相似）的访客群组（目标人群）随机的访问这些版本，收集各群组的用户体验数据和业务数据，最后分析、评估出最好版本，正式采用。  
**(2)Web测试**是软件测试的一部分，是针对Web应用的一类测试。由于Web应用与用户直接相关，又通常需要承受长时间的大量操作，因此Web项目的功能和性能都必须经过可靠的验证。通过测试可以尽可能地多发现浏览器端和服务器端程序中的错误并及时加以修正，以保证应用的质量。由于Web具有分布、异构、并发和平台无关的特性，因而它的测试要比普通程序复杂得多，包含的测试种类也非常多。  
**(3)链接测试**。链接是Web应用系统的一个主要特征，它是在页面之间切换和指导用户去一些未知地址页面的主要手段。链接测试可分为3个方面。首先，测试所有链接是否按指示的那样确实链接到了该链接的页面：其次，测试所链接的页面是否存在：最后，保证Web应用系统上没有孤立的页面。  
**(4)表单测试**。当用户通过表单提交信息的时候，都希望表单能正常工作。如果使用表单来进行在线注册，要确保提交按钮能正常工作，当注册完成后应返回注册成功的消息。如果使用表单收集配送信息，应确保程序能够正确处理这些数据，最后能让用户收到信息。要测试这些程序，需要验证服务器是否能正确保存这些数据，而且后台运行的程序能否正确解释和使用这些信息。当用户使用表单进行用户注册、登录、信息提交等操作时，必须测试提交操作的完整性，从而校验提交给服务器的信息的正确性。如果使用默认值，还要检验默认值的正确性。如果表单只能接受指定的某些值，则也要进行测试。  

### 5.5 净室软件工程

净室(Cleaning Room)软件工程是一种应用数学与统计学理论以经济的方式生产高质量软件的工程技术，力图通过严格的工程化的软件过程达到开发中的零缺陷或接近零缺陷。净室方法不是先制作一个产品，再去消除缺陷，而是要求在规约和设计中消除错误，然后以“净”的方式制作，可以降低软件开发中的风险，以合理的成本开发出高质量的软件。  
净室软件工程(Cleanroom Software Engineering.,CSE)**是一种在软件开发过程中强调在软件中建立正确性的需要的方法**。在净室软件工程背后的哲学是：**通过在第1次正确地书写代码增量，并在测试前验证它们的正确性，来避免对成本很高的错误消除过程的依赖**。它的过程模型是在代码增量积聚到系统的过程的同时，进行代码增量的统计质量验证。它甚至提倡开发者不需要进行单元测试，而是进行正确性验证和统计质量控制。  
净室是一种以合理的成本开发高质量软件的基于理论、面向工作组的方法。净室是基于理论的，因为坚实的理论基础是任何工程学科所不可缺少的。再好的管理也代替不了理论基础。  
净室是面向工作组的，因为软件是由人开发出来的，并且理论必须简化到实际应用才能引导人的创造力和协作精神。净室是针对经济实用软件的生产的，因为在现实生活中，业务和资源的限制必须在软件工程中予以满足。最后，净室是针对高质量软件的生产的，因为高质量改进管理，降低风险及成本，满足用户需求，提供竞争优势。

#### 5.5.1 理论基础

净室软件工程的理论基础主要是**函数理论和抽样理论**。

1. 函数理论

一个函数定义了从定义域到值域的映射。一个特定的程序好似定义了一个从定义域（所有可能的输入序列的集合)到值域（所有对应于输入的输出集合）的映射。这样，一个程序的规范就是一个函数的规范。  
一个明确定义的函数应当具有以下特性。  

* 完备性：对定义域中的每个元素，值域中至少有一个元素与之对应。对程序而言，每种可能的输入都必须定义，并有一个输出与之对应。
* 一致性：在值域中最多有一个元素与定义域中的同一元素对应。对程序而言，每个输入只能对应一个输出。
* 正确性：函数的正确性可以由上述性质判断。对程序而言，某项设计的正确性可以通过基于函数理论的推理来验证。

2. 抽样理论

不可能对软件的所有可能应用都进行测试。把软件的所有可能的使用情况看作总体，通过统计学手段对其进行抽样，并对样本进行测试，根据测试结果分析软件的性能和可靠性。

#### 5.5.2 技术手段

净室软件工程中应用的技术手段主要有以下4种。  

1. **统计过程控制下的增量式开发**(Incremental Development)

增量开发基于产品开发中受控迭代的工程原理一控制迭代。增量开发不是把整个开发过程作为一个整体，而是将其划分为一系列较小的累积增量。小组成员在任何时刻只须把注意力集中于工作的一部分，而无须一次考虑所有的事情。

2. **基于函数的规范与设计**

盒子结构方法按照函数理论定义了3种抽象层次：行为视图、有限状态机视图和过程视图。  
规范从一个外部行为视图（称为黑盒）开始，然后被转化为一个状态机视图（称为状态盒），最后由一个过程视图（明盒）来实现。盒子结构是基于对象的，并支持软件工程的关键原则：信息隐藏和实现分离。  

3. **正确性验证**

正确性验证被认为是(净室软件工程)CSE的核心，正是由于采用了这一技术，净室项目的软件质量才有了极大的提高。

4. **统计测试(Statistically Based Testing)和软件认证**

净室测试方法采用统计学的基本原理，即当总体太大时必须采取抽样的方法。首先确定一个使用模型(Usage Model)来代表系统所有可能使用的（一般是无限的）总体。然后由使用模型产生测试用例。因为测试用例是总体的一个随机样本，所以可得到系统预期操作性能的有效统计推导。  
净室软件工程是软件开发的一种形式化方法，它可以生成质量非常高的软件。它使用盒子结构规约进行分析和设计建模，并且强调将正确性验证（而不是测试）作为发现和消除错误的主要机制。  

#### 5.5.3 应用与缺点

第一项净室软件项目由IBM的Richard Linger于20世纪80年代中期负责实施。COBOL结构化设施项目开发出一项商业软件再工程产品，该产品显示出了卓越的质量水平，净室方法得到了初步确认。

20世纪90年代初，IBM生产出运用净室方法开发的海量存储控制单元适配器，售出了数千单元，直至1997年产品超过使用寿命后，仍未收到任何反映现场故障的报告。  
从20世纪80年代末到90年代初，美国国家宇航局(NASA)哥达德飞行控制中心(GSFC)软件工程实验室(SEL)进行了一系列净室试验。这些试验被认为是迄今为止软件工程领域进行的一次最完整的研究。4个规模依次扩大的地面控制软件系统按净室工程方法开发出来，结果表明，与NASA GSFC的质量和生产力有一致的提高。  
20世纪90年代初，美国陆军执行了一个净室项目，并在这个项目中获得了20倍于引进净室技术所用的投资回报。     1996年美国国防部软件数据与分析中心在其所做的软件方法比较分析中，报告净室具有真实的价值和质量优势。其他留有软件生产和质量方面历史数据的机构也用净室进行了大型项目的研发，它们公开发表了其结果。净室实践明显改进了IBM、Ericsson、NASA、DoD及许多其他机构的软件项目产出。  
但是，净室软件工程在使用的过程中，也显示出一些缺点。  
1)CSE太理论化，需要更多的数学知识。其正确性验证的步骤比较困难且比较耗时。CSE要求采用增量式开发、盒子结构、统计测试方法，普通工程师必须经过加强训练才能掌握，开发软件的成本比较高昂。  
2)CSE开发小组不进行传统的模块测试，这是不现实的。工程师可能对编程语言和开发环境还不熟悉，而且编译器或操作系统的bug也可能导致未预期的错误。  
3)CSE毕竟脱胎于传统软件工程，不可避免地带有传统软件工程的一些弊端。

### 5.6 基于构件的软件工程

基于构件的软件工程(Component-.Based Software Engineering,CBSE)是一种基于分布对象技术、强调通过可复用构件设计与构造软件系统的软件复用途径。基于构件的软件系统中的构件可以是COTS(Commercial-Off-The-Shelf)构件，也可以是通过其他途径获得的构件（如自行开发)。CBSE体现了“购买而不是重新构造”的哲学，将软件开发的重点从程序编写转移到了基于已有构件的组装，以更快地构造系统，减轻用来支持和升级大型系统所需要的维护负担，从而降低软件开发的费用。  
CBSE正在改变大型软件系统被开发的方式。CBSE体现了Fred Brooks等人支持的“购买，而非建造”的思想。就像早期的子例程将程序员从思考细节中解放出来一样，CBSE将考虑的重点从编程软件移到组装软件系统。工程师的焦点从“实现”变成了“集成”。这样做的基础是假定在很多大型软件系统中存在足够多的共性，从而使得开发可复用软件组件来满足这些共性是值得的。

#### 5.6.1 构件和构件模型

在软件复用领域，一般观点认为构件是一个独立的软件单元，可以与其他构件构成一个软件系统。然而也有其他专家提出了其他的构件定义。

不管构件如何定义，用于CBSE的构件应该具备以下特征。  

> (1)可组装型：对于可组装的构件，所有外部交互必须通过公开定义的接口进行。同时它还必须对自身信息的外部访问。  
> (2)可部署性：软件必须是自包含的，必须能作为一个独立实体在提供其构件模型实现的构件平台上运行。构件总是二进制形式，无须在部署前编译。  
> (3)文档化：构件必须是完全文档化的，用户根据文档来判断构件是否满足需求。  
> (4)独立性：构件应该是独立的，应该可以在无其他特殊构件的情况下进行组装和部署，如确实需要其他构件提供服务，则应显示声明。  
> (5)标准化：构件标准化意味着在CBSE过程中使用的构件必须符合某种标准化的构件模型。  

构件模型定义了构件实现、文档化以及开发的标准。这些标准是为构件开发者确保构件的互操作性而设立的，也是为那些提供中间件的构件执行基础设施供应商支持构件操作而设立的。  
目前主流的构件模型是Web Services模型、Sun公司的EJB模型和微软的.NET模型。  
构件模型包含了一些模型要素，这些要素信息定义了构件接口、在程序中使用构件需要知道的信息，以及构件应该如何部署。  

> (1)接口。构件通过构件接口来定义，构件模型规定应如何定义构件接口以及在接口定义中应该包含的要素，如操作名、参数以及异常等。  
> (2)使用信息。为使构件远程分布和访问，必须给构件一个特定的、全局唯一的名字或句柄。构件元数据是构件本身相关的数据，比如构件的接口和属性信息。用户可以通过元数据找到构件提供的服务。构件模型的实现通常包括访问构件的元数据的特定方法。构件是通用实体，在部署的时候，必须对构件进行配置来适应应用系统。  
> (3)部署。构件模型包括一个规格说明，指出应该如何打包构件使其部署成为一个独立的可执行实体。部署信息中包含有关包中内容的信息和它的二进制构成的信息。  

构件模型提供了一组被构件使用的通用服务，这种服务包括以下两种。  

* 平台服务，允许构件在分布式环境下通信和互操作。
* 支持服务，这是很多构件需要的共性服务。例如，构件都需要的身份认证服务。

中间件实现共性的构件服务，并提供这些服务的接口。为了利用构件模型基础设施提供的服务，可以认为构件被部署在一个容器中。容器是支持服务的一个实现加上一个接口定义，构件必须提供该接口定义以便和容器整合在一起。

#### 5.6.2 CBSE过程

**基于构件的软件工程(CBSE)**过程是支持基于构件组装的软件开发过程，需要考虑构件复用的可能性，以及在开
发和使用可复用的构件中所涉及的不同过程活动。成功的构件复用需要一个经过裁剪、适配的开发过程，以便在软件开发过程中包含可复用的构件。  
CBSE过程中的主要活动包括：  

> (1)系统需求概览：  
> (2)识别候选构件：  
> (3)根据发现的构件修改需求：  
> (4)体系结构设计：  
> (5)构件定制与适配：  
> (6)组装构件，创建系统。

这种CBSE过程与传统的软件开发过程存在几点不同。  

> (1)CBSE早期需要完整的需求，以便尽可能多地识别出可复用的构件。而增量式开发中，早期并不需要完整的需求。  
> (2)在过程早期阶段根据可利用的构件来细化和修改需求。如果可利用的构件不能满足用户需求，就应该考虑由复用构件支持的相关需求。通过劝说用户修改需求，以便能节省开支且快速开发系统。  
> (3)在系统体系结构设计完成后，会有一个进一步的对构件搜索及设计精化的活动。可能需要为某些构件寻找备用构件，或者修改构件以适合功能和架构的要求。  
> (4)开发就是将已经找到的构件集成在一起的组装过程。其中包括将构件与构件模型基础设施集成在一起，有时还需要开发适配器来协调不匹配的构件接口，可能还需要开发额外的功能。

在CBSE中，体系结构设计阶段特别重要。在这个阶段，将选择一个构件模型和一个实现平台。而模型和平台也决定和限制了可选构件的范围。

#### 5.6.3 构件组装

构件组装是指构件相互直接集成或是用专门编写的“胶水代码”将它们整合在一起来创造一个系统或另一个构件的过程。  
常见的组装构件有以下3种组装方式。  

1. 顺序组装

通过按顺序调用已经存在的构件，可以用两个已经存在的构件来创造一个新的构件。顺序组装的类型可能适用于作为程序元素的构件或是作为服务的构件。需要特定的胶水代码，来保证两个构件的组装：上一个构件的输出，与下一个构件的输入相兼容。 

2. 层次组装

这种情况发生在一个构件直接调用由另一个构件所提供的服务时。被调用的构件为调用的构件提供所需的服务。因此，被调用构件的“提供”接口必须和调用构件的“请求”接口兼容。  
如果接口相匹配，则调用构件可以直接调用被调用构件，否则就需要编写专门的胶水代码来实现转换。

3. 叠加组装 

这种情况发生在两个或两个以上构件放在一起来创建一个新构件的时候。这个新构件合并了原构件的功能，从而对外提供了新的接口。外部应用可以通过新接口来调用原有构件的接口，而原有构件不互相依赖，也不互相调用。这种组装类型适合于构件是程序单元或者构件是服务的情况。  
当创建一个系统时，可能会用到所有的构件组装方式，对所有情况都必须编写胶水代码来连接构件。而当编写构件尤其是为了组装来写构件时，经常可能会面临接口不兼容的问题，即所要组装的构件的接口不一致。一般会出现3种不兼容情况。  

> (1)参数不兼容。接口每一侧的操作有相同的名字，但参数类型或参数个数不相同。  
> (2)操作不兼容。提供接口和请求接口的操作名不同。  
> (3)操作不完备。一个构件的提供接口是另一个构件请求接口的一个子集，或者相反。

针对上述不兼容情况，必须通过编写适配器构件来解决不兼容的问题，适配器构件使两个可复用构件的接口相一致：适配器构件将一个接口转换为另外一个接口。  
当用户选择组装方式时，必须考虑系统所需要的功能性需求、非功能性需求，以及当系统发生改变时，一个构件能被另一个构件替代的难易程度。

### 5.7 软件项目管理
#### 5.7.1 项目管理概述

软件项目管理的提出是在20世纪70年代中期的美国，当时美国国防部专门研究了软件开发不能按时提交、预算超支和质量达不到用户要求的原因，结果发现70%的项目是因为管理不善引起的，而非技术原因。于是软件开发者开始逐渐重视起软件开发中的各项管理。到了20世纪90年代中期，软件研发项目管理不善的问题仍然存在。  
软件项目管理和其他的项目管理相比有一定的特殊性。首先，软件是纯知识产品，其开发进度和质量很难估计和度量，生产效率也难以预测和保证。其次，软件系统的复杂性也导致了开发过程中各种风险的难以预见和控制。  
软件项目管理的对象是软件工程项目。它所涉及的范围覆盖了整个软件工程过程。为使软件项目开发获得成功，关键问题是必须对软件项目的工作范围、可能风险、需要资源（人、硬件/软件)、要实现的任务、经历的里程碑、花费工作量（成本）、进度安排等进行预先计划和执行。这种管理在技术工作开始之前就应开始，在软件从概念到实，的过程中继续进行，当软件工程过程最后结束时才终止。  
软件项目管理是为了使软件项目能够按照预定的成本、进度、质量顺利完成，而对人员(People)、产品(Product)、过程(Process)和项目(Project).进行分析和管理的活动。  
下面对软件进度、配置、质量和风险管理进行简单介绍。

#### 5.7.2 软件进度管理

按时完成软件项目是项目经理最大的挑战之一。所谓进度，指的是对执行活动和里程碑所制定的工作计划，而进度管理指的是为了确保项目按期完成所需要的管理过程。在软件进度管理过程中，一般包括：活动定义、活动排序、活动资源估计、活动历时估计、制定进度计划和进度控制。

1. 工作分解结构

软件项目往往是比较大而复杂的，往往需要进行层层分解，将大的任务分解成一个个的单一小任务进行处理。**工作分解结构(Work Breakdown Structure,WBS)**如图5-7所示，就是把一个项目，按一定的原则分解成任务，任务再分解成一项项工作，再把一项项工作分配到每个人的日常活动中，直到分解不下去为止。即：项目→任务→工作→日常活动。工作分解结构以可交付成果为导向，对项目要素进行的分组，它归纳和定义了项目的整个工作范围，每下降一层代表对项目工作的更详细定义。WBS总是处于计划过程的中心，也是制订进度计划、资源需求、成本预算、风险管理计划和采购计划等的重要基础。

![image-20230308下午50935430](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230308%E4%B8%8B%E5%8D%8850935430.png)

WBS树形结构中最底层的被称为工作包，是最低层次的可交付成果，它应当由唯一主体负责完成。  
WBS常见的分解方式包括：按产品的物理结构分解、按产品或项目的功能分解、按照实施过程分解、按照项目的实施单位分解、按照项目的目标分解、按部分或只能进行分解等。不管采用哪种分解方式，最终都要满足以下对任务分解的基本要求。  

> (1)WBS的工作包是可控和可管理的，不能过于复杂。  
> (2)任务分解也不能过细，一般原则WBS的树形结构不超过6层。  
> (3)每个工作包要有一个交付成果。  
> (4)每个任务必须有明确定义的完成标准。  
> (5)WBS必须有利于责任分配。

2. 任务活动图

经过工作分解之后，会得到一组活动任务，这是需要对每个活动进行定义，并确定活动之间的关系。  
活动定义是指确定完成项目的各个交付成果所必须进行的各项具体活动，需要明确每个活动的前驱、持续时间、必须完成日期、里程碑或交付成果。

> 前驱指的是该活动开始之前必须发生的事件或事件集；  
> 持续时间是指完成该活动的时间长度（一般单位为天或周）：
> 必须完成日期指的是该活动必须完成的具体日期：
> 里程碑指的是判定该活动完成的一组条件。

每个活动在明确了前驱、必须完成日期等内容后，就确定了活动之间的相互关系，也就是活动执行的前后顺序。根据活动顺序就可以得到对应的任务活动图。任务活动图是项目进度管理、项目成本管理等一系列项目管理活动的基础。  
在项目管理中，目前通常采用甘特图等方式来展示和管理项目活动。

#### 5.7.3 软件配置管理
软件配置管理(Software Configuration Management,SCM)是一种标识、组织和控制修改的技术。软件配置管理应用于整个软件工程过程。在软件建立时变更是不可避免的，而变更加剧了项目中软件开发者之间的混乱。SCM活动的目标就是为了标识变更、控制变更、确保变更正确实现并向其他有关人员报告变更。从某种角度讲，SCM是一种标识、组织和控制修改的技术，目的是使错误降为最小并最有效地提高生产效率。  
软件配置管理核心内容包括版本控制和变更控制。  
(1)版本控制(Version Control)。版本控制是指对软件开发过程中各种程序代码、配置文件及说明文档等文件变更的管理，是软件配置管理的核心思想之一。版本控制最主要的功能就是追踪文件的变更。它将什么时候、什么人更改了文件的什么内容等信息忠实地记录下来。每一次文件的改变，文件的版本号都将增加。除了记录版本变更外，版本控制的另一个重要功能是并行开发。软件开发往往是多人协同作业，版本控制可以有效地解决版本的同步以及不同开发者之间的开发通信问题，提高协同开发的效率。并行开发中最常见的不同版本软件的错误(Bug)修正问题也可以通过版本控制中分支与合并的方法有效地解决。  
(2)变更控制(Change Control)。变更控制的目的并不是控制变更的发生，而是对变更进行管理，确保变更有序进行。对于软件开发项目来说，发生变更的环节比较多，因此变更控制显得格外重要。项目中引起变更的因素有两个：一是来自外部的变更要求，如客户要求修改工作范围和需求等：二是开发过程内部的变更要求，如为解决测试中发现的一些错误而修改源码甚至设计。比较而言，最难处理的是来自外部的需求变更，因为T项目需求变更的概率大，引发的工作量也大（特别是到项目的后期）。  
#### 5.7.4 软件质量管理

软件质量就是软件与明确地和隐含地定义的需求相一致的程度，更具体地说，软件质量是软件符合明确地叙述的功能和性能需求、文档中明确描述的开发标准以及所有专业开发的软件都应具有的隐含特征的程度。  
从管理角度出发，可以将影响软件质量的因素划分为3组，分别反映用户在使用软件产品时的3种不同倾向和观点。这3组分别是：**产品运行、产品修改和产品转移**（如图5-8所示）。

![image-20230308下午54707461](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230308%E4%B8%8B%E5%8D%8854707461.png)

1. 软件质量保证

软件质量保证(Software Quality Assurance,SQA)是建立一套有计划，有系统的方法，来向管理层保证拟定出的标准、步骤、实践和方法能够正确地被所有项目所采用。软件质量保证的目的是使软件过程对于管理人员来说是可见的。它通过对软件产品和活动进行评审和审计来验证软件是合乎标准的。软件质量保证组在项目开始时就一起参与建立计划、标准和过程。这些使软件项目满足机构方针的要求。  
软件质量保证的关注点集中在于一开始就避免缺陷的产生。质量保证的主要目标是：  

> (1)事前预防工作，例如，着重于缺陷预防而不是缺陷检查。  
> (2)尽量在刚刚引入缺陷时即将其捕获，而不是让缺陷扩散到下一个阶段。  
> (3)作用于过程而不是最终产品，因此它有可能会带来广泛的影响与巨大的收益。  
> (4)贯穿于所有的活动之中，而不是只集中于一点。  

软件质量保证的目标是以独立审查的方式，从第三方的角度监控软件开发任务的执行，就软件项目是否正确遵循已制订的计划、标准和规程给开发人员和管理层提供反映产品和过程质量的信息和数据，提高项目透明度，同时辅助软件工程取得高质量的软件产品。  
软件质量保证的主要作用是给管理者提供预定义的软件过程的保证，因此SQA组织要保证如下内容的实现：**选定的开发方法被采用、选定的标准和规程得到采用和遵循、进行独立的审查、偏离标准和规程的问题得到及时的反映和处理、项目定义的每个软件任务得到实际的执行**。  
软件质量保证的主要任务是以下3个方面。  
(1)**SQA审计与评审**。SQA审计包括对软件工作产品、软件工具和设备的审计，评价这几项内容是否符合组织规定的标准。SQA评审的主要任务是保证软件工作组的活动与预定的软件过程一致，确保软件过程在软件产品的生产中得到遵循。  
(2)**SQA报告**。SQA人员应记录工作的结果，并写入到报告之中，发布给相关的人员。  
SQA报告的发布应遵循三条原则：SQA和高级管理者之间应有直接沟通的渠道；SQA报告必须发布给软件工程组，但不必发布给项目管理人员：在可能的情况下向关心软件质量的人发布SQA报告。  
(3)**处理不符合问题**。这是SQA的一个重要的任务，SQA人员要对工作过程中发现的问题进行处理及时向有关人员及高级管理者反映。

2. 软件质量认证

质量认证用来检验整个企业的质量水平，注重软件企业的整体资质，全面考察软件企业的整体质量体系，检验该企业是否具有设计、开发和生产符合质量要求的软件的能力。目前国内软件企业主要采用的是ISO 9000和能力成熟度模型(Capability Maturity Model,,CMM)。  
1)ISO 9000  
ISO 9000标准是国际标准化组织(ISO)在1994年提出的概念，是指由ISO/Tc176(国际标准化组织质量管理和质量保证技术委员会)制定的国际标准。ISO 9001用于证实组织具有提供满足顾客要求和适用法规要求的产品的能力，目的在于增进顾客满意：ISO 9000不是指一个标准，而是一组标准的统称。软件企业经常采用的是ISO 9001:1994《品质体系设计、开发、生产、安装的品质保证模式》。  
ISO 9001包括设计、开发、生产、安装和服务等活动的质量保障模式，该标准规定了质量体系的20个方面的质量要求，覆盖了全部设计和开发活动。如果软件开发企业能够达到这些要求，表明该企业具备质量保证能力，达到了ISO 9001认证。  
2)CMM  
CMM是由美国卡内基梅隆大学软件工程研究所1987年研制成功的，是软件生产过程标准和软件企业成熟度等级认证标准，我国软件企业大多采用CMM认证。有关CMM的内容见5.1.5节。  

#### 5.7.5 软件风险管理

软件项目风险管理是软件项目管理的重要内容。在进行软件项目风险管理时，要辨识风险，评估它们出现的概率及产生的影响，然后建立一个规划来管理风险。风险管理的主要目标是预防风险。软件项目风险是指在软件开发过程中遇到的预算和进度等方面的问题以及这些问题对软件项目的影响。软件项目风险会影响项目计划的实现，如果项目风险变成现实，就有可能影响项目的进度，增加项目的成本，甚至使软件项目不能实现。  
美国Bohm的软件风险管理体系，把风险管理活动分成**风险估计（风险辨识、风险分析、风险排序)和风险控制（风险管理计划、风险处理、风险监督）**两大阶段。该体系偏重理论。  
美国Charette的风险分析和管理体系，把风险分成分析（辨识、估计、评价）和管理（计划、控制、监督)两大阶段。该体系偏重理论，与Boehm体系接近。  
美国卡内基梅隆大学软件研究所的CMU-SEI风险管理体系，包括SRE、CRM(Continuous Risk Management)、TRM(Team Risk Management)与CMM配合的软件风险管理，是基于实践的全面风险管理体系，并将软件需求方作为软件风险管理的要素。

## 第6章 数据库设计基础知识

本章主要讨论数据库设计的基本概念和方法。首先介绍数据库的基本概念，包括数据库技术的发展历程以及数据模型、数据库管理系统等基本概念：其次介绍主流的关系数据库概念以及关系数据库设计的基础理论方法：然后介绍数据库设计的基本步骤和方法：最后，介绍新型的No SQL数据库的基本概念。
### 6.1 数据库基本概念

数据(Data)是描述事物的符号记录，它具有多种表现形式，可以是文字、图形、图像、声音和语言等。信息(Information)是现实世界事物的存在方式或状态的反映。信息具有可感知、可存储、可加工、可传递和可再生等自然属性，信息已是社会各行各业不可缺少的资源，这也是信息的社会属性。数据是信息的符号表示，而信息是具有特定释义和意义的数据。  
数据库系统(DataBase System,DBS)是一个采用了数据库技术，有组织地、动态地存储大量相关联数据，从而方便多用户访问的计算机系统。广义上讲，DBS包括了数据库管理系统(DataBase Management System,DBMS).  
数据库(DataBase,DB)是统一管理的、长期储存在计算机内的，有组织的相关数据的集合。其特点是数据间联系密切、冗余度小、独立性较高、易扩展，并且可为各类用户共享。一般主要指的是存储数据的各种物理设备以及数据本身。  
DBMS是数据库系统的核心软件，是由一组相互关联的数据集合和一组用以访问这些数据的软件组成。DBMS要在操作系统的支持下工作，它是一种解决如何科学地组织和储存数据，如何高效地获取和维护数据的系统软件。其主要功能包括数据定义功能、数据操纵功能、数据库的运行管理和数据库的建立与维护。  

#### 6.1.1 数据库技术的发展

数据处理是对各种数据进行收集、存储、加工和传播的一系列活动。数据管理是对数据进行分类、组织、编码、存储、检索和维护的活动。数据管理技术的发展经历了3个阶段：**人工管理、文件系统和数据库系统阶段**。  

1. 人工管理阶段

早期的数据处理都是通过手工进行的，因为当时的计算机主要用于科学计算。计算机上没有专门管理数据的软件，也没有诸如磁盘之类的设备来存储数据。在人工管理阶段，数据处理具有以下几个特点。  

> (1)数据量较少。数据和程序一一对应，即一组数据对应一个程序，数据面向应用，独立性很差。  
> (2)数据不保存。该阶段计算机主要用于科学计算，一般不需要将数据长期保存，只在计算一个题目时，将数据输入计算机，计算完成得到计算结果即可。  
> (3)没有软件系统对数据进行管理。程序员不仅要规定数据的逻辑结构，而且在程序中还要设计物理结构，包括存储结构、数据存取方法、输入输出方式等。  

手工处理数据有两个缺点。  

> (1)应用程序与数据之间的依赖性太强，不相互独立。
> (2)数据组和数据组之间可能有许多重复数据，造成数据冗余。

2. 文件系统阶段

由于大容量的磁盘等辅助存储设备的出现，专门管理辅助存储设备上数据的文件系统应运而生。在文件系统中，按一定的规则将数据组织成为一个文件，应用程序通过文件系统对文件中的数据进行存取和加工。  
在文件系统阶段中数据管理的特点如下。  
(1)数据可以长期保留，数据的逻辑结构和物理结构有了区别，程序可以按照文件名称访问文件，不必关心数据的物理位置，由文件系统提供存取方法。  
(2)数据不属于某个特定的应用，即应用程序和数据之间不再是直接的对应关系，数据可以重复使用。但是文件系统只是简单地存取数据，相互之间并没有有机的联系，即数据存取依赖于应用程序的使用方法，不同的应用程序仍然很难共享同一数据文件。  
(3)文件组织形式的多样化，有索引文件、链接文件和Hash文件等。但文件之间没有联系，相互独立，数据间的联系要通过程序去构造。  
文件系统具有如下缺点。  

> (1)数据冗余(Data Redundancy)。文件与应用程序密切相关，相同的数据集合在不同的应用程序中使用时，经常需要重复定义、重复存储，数据冗余度大。  
> (2)数据不一致性(Data Inconsistency)。由于相同数据的重复存储，单独管理，同样的数据可能存在于多个不同的文件中，给数据的修改和维护带来难度，容易造成数据的不一致。  
> (3)数据孤立(Data Isolation),即数据联系弱。由于数据分散在不同的文件中，而这些文件可能具有不同的文件格式，文件之间是孤立的，所以从整体上看文件之间没有反映现实世界事物之间的内在联系，因此很难对数据进行合理的组织以适应不同应用的需要。  

3. 数据库系统阶段

数据库系统是由计算机软件、硬件资源组成的系统，它有组织地、动态地存储大量关联数据，方便多用户访问，它与文件系统重要的区别是数据的充分共享、交叉访问、与应用程序的高度独立性。  
数据库系统阶段数据管理的特点如下。  
(1)采用复杂的数据模型表示数据结构。数据模型不仅描述数据本身的特点，还描述数据之间的联系。数据不再面向某个应用，而是面向整个应用系统。数据冗余明显减少，实现了数据共享。
(2)有较高的数据独立性。数据库也是以文件方式存储数据的，但是它是数据的一种更高级的组织形式，在应用程序和数据库之间由DBMS负责数据的存取。DBMS对数据的处理方式和文件系统不同，它把所有应用程序中使用的数据以及数据间的联系汇集在一起，以便于应用程序查询和使用。  
数据库系统与文件系统的区别是：数据库对数据的存储是按照同一种数据结构进行的，不同的应用程序都可以直接操作这些数据（即对应用程序的高度独立性）。数据库系统对数据的完整性、一致性和安全性都提供了一套有效的管理手段（即数据的充分共享性）。数据库系统还提供管理和控制数据的各种简单操作命令，容易掌握，使用户编写程序简单（即操作方便性）。

#### 6.1.2 数据模型

数据库的基础结构是数据模型，是用来描述数据的一组概念和定义。数据模型的三要素是**数据结构、数据操作和数据的约束条件**。  

> (1)数据结构。对象类型的集合，是对系统静态特性的描述。  
> (2)数据操作。对数据库中各种对象（型）的实例（值）允许执行的操作集合，包括操作及操作规则。如操作有检索、插入、删除和修改，操作规则有优先级等。数据操作是对系统动态特性的描述。  
> (3)数据的约束条件。是一组完整性规则的集合。也就是说，对于具体的应用数据必须遵循特定的语义约束条件，以保证数据的正确、有效和相容。  

按照不同的数据模型，可以将数据库的发展历史分为3个阶段。  

1. 层次和网状数据库系统

层次模型采用树形结构表示数据与数据间的联系。在层次模型中，每个结点表示一个记录类型（实体），记录之间的联系用结点之间的连线表示，并且根结点以外的其他结点有且仅有一个双亲结点。上层和下一层类型的联系是1：n 联系（包括 1：1联系）  
采用网络结构表示数据间联系的数据模型称为网状模型。在网状模型中，允许一个以上的结点无双亲，或者一个结点可以有多于一个的双亲。  
网状模型是一个比层次模型更具有普遍性的数据结构，层次模型是网状模型的一个特例。  
网状模型可以直接地描述现实世界，因为去掉了层次模型的两个限制，允许两个结点之间有多种联系（称之为复合联系）。需要说明的是，网状模型不能表示记录之间的多对多联系，需要引入联结记录来表示多对多联系。  
层次或网状模型，底层的数据结构均可用图来表示。二者的共同特点如下。  

* 支持三级模式的体系结构：  
* 用存取路径来表示数据之间的联系：  
* 独立的数据定义语言：  
* 导航的数据操纵语言。  

2. 关系数据库系统

关系模型(Relation Model)是目前最常用的数据模型之一。关系数据库系统采用关系模型作为数据的组织方式，在关系模型中用表格结构表达实体集以及实体集之间的联系，其最大特色是描述的一致性。关系模型是由若干个关系模式组成的集合。一个关系模式相当于一个记录型，对应于程序设计语言中类型定义的概念。关系是一个实例，也是一张表，对应于程序设计语言中变量的概念。变量的值随时间可能会发生变化，类似地，当关系被更新时，关系实例的内容也发生了变化。  
由于关系模型比网状、层次模型更为简单灵活，因此，数据处理领域中，关系数据库的使用已相当普遍。  

3. 第三代数据库系统

层次、网状和关系数据库系统的设计目标源于商业事务处理，面对当前层出不穷的新型应用显得力不从心。从20世纪80年代开始，出现了许多新型应用，数据管理出现了许多新的数据模型，如面向对象模型、语义数据模型、XML数据模型、半结构化数据模型等。数据模型的发展，需要数据库系统支持日益复杂的数据类型。其中最典型的是No SQL(Not Only of SQL)运动。  
No SQL一词最早出现于1998年，是Carlo Strozzi开发的一个轻量、开源、不提供SQL功能的关系数据库。2009年，Last.fm的Johan Oskarsson发起了一次关于分布式开源数据库的讨论，来自Rackspace的Eric Evans再次提出了No SQL的概念，这时的No SQL主要指非关系型、分布式、不提供ACD的数据库设计模式。2009年在亚特兰大举行的讨论会是一个里程碑，其口号是“select fun,profit from real world where relational--false;”。因此，对NoSQL最普遍的解释是“非关联型的”，强调Key-alue Stores和文档数据库的优点，而不是单纯的反对RDBMS。
随着互联网wWb2.0网站的兴起，传统的关系数据库在处理Web2.0网站，特别是超大规模和高并发的SNS类型的Wb2.0纯动态网站已经显得力不从心，出现了很多难以克服的问题，而非关系型的数据库则由于其本身的特点得到了非常迅速的发展。No SQL数据库的产生就是为了面对大规模数据集合和多重数据种类带来的挑战，特别是大数据应用难题。

#### 6.13 数据库管理系统
DBMS实现了对共享数据有效地组织、管理和存取，因此DBMS应具有如下几个方面的功能及特征。

1. DBMS功能

DBMS功能主要包括数据定义、数据库操作、数据库运行管理、数据组织、存储和管理、数据库的建立和维护  
(1)数据定义。  
DBMS提供数据定义语言(Data Definition Language,.DDL),可以对数据库的结构进行描述，包括外模式、模式和内模式的定义：数据库的完整性定义：安全保密定义，如口令、级别和存取权限等。这些定义存储在数据字典中，是DBMS运行的基本依据。  
(2)数据库操作  
DBMS向用户提供数据操纵语言(Data Manipulation Language,DML),实现对数据库中数据的基本操作，如检索、插入、修改和别除。  
(3)数据库运行管理  
数据库在运行期间，多用户环境下的并发控制、安全性检查和存取控制、完整性检查和执行、运行日志的组织管理、事务管理和自动恢复等都是DBMS的重要组成部分。这些功能可以保证数据库系统的正常运行。  
(4)数据组织、存储和管理。  
DBMS分类组织、存储和管理各种数据，包括数据字典、用户数据和存取路径等。要确定以何种文件结构和存取方式在存储级别上组织这些数据，以提高存取效率。实现数据间的联系、数据组织和存储的基本目标是提高存储空间的利用率。  
(5)数据库的建立和维护  
数据库的建立和维护，包括数据库的初始建立、数据的转换、数据库的转储和恢复、数据库的重组和重构、性能监测和分析等。  
(6)其他功能。  
如DBMS与网络中其他软件系统的通信功能，一个DBMS与另一个DBMS或文件系统的数据转换功能等。  

2. DBMS的特点

通过DBMS来管理数据具有如下特点，  
(1)数据结构化且统一管理。数据库中的数据由DBMS统一管理。由于数据库系统采用数据模型表示数据结构，数据模型不仅描述数据本身的特点，还描述数据之间的联系。数据不再面向某个应用，而是面向整个企业内的所有应用。数据易维护、易扩展，数据冗余明显减少，真正实现了数据的共享。  
(2)有较高的数据独立性。数据的独立性是指数据与程序独立，将数据的定义从程序中分离出去，由DBMS负责数据的存储，应用程序关心的只是数据的逻辑结构，无须了解数据在磁盘上的存储形式，从而简化应用程序，大大减少应用程序编制的工作量。数据的独立性包括数据的物理独立性和数据的逻辑独立性。  
(3)数据控制功能。DBMS提供了数据控制功能，以适应共享数据的环境。数据控制功能包括对数据库中数据的安全性、完整性、并发和恢复的控制。  

* 数据库的安全性(Security)是指保护数据库以防止不合法的使用所造成的数据泄露、更改或破坏。这样，用户只能按规定对数据进行处理，例如，划分了不同的权限，有的用户只有读数据的权限，有的用户有修改数据的权限，用户只能在规定的权限范围内操纵数据库。  
* 数据的完整性(Integrality)是指数据库正确性和相容性，是防止合法用户使用数据库时向数据库加入不符合语义的数据，保证数据库中数据是正确的，避免非法的更新。  
* 并发控制(concurrency control)是指在多用户共享的系统中，许多用户可能同时对同一数据进行操作。DBMS的并发控制子系统负责协调并发事务的执行，保证数据库的完整性不受破坏，避免用户得到不正确的数据。
* 故障恢复(recovery from failure)。数据库中的常见故障是事务内部故障、系统故障、介质故障及计算机病毒等。故障恢复主要是指恢复数据库本身，即在故障导致数据库状态不一致时，将数据库恢复到某个正确状态或一致状态。恢复的原理非常简单，就是要建立冗余(redundancy.)数据。换句话说，确定数据库是否可恢复的方法就是其包含的每一条信息是否都可以利用冗余的存储在别处的信息重构。

#### 6.1.4 数据库三级模式

站在数据库管理系统的角度看，数据库系统一般采用三级模式结构，其体系结构如图6-1所示。事实上，一个可用的数据库系统必须能够高效地检索数据。这种高效性的需求促使数据库设计者使用复杂的数据结构来表示数据。由于大多数数据库系统用户并未受过计算机的专业训练，因此系统开发人员需要通过视图层、逻辑层和物理层三个层次上的抽象来对用户屏蔽系统的复杂性，简化用户与系统的交互。

![image-20230321下午61528961](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230321%E4%B8%8B%E5%8D%8861528961.png)

(1)视图层(Viev Level)是最高层次的抽象，描述整个数据库的某个部分的数据。因为数据库系统的很多用户并不关心数据库中的所有信息，而只关心所需要的那部分数据。可以通过构建视图层来实现用户的数据需求，这样做不仅使用户与系统交互简化，而且还可以保证数据的保密性和安全性。  
(2)逻辑层(Logical Level)是比物理层更高一层的抽象，描述数据库中存储的数据以及这些数据间存在的关系。逻辑层通过相对简单的结构描述了整个数据库。尽管逻辑层简单结构的实现涉及了复杂的物理层结构，但逻辑层的用户不必知道这些复杂性，因为，逻辑层抽象是数据库管理员的职责，管理员确定数据库应保存哪些信息.  
(3)物理层(Physical Level)是最低层次的抽象，描述数据在存储器中是如何存储的。物理层详细地描述复杂的底层结构。  
实际上，数据库的产品很多，它们支持不同的数据模型，使用不同的数据库语言，建立在不同的操作系统上，而且数据的存储结构也各不相同，但基本上都支持三级模式数据库系统采用三级模式结构，这是数据库管理系统内部的系统结构。数据库有“型”和“值”的概念，“型”是指对某一数据的结构和属性的说明，“值”是型的一个具体赋值。  
从数据库管理系统的角度，数据库也分为三级模式，分别是外模式、概念模式和内模式概念模式也称模式，是数据库中全部数据的逻辑结构和特征的描述，它由若干个概念记录类型组成，只涉及“型”的描述，不涉及具体的值。概念模式的一个具体值称为模式的一个实例，同一个模式可以有很多实例。概念模式反映的是数据库的结构及其联系，所以是相对稳定的：而实例反映的是数据库某一时刻的状态，是相对变动的。  
需要说明的是，概念模式不仅要描述概念记录类型，还要描述记录间的联系、操作、数据的完整性和安全性等要求。但是，概念模式不涉及存储结构、访问技术等细节。只有这样，概念模式才算做到了“物理数据独立性”。  
**外模式**也称用户模式或子模式，是用户与数据库系统的接口，是用户需要使用的部分数据的描述，它由若干个外部记录类型组成。用户使用数据操纵语言对数据库进行操作，实际上是对外模式的外部记录进行操作。  
内模式也称存储模式，是数据物理结构和存储方式的描述，是数据在数据库内部的表示方式。定义所有的内部记录类型、索引和文件的组织方式，以及数据控制方面的细节。  
总之，数据按外模式的描述提供给用户，按内模式的描述存储在磁盘上，而概念模式提供了连接这两极模式的相对稳定的中间观点，并使得两级的任意一级的改变都不受另一级的牵制。

### 6.2 关系数据库

关系数据库是目前应用非常广泛的数据库之一，有一套完整的理论支持。关系模型是关系数据库的基础，由**关系数据结构、关系操作集合和关系完整性规则**3部分组成。本节介绍关系模型的基本概念、关系代数、关系演算和关系数据库设计理论方面的内容。  
#### 6.2.1 关系数据库基本概念

关系数据库系统是支持关系数据模型的数据库系统。关系数据库应用数学方法来处理数据库中的数据。最早提出将这类方法用于数据处理的是1962年CODASYL发表的“信息代数”一文，之后1968年David Child在7090机上实现了集合论数据结构，但系统而严格地提出关系模型的是美国IBM公司的E.F.Codd。  
1970年E.F.Codd在美国计算机学会会刊Communication of the ACM上发表的题为A Relational Model of Data for Shared Data Banks的论文，开创了数据库系统的新纪元。此后，他连续发表了多篇论文，奠定了关系数据库的理论基础。  
几十年来，关系数据库系统的研究取得了辉煌的成就。关系方法从实验室走向了社会，涌现出许多性能良好的商业化关系数据库管理系统(RDBMS),如著名的IBM DB2、Oracle Ingres、SYBASE、Informix等。数据库的应用领域迅速扩大.  

1. 关系的基本术语  

**(1)属性(Attribute)**:在现实世界中，要描述一个事物常常取若干特征来表示。这些特征称为属性。例如学生通过学号、姓名、性别、系别、年龄、籍贯等属性来描述。  
**(2)域(Domain)**:每个属性的取值范围对应一个值的集合，称为该属性的域。例如，学号的域是6位整型数：姓名的域是10位字符：性别的域为{男，女}等。一般在关系数据模型中，对域还加了一个限制，即所有的域都应是原子数据(Atomic Data)。例如，整数、字符串是原子数据，而集合、记录、数组是非原子数据。关系数据模型的这种限制称为第一范式(First Normal Form,INF)条件，但也有些关系数据模型突破了1NF的限制。  
**(3)目或度(Degree)**:目或度指的是一个关系中属性的个数。  
**(4)候选码(Candidate Key)**:若关系中的某一属性或属性组的值能唯一的标识一个元组，则称该属性或属性组为候选码。
**(S)主码(Primary Key)**:或称主键，若一个关系有多个候选码，则选定其中一个作为主码。  
**(6)主属性(Prime Attribute)**:包含在任何候选码中的属性称为主属性。不包含在任何候选码中的属性称为非主属性(Non-Prime Attribute)。  
**(7)外码(ForeignKey)**:如果关系模式R中的属性或属性组不是该关系的码，但它是其他关系的码，那么该属性集对关系模式R而言是外码。  
例如，客户与贷款之间的借贷联系cl(cid,loan-no),属性c-id是客户关系中的码，所以c-id是外码：属性loan-no是贷款关系中的码，所以loan-no也是外码。  
**(8)全码(Al-ky)**:关系模型的所有属性组是这个关系模式的候选码，称为全码：例如，关系模式R(T,C,S),属性T表示教师，属性C表示课程，属性S表示学生，假设一个敦师可以讲授多门课程，某门课程可以由多个教师讲授，学生可以听不同教师讲授的不同课程，那么，要想区分关系中的每一个元组，这个关系模式R的码应为全属性T、C和S,
即ALL-KEY。  
(9)笛卡尔积：

【定义6.1】设$$D_1,D_2,D_3,D_...,D_n$$为任意集合，定义$$D_1,D_2,D_3,D_...,D_n$$的笛卡尔积为：$$D_1,D_2,D_3,D_...,D_n$$=$${(d_1,d_2,d_3,d_..,d_n)|d_i  \varepsilon  D_i , i=l,2,3···,n}$$
其中，集合中的每一个元素$$(d_1,d_2,d_3,d_..,d_n)$$叫作一个n元组(n-tuple,即n个属性的元组)，元素中的每一个值$$d_i$$叫作元组一个分量，若$$D_i=(i=l,2,3···,n)$$为有限集，其基数(Cardinal Number,元组的个数)为$$m_i,(i=l,2,3,···,n)$$,则$$D_1×D_2×D_3X…×D_n$$.的基数M为：

<img src="https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230322上午92900017.png" alt="image-20230322上午92900017" style="zoom:50%;" />。

2. 关系数据库模式

在数据库中要区分型和值。关系数据库中的型也称为关系数据库模式，是关系数据库结构的描述。它包括若干域的定义以及在这些域上定义的若干关系模式。关系数据库的值是这些关系模式在某一时刻对应的关系的集合，通常称之为关系数据库。
【定义6.2】关系的描述称为关系模式(Relation Schema).可以形式化地表示为：$$R (U,D,dom,F)$$
其中，R表示关系名：U是组成该关系的属性名集合：D是属性的域：dom是属性向域的映像集合：F为属性间数据的依赖关系集合。  
通常将关系模式简记为：  
$$R(U)或R(A_1,A_2,A_3,···,A_n)$$  
其中，R为关系名，$$(A_1,A_2,A_3,···,A_n)$$,为属性名或域名，属性向域的映像常常直接说明属性的类型、长度。通常在关系模式主属性上加下画线表示该属性为主码属性。  
例如：学生关系S有学号Sno、学生姓名Same、系名SD、年龄SA属性：课程关系C有课程号Cno、课程名Cname、先修课程号PCno属性：学生选课关系SC有学号Sno、课程号Cno、成绩Grade属性，定义关系模式及主码如下（本题未考虑F属性间数据的依赖，该问题在后续内容讨论)。  
(1)学生关系模式$$S(Sno,Sname,SD,SA)$$  
(2)课程关系模式C(Cno,Cname,PCno)，Dom(PCno)=Cno。这里，PCno是先行课程号，来自Cno域，但由于PCno属性名不等于Cno值域名，所以要用Dom来定义。但是，不能将Pcno直接改为Cno,因为在关系模型中，各列属性必须取相异的名字。  
(3)学生选课关系模式SC(Sno,Cno,Grade)。SC关系中的Sno、Cno又分别为外码,因为它们分别是S、C关系中的主码。  

3. 关系的完整性约束

完整性规则提供了一种手段来保证当授权用户对数据库做修改时不会破坏数据的一致性。因此，完整性规则防止的是对数据的意外破坏。关系模型的完整性规则是对关系的某种约束条件。例如，若某企业实验室管理员的基本薪资小于2000元，则可用完整性规则米进行约束。  
关系的完整性钓束共分为3类：实体完整性、参照完整性（也称引用完整性）和用户定义完整性。  

> (1)实体完整性(Entity Integrity)。实体完整性规则要求每个数据表都必须有主健，而作为主键的所有字段，其属性必须是唯一且非空值。  
> (2)参照完整性(Referential Integrity)。现实世界中的实体之间往往存在某种联系，在关系模型中实体及实体间的联系是用关系来描述的，这样自然就存在着关系与关系间的引用。  

参照完整性规定：若F是基本关系R的外码，它与基本关系S的主码K相对应（基本关系R和S不一定是不同的关系)，则对于R中每个元组在F上的值或者取空值(F的每个属性值均为空值)，或者等于S中某个元组的主码值。  
例如，某企业员工Emp关系模式和部门Dept关系模式表示如下：

Emp(员工号，姓名，性别，参加工作时间，部门号)  
Dept(部门竖，名称，电话，负责人)  
Emp和Dcpt关系存在着属性的引用，即员工关系中的“部门号”值必须是确实存在的部门的部门号。按照关系的完整性规则，员工关系中的“部门号”属性取值要参照部门关系的“部门号”属性取值。如果新入职的员工还未分配具体的部门，那么部门号取空值。  
注意：本书若在关系模式主属性上加实下画线，通常表示该属性为主码属性：如果在关系模式属性上加虚下画线，通常表示该属性为外码属性.  
(3)用户定义完整性(User Defined Integrity)。就是针对某一具体的关系数据库的约束条件，反映某一具体应用所涉及的数据必须满足的语义要求，由应用的环境决定。例如，银行的用户账户规定必须大于等于100000，小于999999.

#### 6.2.2 关系运算

关系操作的特点是操作对象和操作结果都是集合。  
关系代数运算符有4类：集合运算符、专门的关系运算符、算术比较符和逻辑运算符。根据运算符的不同，关系代数运算可分为传统的集合运算和专门的关系运算。传统的集合运算是从关系的水平方向进行的，包括并、交、差及广义笛卡儿积。专门的关系运算既可以从关系的水平方向进行运算，又可以向关系的垂直方向运算，包括选择、投影、连接以及除法，如表6-1所示。

![6-1](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/%E4%BD%8D%E5%9B%BE.png)

5种基本的关系代数运算包括并、差、笛卡尔积、投影和选择，其他运算可以通过基本的关系运算导出。

1. 并(Union)

关系R与S具有相同的关系模式，即R与S的元数相同（结构相同）。关系R与S的并由
属于R或属于S的元组构成的集合组成，记作$$RUS$$,其形式定义如下，式中：为元组变量。
$$R \cup S=|t|t \in R \vee t \notin S$$

2. 差(Difference)

关系R与S具有相同的关系模式，关系R与S的差是由属于R但不属于S的元组构成的集合，记作R-S,其形式定义如下：
$$ R-S=|t| t \in R \land t \notin S$$

3. 广义笛卡尔积(Extended Cartesian Product)

两个元数分别为n目和m目的关系R和S的广义笛卡尔积是一个$$(n+m)$$列的元组的集合。元组的前：列是关系R的一个元组，后m列是关系S的一个元组，记作$$RXS$$,其形式定义如下：
$$R \times S ={t| =< t^n ，t^m >= \land t^n \in R \land t^m \in S }$$  
如果R和S中有相同的属性名，可在属性名前加关系名作为限定，以示区别。若R有K,个元组，S有K,个元组，则R和S的广义笛卡尔积有KXK,个元组。
注意：本书中的$$<t^n，t^m>$$意为元组$$t^n$$和$$t^m$$严拼接成的一个元组。

4. 投影（Projection)

投影运算是从关系的垂直方向进行运算，在关系R中选择出若干属性列A组成新的关系，记作$$π_A(R)$$,其形式定义如下：
$$π_A(R)={t[A]|t \in R}$$

5. 选择(Selection)

选择运算是从关系的水平方向进行运算，是从关系R中选择满足给定条件的诸元组，记作$$\propto _F(R)$$,其形式定义如下：
$$\propto _F(R) = {t | t \in R \land F(t) = True}$$
其中，F中的运算对象是属性名（或列的序号）或常数，由运算符、算术比较符$$(<、≤、>、≥、\ne )$$和逻辑运算符$$(\land 、\lor 、一)$$构成。例如，$$\propto_{1≥6}(R)$$表示选取R关系中第1个属性值大于等于第6个属性值的元组：$$\propto_{1≥6}(R)$$表示透取R关系中第1个属性值大于等于6的元组。
扩展的关系运算可以从基本的关系运算中导出，主要包括：选择、投影、连接、除法、广义笛卡尔积、外连接。

6. 交（Intersection)

关系R与S具有相同的关系模式，关系R与S的交是由属于R同时又属于S的元组构成的集合，关系R与S的交可记为R∩S,其形式定义如下：
$$R∩S={t|t \in R \land t \in S}$$ 显然，$$R∩S=R-(R-S)$$,或者$$R∩S=S-(S-R)$$  

7. 连接（Join)

连接分为θ连接、等值连接及自然连接3种。连接运算是从两个关系R和S的笛卡尔积中选取满足条件的元组。因此，可以认为笛卡尔积是无条件连接，其他的连接操作是有条件连接,下面分述如下。   
1)θ连接  
目连接是从R与S的笛卡尔积中选取属性满足一定条件的元组。其形式定义如下：  
![image-20230327下午30652535](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230327%E4%B8%8B%E5%8D%8830652535.png)

其中：`XθY`为连接的条件，θ是比较运算符，X和Y分别为R和S上度数相等，且可比的属性组。$$t^n[X]$$表示R中$$t^n$$元组的相应于属性X的一个分量。$$t^m[Y]$$表示S中$$t^m$$元组的相应于属性Y的一个分量。需要说明的是：  
(1)θ连接也可以表示为：

![image-20230327下午31157818](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230327%E4%B8%8B%E5%8D%8831157818.png)
![image-20230327下午31157818](../../../../Library/Application%20Support/typora-user-images/image-20230327%E4%B8%8B%E5%8D%8831157818.png)

其中：$$i=1,2,3,···，n,j=1，2,3，···,m,$$θ的含义为从两个关系R和S中选取R的第i列和S的第j列之间满足θ运算的元组进行连接。  
(2)θ连接可以由基本的关系运算笛卡尔积和选取运算导出。因此日连接可表示为：  
![image-20230327下午31413601](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230327%E4%B8%8B%E5%8D%8831413601.png)
![image-20230327下午31413601](../../../../Library/Application%20Support/typora-user-images/image-20230327%E4%B8%8B%E5%8D%8831413601.png)2)等值连接(Equijoin)
当θ为“=”时，称之为等值连接，记为

<img src="https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230327%E4%B8%8B%E5%8D%8831548621.png" alt="image-20230327下午31548621" style="zoom: 150%;" />

。其形式定义如下：


![image-20230327下午31435771](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230327%E4%B8%8B%E5%8D%8831435771.png)

3)自然连接(Natural Join)是一种特殊的等值连接，它要求两个关系中进行比较的分量必须是相同的属性组，并且在结果集中将重复属性列去掉。  

若$$t^n$$表示R关系的元组变量，$$t^m$$表示S关系的元组变量：R和S具有相同的属性组B,且$$B=(B_1,B_2,B_3,···,B_g)$$:并假定R关系的属性为$$A_1,A_2,···,A_{n-k},B_1,B_2,···,B_k$$,S关系的属性为$$B_1,B_2,···,B_k,B_{K+1},B_{K+2},···,B_m$$:为S的元组变量广去掉重复属性B所组成的新的元组变量为$$t^m$$。
自然连接可以记为:,其形式定义如下：

![image-20230327下午32548584](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230327%E4%B8%8B%E5%8D%8832548584.png)

自然连接可以由基本的关系运算笛卡尔积和选取运算导出，因此自然连接可表示为：  

![image-20230327下午32619626](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230327%E4%B8%8B%E5%8D%8832619626.png)

特别需要说明的是：一般连接是从关系的水平方向运算，而自然连接不仅要从关系的水平方向，而且也要从关系的垂直方向运算。因为自然连接要去掉重复属性，如果没有重复属性，那么自然连接就转化为笛卡儿积。

8. 除（Division)

除运算同时从关系的水平方向和垂直方向进行运算。给定关系$$R(X,Y)$$和$$S(Y,Z)$$,X、Y、Z为属性组。R+S应当满足元组在X上的分量值x的象集Y包含关系S在属性组Y上投影的集合。其形式定义如下：
$$R \div S={t^n[X]| t^n \in R \land \pi_y，(S) \subseteq Y_x}$$
其中：Y为x在R中的象集，$$x =t^n[X]$$：且$$R \div S$$的结果集的属性组为X。

9. 广义投影(Generalized Projection)

广义投影运算允许在投影列表中使用算术运算，实现了对投影运算的扩充若有关系R,条件$$F_1,F_2,···,F_n$$中的每一个都是涉及R中常量和属性的算术表达式，那么广义投影运算的形式定义为：$$\pi_{f_1,F_2,···,F_x}(R)$$
10. 外连接(Outer Jion)

外连接运算是连接运算的扩展，可以处理缺失的信息。外连接运算有三种：左外连接、右外连接和全外连接。
①左外连接(Left Outer Jion)

左外连接：取出左侧关系中所有与右侧关系中任一元组都不匹配的元组，用空值null充填所有来自右侧关系的属性，构成新的元组，将其加入自然连接的结果中.  
②右外连接(Right Outer Jion).  
右外连接：取出右侧关系中所有与左侧关系中任一元组都不匹配的元组，用空值null填充所有来自左侧关系的属性，构成新的元组，将其加入自然连接的结果中。  
③全外连接(Full Outer Jion).  
全外连接：完成左外连接和右外连接的操作。即填充左侧关系中所有与右侧关系中任一元组都不匹配的元组，又填充右侧关系中所有与左侧关系中任一元组都不匹配的元组，将产生的新元组加入自然连接的结果中。

11. 聚集函数

聚集运算是关系代数运算中的一个非常重要的扩展。聚集函数输入一个值的集合，返回单一值作为结果。例如，集合{2,4,6,8,10,15}、将聚集函数sum用于该集合时返回和45：将聚集函数avg用于该集合时返回平均值7.5：将聚集函数cout用于该集合时返回集合中元数的个数6：将聚集函数min用于该集合时返回最小值2：将聚集函数max用于该集合时返回最大值15.  
需要说明的是，使用聚集函数的集合中，一个值可以出现多次，值出现的顺序是无关紧要的，这样的集合称之为多重集。集合是多重集的一个特例，其中每个值都只出现一次。  
但是，有时在计算聚集函数前必须去掉重复值，此时可以将distinet用连接符附加在函数名后，如count-distinct。

#### 6.23 关系数据库设计基本理论

关系数据理论是指导数据库设计的基础，关系数据库设计是数据库语义学的问题。要保证构造的关系既能准确地反应现实世界，又有利于应用和具体的操作。关系数据库设计的目标是生成一组合适的、性能良好的关系模式，以减少系统中信息存储的冗余度，但又可以方便地获取信息.
1. 函数依赖

数据依赖是通过一个关系中属性间值的相等与否体现出来的数据间的相互关系，是现实世界属性间联系和约束的抽象，是数据内在的性质，是语义的体现。函数依赖则是一种最重要、最基本的数据依赖。
【定义6.3】设R(U)是属性集U上的关系模式，X、Y是U的子集。若对R(U)的任何一个可能的关系r，r中不可能存在两个元组在X上的属性值相等，而在Y上的属性值不等，则称X函数决定Y或Y函数依赖于X,记作：$$X \longrightarrow Y$$,
如果$$X \longrightarrow Y$$,但$$Y \varsubsetneqq X$$,则称$$X \longrightarrow Y$$是非平凡的函数依赖。一般情况下总是讨论非平凡的函数依赖。  
如果$$X \longrightarrow Y$$,但$$Y\subseteq X$$,则称$$X \longrightarrow Y$$是平凡的函数依赖，注意：函数依赖X一Y的定义要求关系模式R的任何可能的r都满足上述条件。因此不能仅考察关系模式R在某一时刻的关系”，就断定某函数依赖成立。  
例如，关系模式Student(Sno,Sname,SD,Sage,Sex)可能在某一时刻，Student的关系r中每个学生的年静都不同，也就是说没有两个元组在Sage属性上取值相同，而在So属性上取值不同，但我们决不可据此就断定Sage→Sno。很有可能在某一时刻，Student的关系r中有两个元组在Sage属性上取值相同，而在Sno属性上取值不同。  
函数依赖是语义范畴的概念，我们只能根据语义来确定函数依赖。例如，在没有同名的情况下，Snme→Sage,而在允许同名的情况下，这个函数依赖就不成立了。  
【定义6.4】在R()中，如果X→Y,并且对于X的任何一个真子集X',都有X'不能决定Y,则称Y对X完全函数依赖，记作：X→Y。如果X→Y,但Y不完全函数依赖于X,则称Y对X部分函数依粮，记作：XP→Y。部分函数依赖也称作局部函数依赖。  
例如：给定一个学生选课关系SC(So,Cno,G),我们可以得到F={(So,Co)→G对(Sno,Co)中的任何一个真子集S0或C0都不能决定G,所以，G完全依赖于So,C1o.  
【定义6.5】在R(U,F)中，如果X一Y,实X,Y4X,Y→Z,则称Z对X传递依赖.

2. 多值依赖

【定义6.6】若关系模式R(U)中，X、Y、Z是U的子集，并且$$Z=U-X-Y$$。当且仅当对R(U)
的任何一个关系r,给定一对(x,z)值，有一组Y的值，这组值只由x值决定而与z值无关，
则称“Y多值依赖于X”或“X多值决定Y”成立。记为：X→→Y。
多值依赖具有以下6条性质：
* 多值依赖具有对称性。即若X→→Y,则X→→Z,其中Z=U-X-Y。
* 多值依赖具有传递性。即若X→→Y,Y→→Z,则X→→ZY。
* 函数依赖可以看成是多值依赖的特殊情况。
* 若X→→Y,X→→Z,则X→→YZ。
* 若X→→Y,X+→Z,则X→→Y∩Z。
* 若X→→Y,X→→Z,则X→→ZY。

3. 规范化

关系数据库设计的方法之一就是设计满足适当范式的模式，通常可以通过判断分解后的模式达到几范式来评价模式规范化的程度。范式有：1NF、2NF、3NF、BCNF、4NF和5NF,其中1NF级别最低。这几种范式之间¥$$1NF \subseteq 2NF \subseteq 3NF \subseteq BCNF \subseteq 4NF \subseteq 5NF$$成立通过分解，可以将一个低一级范式的关系模式转换成若干个高一级范式的关系模式，这种过程叫作规范化。下面将给出1NF到4NF的定义。

1)1NF

【定义6.7】若关系模式R的每一个分量都是不可再分的数据项，则关系模式R属于第一范式。记为$$R∈lNF$$。
例如，供应者和它所提供的零件信息，关系模式FRST和函数依赖集F如下：  
FIRST (Sno,Sname,Status,City,Pno,Qty)  
F={Sno→Sname,Sno→Status,.Status→City,(Sno,Pno)→Qty}  
对具体的关系FRST如表6-2所示。从表6-2中可以看出，每一个分量都是不可再分的数据项，所以是1NF的。但是，1NF存在4个问题。  

![image-20230508下午51556445](https://cdn.jsdelivr.net/gh/e9ab98e991ab/architecture@assets/assets/image-20230508%E4%B8%8B%E5%8D%8851556445.png)

(1)冗余度大。例如每个供应者的Sno、Sname、Status、City要与其供应的零件的种类一样多。  
(2)引起修改操作的不一致性。例如供应者S1从“天津”搬到“上海”，若不注意，会使一些数据被修改，另一些数据未被修改，导致数据修改的不一致性。  
(3)插入异常。关系模式FRIST的主码为Sno、Pno,按照关系模式实体完整性规定主码不能取空值或部分取空值。这样，当某个供应者的某些信息未提供时（如Po),则不能进行插入操作，这就是所谓的插入异常。  
(4)删除异常。若供应商S4的P2零件销售完了，并且以后不再销售P2零件，那么应删除该元组。这样，在基本关系FIRST找不到S4,可S4又是客观存在的。  
正因为上述4个原因，所以要对模式进行分解，并引入了2NF。  
2)2NF  
【定义6.8】若关系模式$$R∈1NF$$,且每一个非主属性完全依赖于码，则关系模式R∈2NF。换句话说，当1NP消除了非主属性对码的部分函数依赖，则称为2NF。  
例如：FIRST关系中的码是Sno、Pno,而Sno→Status,因此非主属性Status部分函数依赖于码，故非2NF的。  
若此时，将FRST关系分解为  
FIRST (Sno,Sname,Status,City) ∈2NF  
FIRST,(Sno,Pno,Qty)∈2NF  
因为分解后的关系模式FIRST,的码为Sno,非主属性Sname、Status、City完全依赖于码Sno,所以属于2NF; 关系模式FIRST2的码为Sno、Pno,非主属性Qy完全依赖于码，所以也属于2NF。

3)3NF  
【定义6.9】若关系模式R(U,F)中不存在这样的码X,属性组Y及非主属性$$Z(Z \notin Y)$$  
使得X→Y,(YnX)Y→Z成立，则关系模式R∈3NF。  
即当2NP消除了非主属性对码的传递函数依赖，则称为3NF。  
例如：FIRST,3NF,因为在分解后的关系模式FRST,中有Sno→Status,Status→City,  
存在着非主属性City传递依赖于码Sno。若此时将FIRST,继续分解为：  
FIRSTu (Sno,Sname,Status)∈3NF  
FIRST2(Status,City)∈3NF  
通过上述分解，数据库模式FIRST转换为FIRST1(Sno,Sname,Status),FIRST2(Status,City),FIRST.2(Sno,Pno,Qy)3个子模式。由于这3个子模式都达到了3NF,因此称分解后的数据库模式达到了3NF。  
可以证明，3NF的模式必是2NF的模式。产生冗余和异常的两个重要原因是部分依赖和传递依赖。因为3NF模式中不存在非主属性对码的部分函数依赖和传递函数依赖，所以具有较好的性能。对于非3NF的1NF、2NF来说，其性能弱，一般不宜作为数据库模式，通常要将它们变换成为3NF或更高级别的范式，这种变换过程称为“关系模式的规范化处理”。  
4)BCNF(Boyce Codd Normal Form,巴克斯范式)  
【定义6.10】关系模式R∈1NF,若$$X→Y且Y \notin X$$时，X必含有码，则关系模式R∈BCNF。  
也就是说，当3NF消除了主属性对码的部分函数依赖和传递函数依赖，则称为BCNF。  
结论：一个满足BCNF的关系模式，应有如下性质：  
(1)所有非主属性对每一个码都是完全函数依赖：  
(2)所有非主属性对每一个不包含它的码，也是完全函数依赖：  
(3)没有任何属性完全函数依赖于非码的任何一组属性。  
例如，设R(Pno,Pname,Mname)的属性分别表示零件号、零件名和厂商名，如果约定，每种零件号只有一个零件名，但不同的零件号可以有相同的零件名：每种零件可以有多个厂商生产，但每家厂商生产的零件应有不同的零件名。这样我们可以得到如下一组函数依赖：  
Pno→Pname,.(Pname,Mname)→Pno  
由于该关系模式R中的候选码为(Pname,Mname)或(Pno,Mname),因而关系模式R的属性都是主属性，不存在非主属性对码的传递依赖，所以R是3NF的。但是，主属性Pname传递依赖于码(Pname,Mname),因此R不是BCNF的。当一种零件由多个生产厂家生产时，零件名与零件号间的联系将多次重复，带来冗余和操作异常现象。若将R分解成：  
R1 (Pno,Pname)R2 (Pno,Mname) 就可以解决上述问题，并且分解后的关系模式R1、R2都属于BCNF。  
5)4NF  
【定义6.11】关系模式Re1NF,若对于R的每个非平凡多值依赖X一→$$Y且Y  \notin X$$时，X必含有码，则关系模式R(U,F)∈4NF。  
4NF是限制关系模式的属性间不允许有非平凡且非函数依赖的多值依赖。  
注意：如果只考虑函数依赖，关系模式最高的规范化程度是BCNF:如果考虑多值依赖，关系模式最高的规范化程度是4NF。

**补充：**

>- 第一范式（1NF）：要求关系模式中的所有属性都是原子性的，即属性不可再分。
>- 第二范式（2NF）：在满足1NF的基础上，要求关系模式中的非主属性必须完全依赖于主键。
>- 第三范式（3NF）：在满足2NF的基础上，要求关系模式中的非主属性不依赖于其他非主属性，即不存在传递依赖。
>- 巴斯-科德范式（BCNF）：在满足3NF的基础上，要求关系模式中的每个非主属性都依赖于主键，而不是依赖于主键的一部分。
>- 第四范式（4NF）：在满足BCNF的基础上，要求关系模式中不存在多值依赖或联合依赖。
>- 第五范式（5NF）：在满足4NF的基础上，要求关系模式中不存在重复组合。

### 6.3 数据库设计

数据库设计的任务是针对一个给定的应用环境，在给定的硬件环境和操作系统及数据库管理系统等软件环境下，创建一个性能良好的数据库模式，建立数据库及其应用系统，使之能有效地存储和管理数据，满足各类用户的需求。  
数据库设计(Database Design)属于系统设计的范畴。通常把使用数据库的系统统称为**数据库应用系统**，把对数据库应用系统的设计简称为数据库设计。目前主流的数据库系统多数为关系数据库系统，所以本节的论述基本是关系数据库的设计。  
#### 6.3.1 数据库设计的基本步骤

多年来，人们提出了多种数据库设计方法，多种设计准则和规范。但考虑数据库和应用系统开发全过程，一般将数据库设计分为如下6个阶段。  
**(1)用户需求分析。**数据库设计人员采用一定的辅助工具对应用对象的功能、性能、限制等要求进行科学的分析。  
**(2)概念结构设计**。概念结构设计是对信息分析和定义，如视图模型化、视图分析和汇总。
对应用对象精确地抽象、概括而形成独立于计算机系统的企业信息模型。描述概念模型的较理想的工具是E-R图。
**(3)逻辑结构设计**。将抽象的概念模型转化为与选用的DBMS产品所支持的数据模型相符合的逻辑模型，它是物理结构设计的基础。包括模式初始设计、子模式设计、应用程序设计、模式评价以及模式求精。  
**(4)物理结构设计**。是逻辑模型在计算机中的具体实现方案。  
**(5)数据库实施阶段**。数据库设计人员根据逻辑设计和物理设计阶段的结果建立数据库，编制与调试应用程序，组织数据入库，并进行试运行。  
**(6)数据库运行和维护阶段**。数据库应用系统经过试运行即可投入运行，但该阶段需要不断地对系统进行评价、调整与修改。  
#### 6.3.2 数据需求分析

数据需求分析是在项目确定之后，用户和设计人员对数据库应用系统所要涉及的内容（数据)和功能（行为）的整理和描述，是以用户的角度来认识系统。这一过程是后续开发的基础，因为逻辑设计、物理设计以及应用程序的设计都会以此为依据。  
需求分析阶段的任务：综合各个用户的应用需求，对现实世界要处理的对象（组织、部门和企业等)进行详细调查，在了解现行系统的概况，确定新系统功能的过程中，收集支持系统目标的基础数据及处理方法。  
参与需求分析的主要人员是分析人员和用户，由于数据库应用系统是面向企业和部门的具体业务，分析人员一般并不了解，而同样用户也不会具有系统分析的能力，这就需要双方进行有效的沟通，使得设计人员对用户的各项业务了解和熟悉，进行分析和加工，将用户眼中的业务转换成为设计人员所需要的信息组织。  
分析和表达用户需求的方法主要包括自顶向下和自底向上两类方法。自顶向下的结构化分析(Structured Analysis,SA)方法从最上层的系统组织机构入手，采用逐层分解的方式分析系统，并把每一层用数据流图和数据字典描述。需求分析的重点是调查组织机构情况、调查各部门的业务活动情况、协助用户明确对新系统的各种要求、确定新系统的边界，以此获得用户对系统的如下要求。  
**(1)信息要求**。用户需要在系统中保存哪些信息，由这些保存的信息要得到什么样的信息，这些信息以及信息间应当满足的完整性要求。  
**(2)处理要求**。用户在系统中要实现什么样的操作功能，对保存信息的处理过程和方式，各种操作处理的频度、响应时间要求、处理方式等以及处理过程中的安全性要求和完整性要求。
